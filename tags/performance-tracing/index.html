<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-updates">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">17 posts tagged with &quot;performance-tracing&quot; | Cardano Development Updates</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://input-output-hk.github.io/cardano-updates/tags/performance-tracing"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="17 posts tagged with &quot;performance-tracing&quot; | Cardano Development Updates"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/cardano-updates/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://input-output-hk.github.io/cardano-updates/tags/performance-tracing"><link data-rh="true" rel="alternate" href="https://input-output-hk.github.io/cardano-updates/tags/performance-tracing" hreflang="en"><link data-rh="true" rel="alternate" href="https://input-output-hk.github.io/cardano-updates/tags/performance-tracing" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/cardano-updates/rss.xml" title="Cardano Updates Feed RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cardano-updates/atom.xml" title="Cardano Updates Feed Atom Feed">
<link rel="alternate" type="application/json" href="/cardano-updates/feed.json" title="Cardano Updates Feed JSON Feed">



<link rel="alternate" type="application/rss+xml" href="/cardano-updates/quarterly/rss.xml" title="Cardano Development Updates RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/cardano-updates/quarterly/atom.xml" title="Cardano Development Updates Atom Feed">
<script src="https://plausible.io/js/script.js" defer="defer" data-domain="input-output-hk.github.io/cardano-updates"></script><link rel="stylesheet" href="/cardano-updates/assets/css/styles.1b2b551c.css">
<link rel="preload" href="/cardano-updates/assets/js/runtime~main.d58343f1.js" as="script">
<link rel="preload" href="/cardano-updates/assets/js/main.86e683fe.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cardano-updates/"><div class="navbar__logo"><img src="/cardano-updates/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/cardano-updates/img/logo.svg" alt="Cardano Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Cardano Updates</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cardano-updates/">Home</a><a class="navbar__item navbar__link" href="/cardano-updates/quarterly">Quarterly</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/cardano-updates/tags">Topics</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/cardano-updates/tags">All Topics</a></li><li><a class="dropdown__link" href="/cardano-updates/tags/network">Network</a></li><li><a class="dropdown__link" href="/cardano-updates/tags/consensus">Consensus</a></li><li><a class="dropdown__link" href="/cardano-updates/tags/ledger">Ledger</a></li><li><a class="dropdown__link" href="/cardano-updates/tags/hydra">Hydra</a></li><li><a class="dropdown__link" href="/cardano-updates/tags/db-sync">DB Sync</a></li><li><a class="dropdown__link" href="/cardano-updates/tags/cli-api">Node CLI &amp; API</a></li><li><a class="dropdown__link" href="/cardano-updates/quarterly/tags/cli-api-quarterly">Node CLI &amp; API Quarterly</a></li><li><a class="dropdown__link" href="/cardano-updates/tags/crypto">Crypto</a></li></ul></div><a class="navbar__item navbar__link" href="/cardano-updates/archive">Archive</a><a href="https://github.com/input-output-hk/cardano-updates" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent Posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-07-13-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-07-12-consensus">Consensus Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-07-12-performance-and-tracing">Performance &amp; tracing update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-07-07-crypto">Crypto Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-07-07-hydra">Hydra Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-07-07-sre">SRE Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-07-04-db-sync">DB-sync Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-06-30-hydra">Hydra Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-06-29-mithril">Mithril Team Update</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/cardano-updates/2023-06-28-consensus">Consensus Team Update</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>17 posts tagged with &quot;performance-tracing&quot;</h1><a href="/cardano-updates/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/cardano-updates/2023-07-12-performance-and-tracing">Performance &amp; tracing update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-07-12T00:00:00.000Z" itemprop="datePublished">July 12, 2023</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: The peformance investigation into the compiler switch to GHC9 is ongoing. Additionally, a roadmap for implementing Consensus QTAs has been developed.</li><li>Infrastructure: Our workbench has undergone some refactoring to seamlessly integrate its profiles into all available backends.</li><li>Tracing: Optimization of the new tracing system is ongoing and yielding good performance results.</li><li>Nomad backend: We developed a new feature for the nomad backend which allows pinning deployments to specific machines.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>Our analysis of the GHC9 build of <code>cardano-node</code> has produced several locations in the code base where the new compiler seems to miss opportunities for optimization. Our hypothesis is, that those can account for the difference in resource usage we observe when benchmarking with a full cluster run. Instructing the compiler on how to perform the optimizations which GHC8 apparently applied out of the box requires further investigation.  </p><p>In an effort to define Quantitative Timeliness Agreements (QTAs) on a per-component basis, we have coordinated with the Consensus team and developed a roadmap for providing those on consensus level. Making use of the insight that system-level benchmarks allow, we intend to set up and calibrate a benchmark that can reliably predict a regression or optimization for select metrics before needing full integration into <code>cardano-node</code>. This will help tremendously in various ways: catching regressions much earlier, localizing them much easier, avoiding repeated component integration and much shorter feedback cycle.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">â</a></h3><p>We have worked on seamless integration of our benchmarking profiles into the many available backends that the workbench provides. The goal was to be backend-agnostic, to guarantee that all benchmarking run artifacts be structurally identical as far as their file name, format and location are concerned. This lead to refactoring work and has already landed in <code>master</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>Much effort went into further optimization of the new tracing system. After working on configuration to align both new and legacy tracing system with regard to their trace frequencies, we could uncover some increase in resource usage. This occurred for corner cases under very heavy load. These cases have been addressed already, and do now surpass the legacy tracing system in terms of performance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">â</a></h3><p>For reliable benchmarking results it is vital to introduce as few confounding factors as possible when performing runs. This includes hardware and network topology. The nomad backend has been outfitted with a mechanism to pin the nomad job for some node in our benhcmarking cluster to a specific machine instance. This greatly increases confidence in the metrics observed from a run.  </p><p>Furthermore this feature will detect any change in the underlying hardware or topology so it can be taken into account. The new feature has been merged to <code>master</code>.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/cardano-updates/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/cardano-updates/2023-06-28-performance-and-tracing">Performance &amp; tracing update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-28T00:00:00.000Z" itemprop="datePublished">June 28, 2023</time> Â· <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: We&#x27;ve performed several new benchmarks and a performance investigation in preparation of switching the default compiler to GHC9.</li><li>Infrastructure: The first batch of refactoring and documentation for our <code>tx-generator</code> has been merged to <code>master</code>.</li><li>Tracing: We&#x27;ve looked into an issue where the tracing system&#x27;s concurrency could prevent a graceful node shutdown.</li><li>Nomad backend: Our new cloud backend has seen various improvements regarding deployment and monitoring; validation runs for the backend are ongoing.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>The compiler switch to GHC9 as the default build platform for <code>cardano-node</code> and its components still has noticeable effects on system-wide performance metrics. An investigation into the different resource usage profiles of compiler versions does seem to indicate GHC9&#x27;s significantly different inlining behaviour may produce those effects. We&#x27;re currently locating the specific places in component code that have the most extensive effect in that regard.  </p><p>Using the <code>forge-stress</code> approximation we set up, we could determine that above effect is not due to a range of RTS parameters, as for example the number of capabilites used by the node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">â</a></h3><p>The <code>tx-generator</code> is a crucial part of our tooling responsible for producing very specific workloads for our benchmarking cluster. In an effort to flesh out an API to make it reusable for more general use cases, a first set of refactorings has been merged to <code>master</code>. Additionally, this merge contained systematic documentation both for internal and for exposed areas of the code base.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>The tracing system&#x27;s concurrency could under certain conditions prevent a graceful shutdown of the node. This issue did occur only after adding specific new traces on a development branch. We could localize and address that issue.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">â</a></h3><p>With the data gathered from running the new nomad cloud backend, we&#x27;ve been able to address many, many small and medium-sized improvements. The deployment process has been restructured for better efficiency, and the healthcheck system could be fine-tuned to recognize severity of various conditions that might occur. Optimization of fetching all run data from the cloud for evaluation is in progress.</p><p>Additionally, we&#x27;re continuing the new backend&#x27;s validation by setting up test runs and looking into comparative analyses with metrics gathered from the current cluster backend.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/cardano-updates/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/cardano-updates/2023-06-14-performance-and-tracing">Performance &amp; tracing update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-14T00:00:00.000Z" itemprop="datePublished">June 14, 2023</time> Â· <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: We&#x27;ve continued release benchmarking and established a new baseline for <code>8.0.0</code>.</li><li>New tracing: Our benchmarking profile for measuring new vs. legacy tracing performance has been refined.</li><li>Nomad backend: The healthcheck system for the the nomad cloud has been completed. We&#x27;ve performed the first full runs on the new backend.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>In our release benchmarking cycle, we established a new performance baseline for <code>8.0.0</code>. Additionally, we&#x27;ve measured
performance under various workloads for <code>8.1.1-pre</code>; the results look promising and validate the optimization efforts
done on several system components.  </p><p>In the meantime, we&#x27;ve finalized a build plan with GHC9.2 that matches the current one with GHC8.10; a requirement for
benchmarking as a large amount of differences in the dependency graph can confound the results for the application code proper.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>The legacy and the new tracing system differ fundamentally in design, implementation and handling. So for metrics to be
meaningful in a comparison, benchmarking profiles have to be tuned such that not only log line frequency but frequency of specific
trace messages are closely aligned. We&#x27;ve found that higher granularity in this regard was necessary, and done additional work on our dedicated profiles.  </p><p>Additionally, we&#x27;ve had a first glance of what additional traces could be valuable in the context of benchmarking UTxO-HD.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">â</a></h3><p>As the new backend&#x27;s healthcheck system in its first iteration can now serve as a guardrail to ensure sanity of a full-length run, we&#x27;ve performed our first 52-node cluster runs on nomad cloud. We&#x27;re currently smoothing the edges around cluster deployment, and analysing the metrics gathered from those runs.  </p><p>This means the backend is entering validation phase, where we systematically compare all metrics taken from the new
infrastructure to the existing ones, including determining reproducibility and variance.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/cardano-updates/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/cardano-updates/2023-05-31-performance-and-tracing">Performance &amp; tracing update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-05-31T00:00:00.000Z" itemprop="datePublished">May 31, 2023</time> Â· <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: We&#x27;ve performed and analysed first benchmarks with GHC9.2 builds. Additionally we have developed an early indicator for how build config changes might reflect on metrics from our model cluster.</li><li>New tracing: Collaboration with Galois led to the new tracing system to be equipped with a re-forwarding mechanism.</li><li>Nomad backend: Porting the 52 node model cluster to nomad cloud is ongoing, with the focus on deployment and health checks.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>The first set of runs with GHC9.2 as a build platform are in. We&#x27;ve discovered a significant difference in resource profile usage compared to GHC8.10. Further investigation uncovered the need for benchmarking another parameter change in the build
configuration: As it stands, the <code>ghc-bignum</code> package is using the Haskell <code>native-backend</code> as a default. We strive
to benchmark a build with the <code>gmp-backend</code> next.  </p><p>A variant of our <code>forge-stress</code> local benchmark has been set up to serve as an early indicator for the resource usage profile
we&#x27;d expect to observe on the model cluster. This provides us with a much tighter feedback loop, as local run duration is way
shorter. This indicator is specific to changes in the configuration of build and the runtime systems, and will be of great
support when evaluating different compiler versions or RTS flags incrementally.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>The hub of the new tracing system <code>cardano-tracer</code> is designed with a fixed output behaviour, which is limited to various
logging options. Thanks to the contribution from Galois, that design is now extended to be able to re-forward all, or a pre-filtered portion, of traces from the node in a configurable manner. This will enable downstream applications to
directly receive the set of trace values relevant to their logic, without any additional cost for the node itself at all.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">â</a></h3><p>We&#x27;re currently working out the details of efficiently deploying and monitoring a fleet of 50+ nodes, along with
job definitions for tracing and transaction generation. Scaling up to those many instances, and monitoring an ongoing
benchmarking run required us to fine-tune communications with the nomad server.  </p><p>Related to that, the new cloud backend will provide a monitoring and health-checking mechanism which is far more flexible
and offers more detailed insight than the previous iteration in <code>cardano-ops</code>. The backend will enable you to formulate
very specific conditions for an ongoing run to be considered healthy, and offer automation of certain actions should these conditions not be met.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/cardano-updates/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/cardano-updates/2023-05-17-performance-and-tracing">Performance &amp; tracing update</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-05-17T00:00:00.000Z" itemprop="datePublished">May 17, 2023</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mgmeier.png" alt="Michael Karg"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/mgmeier" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Michael Karg</span></a></div><small class="avatar__subtitle" itemprop="description">Performance and Tracing Team Lead</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">â</a></h2><ul><li>Benchmarking: We&#x27;re preparing our model cluster to perform GHC9.2 benchmarks, as well as experimenting with increased dataset sizes.</li><li>New tracing: After optimization work on the new tracing system, another cycle of validation and documentation is due.</li><li>Analysis pipeline: First steps on implementing incremental analysis have been untertaken.</li><li>Open Sourcing: Exhaustive dataflow charts for both our analysis tool <code>locli</code> and our <code>workbanch</code> have been merged to <code>master</code></li><li>Nomad backend: The first set of CI-centric workbench profiles have been adjusted and run on the nomad backend; currently we&#x27;re porting the definition of our model cluster.</li><li>P&amp;T Meetup: We had a very productive personal meetup in Lugano, Switzerland.</li><li>Offboarding: Sadly, we have to say goodbye to our team lead. Currently, we&#x27;re busy with the handover.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">â</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">â</a></h3><p>As a compiler switch to GHC 9.2.7 for <code>cardano-node</code>&#x27;s default build environment is around the corner, we&#x27;re setting up our benchmarking cluster to
handle the new version. Special attention is given to the fact that we might need more flexibility in switching compiler versions in the future. This
also involves choosing a reliable baseline as reference point for inter-version comparisons.  </p><p>Additionally we&#x27;ve been working on refining our model cluster: by increasing UTxO and delegation map sizes to closer match those of current mainnet,
we strive to have a more accurate model - and thus be able to make more detailed predictions regarding performance. However, this still needs to
be balanced against resource demand for all our cluster&#x27;s nodes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">â</a></h3><p>For our new tracing system, we&#x27;re currently validating the behaviour of the system after optimizations have been applied. Furthermore, some
quality-of-life details that have changed required us to revision the system documentation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis">Analysis<a class="hash-link" href="#analysis" title="Direct link to heading">â</a></h3><p>As a mid-term goal, we aim to provide incremental analysis of our benchmarking metrics. While currently, we can only reliably process runs that have been
normally (or abnormally) terminated, we see the possibility of incrementally analysing ongoing runs, or any data source yielding our key metrics, as a
huge opportunity to increase our operational flexibility. All in all, this approach entails building completely new features for our pipeline. A first effort to accomodate incrementally incoming data points has been undertaken. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-sourcing">Open Sourcing<a class="hash-link" href="#open-sourcing" title="Direct link to heading">â</a></h3><p>A very involved and exhaustive documentation and visualization effort has been undertaken to make the data flow through our key benchmarking
copmonents more accessible. As a result, detailed charts for both our LogObject CLI <code>locli</code> and our <code>workbench</code> have been merged to <code>master</code>. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">â</a></h3><p>While our Nomad backend is reaching completion, and hardware setup is being implemented in collaboration with SRE, we&#x27;ve been adjusting
those profiles of our <code>workbench</code> that target CI-oriented workloads to the new backend. Those profiles should demonstrate the full functionality
of the nomad cloud backend.  </p><p>Additionally, we&#x27;re porting a first deployable version of our model cluster to nomad cloud, which will form the basis for validation of our actual key metrics with regard to those from the existing cluster.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance--tracing-meetup">Performance &amp; Tracing Meetup<a class="hash-link" href="#performance--tracing-meetup" title="Direct link to heading">â</a></h3><p>We held a personal team meetup in Lugano, Switzerland. In an amazing location, and with a great seminar room to focus, we had 2 very productive
days together. Being able to discuss live and in colour, we could effectively synchronize on where the team is at, and how we want to develop in the future.
Also, it was a great opportunity to finally meet in person.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="offboarding">Offboarding<a class="hash-link" href="#offboarding" title="Direct link to heading">â</a></h3><p>Last not least we regret that our team lead is leaving at the end of May. Currently, he&#x27;s handing over all his obligations, which requires reorganisation
of team structure, and responsabilities of team members for specific tasks. Serge, we all want to thank you for your excellent and reliable lead; we very much enjoyed the time with you, and wish you all the best for your future endeavours!</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/cardano-updates/tags/performance-tracing">performance-tracing</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/cardano-updates/tags/performance-tracing/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Blog</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/cardano-updates/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/cardano-updates/archive">Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/cardano-updates/tags">Tags</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Input Output Global, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/cardano-updates/assets/js/runtime~main.d58343f1.js"></script>
<script src="/cardano-updates/assets/js/main.86e683fe.js"></script>
</body>
</html>