---
title: Performance & tracing update
slug: 2023-02-08-performance-and-tracing
authors: deepfire
tags: [performance-tracing]
hide_table_of_contents: false
---

## High level summary

1. SECP benchmarking:  we ran several rounds of SECP benchmarks, refining the benchmark setup as we discovered the properties of the system.  After formulating an initial suggested change to the protocol parameters, we're currently running what we consider the final benchmark, to validate the underlying assumptions.
2. Release benchmarking:  we've performed a round of benchmarks for the hotfix 1.35 release update and initiated the 1.35.6 benchmarks.
3. New tracing:  the improvement in the tracing API, with the underlying restructuring, was completed and merged into the node.
4. New tracing:  before going live, we're performing the documentation update, as well as reworking the end user migration guide.
5. Open sourcing:  the benchmarking data publishing has been completed and deployed.  After populating it with relevant benchmark data and providing basic user documentation we can go live.
6. Infrastructure:  the cloud workbench backend is progressing well, the networking aspects of multi-region deployment are currently being worked on.
7. Infrastructure:  the NixOps workbench backend is still being worked on, as part of migration from cardano-ops and benchmarking infrastructure unification.

## Performance

We are approaching the end of a chain of SECP benchmarks, as we gradually eliminated deficiencies in the setup as we were discovering them and answering newly appearing questions:

- we improved the tx/block filling strategy in the generator, to maximise the per-block utilisation of resources and so better approximate the worst-case,
- after a discovery of what looked like significant per-SC-call overhead, we again tweaked the the tx/block filling strategy,
- finally, we're redoing all benchmarks together with a value-only run against the backdrop of Mainnet-sized datasets, to balance the suggested adjustment.  That also ran into difficulties wrt. limitations of our benchmarking hardware.

In addition, we started benchmarks of the 1.35.6 release.

## Tracing

A rework of the new tracing system's internals and API was merged.  It extended the system with introspection, which enabled a range of improvements, some of which were implemented along the way.

Specifically, we were able to completely short-cut processing of messages generated by the tracers that were made provably ineffective by current tracing configuration.  Further, now ongoing work enabled by the introspection facilities, includes static validation of documentation and enhanced node state reporting.

## Infrastructure

On the opensourcing/transparency front, the benchmark data publishing machinery was finally fully assembled and put online.  As resources permit, we'll work on populating it with benchmarking data, preparing basic documentation and engaging the stakeholders.

The work on the cloud deployment capability of the Nomad workbench backend continued with focus on setting up inter-node networking and removal of locality assumptions.  A major step besides those, was completion of a switch-over to the directly-executable derivations, which eliminate the need for creation and distribution of images -- thereby increasing the speed of deployment.

The Nixops workbench backend progressed steadily, reaching minimal deployment capability.  The remaining parts are proper shared configuration generation, and porting of the run control functionality from cardano-ops.
