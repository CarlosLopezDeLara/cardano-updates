<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://input-output-hk.github.io/cardano-updates/</id>
    <title>Cardano Updates Feed</title>
    <updated>2023-07-04T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://input-output-hk.github.io/cardano-updates/"/>
    <subtitle>Regular updates from Cardano Development Teams</subtitle>
    <icon>https://input-output-hk.github.io/cardano-updates/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[DB-sync Team Update]]></title>
        <id>2023-07-04-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-07-04-db-sync"/>
        <updated>2023-07-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We've made progress in all high level objectives</p><ul><li>CIP-1694 integration design</li><li>UTxO-HD integration proof of concept</li><li>schema migrations with a focus on speeding up frequent queries is part of release 13.1.1.2 and tested</li><li>Many devx issues resolved</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><ul><li>We have improved and validated the design for the Conway integration in db-sync</li><li>Improved the initial integration of the UTxO-HD feauture branches which are under test</li><li>Prepared a new release 13.1.1.3 which supports node 8.1.1
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1455" target="_blank" rel="noopener noreferrer">#1455</a>.</li><li>This also fixes a bug
<a href="https://github.com/input-output-hk/cardano-db-sync/issues/1451" target="_blank" rel="noopener noreferrer">#1451</a></li><li>Added new tests to the new tx_out options
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1429" target="_blank" rel="noopener noreferrer">#1429</a></li><li>Fixed a chronic issue in db-sync related to exception handling and concurrency
This fixes many other issues and simplifies the logic in db-sync
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1447" target="_blank" rel="noopener noreferrer">#1447</a></li><li>A number of fixes and improvements in ci, docker, devx, docs
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1436" target="_blank" rel="noopener noreferrer">#1436</a><a href="https://github.com/input-output-hk/cardano-db-sync/pull/1442" target="_blank" rel="noopener noreferrer">#1442</a><a href="https://github.com/input-output-hk/cardano-db-sync/pull/1448" target="_blank" rel="noopener noreferrer">#1448</a><a href="https://github.com/input-output-hk/cardano-db-sync/pull/1452" target="_blank" rel="noopener noreferrer">#1452</a></li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-06-30-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-30-hydra"/>
        <updated>2023-06-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team wrote and published the monthly report for June,
implemented the end-to-end functionality for external commits, and tested it on
the preview environment. They also listed Hydra as a tool on the Cardano
developer portal, providing more visibility for the project. The team clarified
the path forward for L2 protocol improvements and explored an alternative CI
approach using cabal instead of nix. Additionally, they released version 0.11.0,
marking another milestone in the project<!-- -->’<!-- -->s development.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Written and published the monthly report for <a href="https://hydra.family/head-protocol/monthly/2023-06" target="_blank" rel="noopener noreferrer">June</a></li><li>Implemented external commits end-to-end incl. tested it on preview <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a></li><li>Listed Hydra as a tool on cardano <a href="https://developers.cardano.org/tools/" target="_blank" rel="noopener noreferrer">developer portal</a></li><li>Cleared up path forward on L2 protocol improvements <a href="https://github.com/input-output-hk/hydra/issues/728" target="_blank" rel="noopener noreferrer">#728</a></li><li>Established an alternative CI using more cabal tools <a href="https://github.com/input-output-hk/hydra/pull/923" target="_blank" rel="noopener noreferrer">#923</a></li><li>Release version <a href="https://github.com/input-output-hk/hydra/releases/tag/0.10.0" target="_blank" rel="noopener noreferrer">0.11.0</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Spike on performance improvements of event sourced persistence <a href="https://github.com/input-output-hk/hydra/issues/913" target="_blank" rel="noopener noreferrer">#913</a></li><li>Complete ReqSn only sends transaction ids <a href="https://github.com/input-output-hk/hydra/issues/728" target="_blank" rel="noopener noreferrer">#728</a></li><li>Groom and plan last items for 0.12.0 (remove internal commit)</li><li>Improve reliability of benchmarks</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-06-29-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-29-mithril"/>
        <updated>2023-06-29T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team completed the design of the signer deployment model for the SPOs to run Mithril on their Cardano <code>mainnet</code> infrastructure, and implemented the associated Mithril Relay in the Mithril networks. They started working on the design and implementation of a stress test tool for benchmarking the aggregator performances. They worked on the refactoring of the Mithril Stake Distribution entity and the uniformization of the date types in the nodes. They also worked on implementing a new tool command in the aggregator and its first sub-command that helps avoiding re-genesis of the certificate chain when the structure of the certificate is updated. Additionally, they worked on implementing some monitoring for the Mithril infrastructure, and worked on a retry mechanism for the artifact creation of the aggregator.</p><p>Finally, they fixed some bugs, and they completed the upgrade of the Mithril networks to Cardano node v.8.1.1.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Worked on the epic that prepares the Mithril infrastructure for <code>mainnet</code> <a href="https://github.com/input-output-hk/mithril/issues/767" target="_blank" rel="noopener noreferrer">#767</a>:<ul><li>Worked on the issue <code>Add infrastructure monitoring</code> <a href="https://github.com/input-output-hk/mithril/issues/987" target="_blank" rel="noopener noreferrer">#987</a></li></ul></li><li>Completed the epic <code>Prepare Mithril Signer deployment model for SPO</code> <a href="https://github.com/input-output-hk/mithril/issues/862" target="_blank" rel="noopener noreferrer">#862</a>:<ul><li>Completed the issue <code>Design recommended deployment model for SPOs on 'mainnet' and 'preview'/'preprod'</code> <a href="https://github.com/input-output-hk/mithril/issues/961" target="_blank" rel="noopener noreferrer">#961</a></li><li>Completed the issue <code>Adapt infrastructure to use Mithril Relay</code> <a href="https://github.com/input-output-hk/mithril/issues/1018" target="_blank" rel="noopener noreferrer">#1018</a></li><li>Completed the issue <code>Announce the new signer deployment model in a dev blog post</code> <a href="https://github.com/input-output-hk/mithril/issues/1017" target="_blank" rel="noopener noreferrer">#1017</a></li></ul></li><li>Worked on the epic <code>Benchmark performances of Mithril Aggregator</code> <a href="https://github.com/input-output-hk/mithril/issues/904" target="_blank" rel="noopener noreferrer">#904</a>:<ul><li>Worked on the issue <code>Design &amp; implement basic stress test tool for aggregator</code> <a href="https://github.com/input-output-hk/mithril/issues/991" target="_blank" rel="noopener noreferrer">#991</a></li></ul></li><li>Worked on bugs:<ul><li>Completed the issue <code>Aggregator does not exit on critical error</code> <a href="https://github.com/input-output-hk/mithril/issues/993" target="_blank" rel="noopener noreferrer">#993</a></li><li>Completed the issue <code>Computation of master certificate of an epoch is incorrect</code> <a href="https://github.com/input-output-hk/mithril/issues/1006" target="_blank" rel="noopener noreferrer">#1006</a></li><li>Completed the issue <code>End to end tests are flaky</code> <a href="https://github.com/input-output-hk/mithril/issues/954" target="_blank" rel="noopener noreferrer">#954</a></li><li>Worked on the issue <code>'testing-preview' network does not create certificates</code> <a href="https://github.com/input-output-hk/mithril/issues/1015" target="_blank" rel="noopener noreferrer">#1015</a></li></ul></li><li>Worked on optimizations:<ul><li>Completed the issue <code>Dates format is not standardized</code> <a href="https://github.com/input-output-hk/mithril/issues/946" target="_blank" rel="noopener noreferrer">#946</a></li><li>Completed the issue <code>Add 'recompute-certificates-hash' command to aggregator</code> <a href="https://github.com/input-output-hk/mithril/issues/1001" target="_blank" rel="noopener noreferrer">#1001</a></li><li>Completed the issue <code>Add a retry mechanism for artifact creation in aggregator</code> <a href="https://github.com/input-output-hk/mithril/issues/984" target="_blank" rel="noopener noreferrer">#984</a></li><li>Completed the issue <code>Log node version at startup in Aggregator/Signer</code> <a href="https://github.com/input-output-hk/mithril/issues/944" target="_blank" rel="noopener noreferrer">#944</a></li><li>Completed the issue <code>Reactivate Publish Results job in CI</code> <a href="https://github.com/input-output-hk/mithril/issues/978" target="_blank" rel="noopener noreferrer">#978</a></li><li>Completed the issue <code>Clean 'pending_snapshot' directory of aggregator</code> <a href="https://github.com/input-output-hk/mithril/issues/983" target="_blank" rel="noopener noreferrer">#983</a></li><li>Completed the issue <code>Update OpenAPI spec examples</code> <a href="https://github.com/input-output-hk/mithril/issues/1000" target="_blank" rel="noopener noreferrer">#1000</a></li></ul></li><li>Worked on refactoring:<ul><li>Completed the issue <code>Refactor 'MithrilStakeDistribution' entity</code> <a href="https://github.com/input-output-hk/mithril/issues/967" target="_blank" rel="noopener noreferrer">#967</a></li><li>Completed the issue <code>Refactoring client</code> <a href="https://github.com/input-output-hk/mithril/issues/982" target="_blank" rel="noopener noreferrer">#982</a></li><li>Completed the issue <code>Refactor download code in client</code> <a href="https://github.com/input-output-hk/mithril/issues/1010" target="_blank" rel="noopener noreferrer">#1010</a></li><li>Worked on the issue <code>Factorize protocol crypto operations</code> <a href="https://github.com/input-output-hk/mithril/issues/669" target="_blank" rel="noopener noreferrer">#669</a></li></ul></li><li>Worked on dependencies:<ul><li>Completed the issue <code>Upgrade Cardano node to '8.1.1'</code> <a href="https://github.com/input-output-hk/mithril/issues/973" target="_blank" rel="noopener noreferrer">#973</a></li></ul></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-06-28-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-28-consensus"/>
        <updated>2023-06-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks the team working on the Genesis implementation continued to engage with the researchers, which resulted in various simplifications of the correctness argument for the historical Genesis window. They also decided on an approach for a syncing node to decide that it is (no longer) caught up. This functionality was requested by the networking team. </p><p>The team working on the UTxO-HD implementation ran ad-hoc benchmarks that showed performance issues, which are being investigated. They also merged several improvements required for the first UTxO-HD release, and added a package for easing integration with other downstream components.</p><p>Regarding our support activities, we integrated the latest Ledger changes into Consensus in preparation for release 8.2 of node. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><ul><li><p>We continued to engage with the researchers on our probabilistic model for historical Genesis window, resulting in various simplifications that make the correctness argument more clear while not being excessively conservative.</p></li><li><p>We <a href="https://github.com/input-output-hk/ouroboros-consensus/issues/101#issuecomment-1607767722" target="_blank" rel="noopener noreferrer">decided on an approach</a> of how to implement functionality requested by the Networking team; namely, how a syncing node can safely conclude that it is (no longer) caught up. Certain parameters are still subject to discussion with the researchers, and we have still have to agree on a concrete API for this functionality with the Networking team.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd">UTxO-HD<a class="hash-link" href="#utxo-hd" title="Direct link to heading">​</a></h3><ul><li>We merged the last of the PRs that were part of UTxO-HD improvements for version <a href="https://github.com/input-output-hk/ouroboros-consensus/issues/149" target="_blank" rel="noopener noreferrer">0.1</a>: expose UTxO-HD configuration options in the node, refactor ledger tables, and expose a method of computing the UTxO set size.</li><li>We <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/87" target="_blank" rel="noopener noreferrer">added</a> a new "legacy" cardano block in a new <code>ouroboros-consensus-cardano-legacy-block</code> package that should ease the transition for some downstream packages to UTxO-HD, like <code>db-sync</code>. This is really only useful for downstream packages that use the parts of consensus that don't involve the storage components, in which case we can largely ignore ledger tables. Ignoring ledger tables could also make functionality like block (re-)application more performant for the legacy Cardano block as compared to the actual (UTxO-HD compatible) Cardano block.</li><li>We performed ad-hoc benchmarks of the UTxO-HD implementation, observing a regression in sync speed in the LMDB implementation as well as a regression in memory usage on the in-memory implementation. We are investigating this.</li></ul>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-06-28-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-28-performance-and-tracing"/>
        <updated>2023-06-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Benchmarking: We've performed several new benchmarks and a performance investigation in preparation of switching the default compiler to GHC9.</li><li>Infrastructure: The first batch of refactoring and documentation for our <code>tx-generator</code> has been merged to <code>master</code>.</li><li>Tracing: We've looked into an issue where the tracing system's concurrency could prevent a graceful node shutdown.</li><li>Nomad backend: Our new cloud backend has seen various improvements regarding deployment and monitoring; validation runs for the backend are ongoing.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">​</a></h3><p>The compiler switch to GHC9 as the default build platform for <code>cardano-node</code> and its components still has noticeable effects on system-wide performance metrics. An investigation into the different resource usage profiles of compiler versions does seem to indicate GHC9's significantly different inlining behaviour may produce those effects. We're currently locating the specific places in component code that have the most extensive effect in that regard.  </p><p>Using the <code>forge-stress</code> approximation we set up, we could determine that above effect is not due to a range of RTS parameters, as for example the number of capabilites used by the node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">​</a></h3><p>The <code>tx-generator</code> is a crucial part of our tooling responsible for producing very specific workloads for our benchmarking cluster. In an effort to flesh out an API to make it reusable for more general use cases, a first set of refactorings has been merged to <code>master</code>. Additionally, this merge contained systematic documentation both for internal and for exposed areas of the code base.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h3><p>The tracing system's concurrency could under certain conditions prevent a graceful shutdown of the node. This issue did occur only after adding specific new traces on a development branch. We could localize and address that issue.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>With the data gathered from running the new nomad cloud backend, we've been able to address many, many small and medium-sized improvements. The deployment process has been restructured for better efficiency, and the healthcheck system could be fine-tuned to recognize severity of various conditions that might occur. Optimization of fetching all run data from the cloud for evaluation is in progress.</p><p>Additionally, we're continuing the new backend's validation by setting up test runs and looking into comparative analyses with metrics gathered from the current cluster backend.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-06-23-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-23-goedel"/>
        <updated>2023-06-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the teams presented two papers at ICE 2023.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Presented two papers at ICE 2023: <a href="https://www.discotec.org/2023/ice" target="_blank" rel="noopener noreferrer">https://www.discotec.org/2023/ice</a></p></li><li><p>Analysing and implementing chain synchronization mini protocol</p></li><li><p>The team is hiring a performance engineering intern - <a href="https://apply.workable.com/io-global/j/BFEC5B0AFF/" target="_blank" rel="noopener noreferrer">https://apply.workable.com/io-global/j/BFEC5B0AFF/</a></p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-06-23-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-23-hydra"/>
        <updated>2023-06-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team shared progress updates during the monthly review
meeting (monthly report and video recording available soon) and started
experimenting on preview network with the new commit from external wallet
feature.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Monthly report &amp; review meeting, demonstrating <a href="https://github.com/input-output-hk/hydra/pull/887" target="_blank" rel="noopener noreferrer">commit from external
wallet</a></li><li>Published regular <a href="https://hydra.family/head-protocol/unstable/benchmarks/end-to-end-benchmarks" target="_blank" rel="noopener noreferrer">benchmarks for
Hydra</a></li><li>Moved forward the journey for external commits using multiple script UTxOs
<a href="https://github.com/input-output-hk/hydra/pull/903" target="_blank" rel="noopener noreferrer">#903</a></li><li>Changed the API to only put transaction id in snapshots, instead of the full
transactions <a href="https://github.com/input-output-hk/hydra/pull/922" target="_blank" rel="noopener noreferrer">#922</a> -&gt; this
is now evolved into fully addressing <a href="https://github.com/input-output-hk/hydra/issues/728" target="_blank" rel="noopener noreferrer">#728</a></li><li>Fuel marking is now optional as one can now commit from an external wallet
<a href="https://github.com/input-output-hk/hydra/pull/924" target="_blank" rel="noopener noreferrer">#924</a></li><li>Add flag option to display node version on tui
<a href="https://github.com/input-output-hk/hydra/pull/934" target="_blank" rel="noopener noreferrer">#934</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Complete external commits using multiple script UTxOs <a href="https://github.com/input-output-hk/hydra/pull/903" target="_blank" rel="noopener noreferrer">#903</a></li><li>New release 0.11.0</li><li>Dirtroad solution of improved persistence performance <a href="https://github.com/input-output-hk/hydra/pull/913" target="_blank" rel="noopener noreferrer">#913</a></li></ul>]]></content>
        <author>
            <name>Franco Testagrossa</name>
            <uri>https://github.com/ffakenz</uri>
        </author>
        <author>
            <name>Pascal Grange</name>
            <uri>https://github.com/pgrange</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-06-23-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-23-network"/>
        <updated>2023-06-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Network Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-update">Network Update<a class="hash-link" href="#network-update" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-contributions">Key contributions<a class="hash-link" href="#key-contributions" title="Direct link to heading">​</a></h3><p>We held a series of session to review the implementation of big ledger peers
(eclipse evasion). See <a href="https://github.com/input-output-hk/ouroboros-network/pull/4462" target="_blank" rel="noopener noreferrer">#4462</a>.</p><p>We get a request from a 3rd party to clarify an inconsistency between CDDL spec
and protocol implementation.  We worked out a nice solution which takes
advantage of the <code>any</code> notion available in <code>CDDL</code>.  On the Haskell side we
provide <code>Any</code> type which gen generate almost any CBOR term (some are excluded
only because they are not decoded back to the same form, and we relay on that
property).  See <a href="https://github.com/input-output-hk/ouroboros-network/pull/4580" target="_blank" rel="noopener noreferrer">#4580</a>.</p><p>We fixed a bunch of problems of the <code>cardano-cli ping</code> command.  It also now has
a limited support of <code>node-to-client</code> mini-protocol (the <code>-c</code> option is
ignored, as it cannot be supported by <code>node-to-client</code> protocol).  Note that
the format of messages has changed, timestamps are printed in ISO8601 format.
See <a href="https://github.com/input-output-hk/ouroboros-network/pull/4601" target="_blank" rel="noopener noreferrer">#4601</a>, <a href="https://github.com/input-output-hk/cardano-node/pull/5326" target="_blank" rel="noopener noreferrer">#5326</a>, <a href="https://github.com/input-output-hk/cardano-node/pull/5313" target="_blank" rel="noopener noreferrer">#5313</a>, <a href="https://github.com/input-output-hk/cardano-cli/pull/30" target="_blank" rel="noopener noreferrer">#30</a></p><p>In order to provide a new flag in the topology file which enables ledger peers
when the chain is close to the tip, we continued to work on <a href="https://github.com/input-output-hk/ouroboros-network/issues/4530" target="_blank" rel="noopener noreferrer">#4530</a>.  This is
currently in review, the consensus team will need to provide us with the new
api.  This feature is useful for two reasons: makes it easier to maintain
a topology file, it will also limit the traffic on public roots generated by
for example full node wallets and distribute it to ledger peers.</p><p>We also continued to work on a blog post which describes the journey of design
&amp; implementation of the dynamic P2P network layer.  Too be announced soon :).  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-smaller-changes">Other smaller changes<a class="hash-link" href="#other-smaller-changes" title="Direct link to heading">​</a></h3><p>We limit the concurrency of resolving dns names.  Up to 8 root peers or ledger
peers DNS names are resolved concurrently, and at most 2 local root peer DNS
names. See <a href="https://github.com/input-output-hk/ouroboros-network/pull/4596" target="_blank" rel="noopener noreferrer">#4596</a>.</p><p>We fixed handshake query timeout in <a href="https://github.com/input-output-hk/ouroboros-network/pull/4603" target="_blank" rel="noopener noreferrer">#4603</a>.</p><p>We renamed one of the block-fetch decision constructors as requested by the
consensus team, see <a href="https://github.com/input-output-hk/ouroboros-network/pull/4608" target="_blank" rel="noopener noreferrer">#4608</a>.</p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[SRE Team Update]]></title>
        <id>2023-06-23-sre</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-23-sre"/>
        <updated>2023-06-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The SRE team continues work on CI and cardano environment improvements.  Some notable recent improvements include:</p><ul><li>A devx-ci cluster containing a Hydra build server and Linux build farm was stood up and is intended to replace Cicero functionality</li><li>Cardano Sanchonet environment was stood up to test Conway era functionality</li><li>Cardano-node nixos service was updated to support the latest p2p topology format and non-systemd socket activation use case</li><li>Cardano-node 8.1.1 was deployed to preview, preprod and mainnet environments</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">Cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li>Update cardano-node nixos service for updated p2p topology and non-systemd socket activation: <a href="https://github.com/input-output-hk/cardano-node/pull/5318" target="_blank" rel="noopener noreferrer">cardano-node-pull-5318</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-ops">Cardano-ops<a class="hash-link" href="#cardano-ops" title="Direct link to heading">​</a></h3><ul><li>Updates required for node 8.1.1 nixos service: <a href="https://github.com/input-output-hk/cardano-ops/pull/414" target="_blank" rel="noopener noreferrer">cardano-ops-pull-414</a></li><li>Work in progress continues on mixed legacy and p2p topology clusters in cardano-ops: <a href="https://github.com/input-output-hk/cardano-ops/tree/ops-local" target="_blank" rel="noopener noreferrer">cardano-ops-ops-local</a>, <a href="https://github.com/input-output-hk/cardano-ops/tree/mn-mixed-p2p" target="_blank" rel="noopener noreferrer">cardano-ops-mn-mixed-p2p</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-world">Cardano-world<a class="hash-link" href="#cardano-world" title="Direct link to heading">​</a></h3><ul><li>Add Sanchonet environment: <a href="https://github.com/input-output-hk/cardano-world/pull/96" target="_blank" rel="noopener noreferrer">cardano-world-pull-96</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-ops">Ci-ops<a class="hash-link" href="#ci-ops" title="Direct link to heading">​</a></h3><ul><li>Add devx-ci cluster integration for legacy darwin <a href="https://github.com/input-output-hk/ci-ops/compare/b158b17...ed875b9" target="_blank" rel="noopener noreferrer">ci-ops-compare</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-world">Ci-world<a class="hash-link" href="#ci-world" title="Direct link to heading">​</a></h3><ul><li>Add devx-ci cluster integration for caching, monitoring during cicero to devx-ci transition: <a href="https://github.com/input-output-hk/ci-world/compare/840cdb6...b08c250" target="_blank" rel="noopener noreferrer">ci-world-compare</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="devx-ci">Devx-ci<a class="hash-link" href="#devx-ci" title="Direct link to heading">​</a></h3><ul><li>A CI cluster with a hydra build server was stood up and is intended to replace usage of Cicero: <a href="https://github.com/input-output-hk/devx-ci" target="_blank" rel="noopener noreferrer">devx-ci-repo</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="iohk-nix">Iohk-nix<a class="hash-link" href="#iohk-nix" title="Direct link to heading">​</a></h3><ul><li>Add Sanchonet environment: <a href="https://github.com/input-output-hk/iohk-nix/pull/545" target="_blank" rel="noopener noreferrer">iohk-nix-pull-545</a></li></ul>]]></content>
        <author>
            <name>John Lotoski</name>
            <uri>https://github.com/johnalotoski</uri>
        </author>
        <category label="sre" term="sre"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-06-16-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-16-hydra"/>
        <updated>2023-06-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team focused their efforts on continuing to investigate and
experiment operating a head on mainnet. They collected several bugs and issues
and worked on fixing them. Now the team is soon to release a new version,
0.11.0, which comes with a lot of improvements and bug fixes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Restored and fixed a bug which stalled our head on mainnet <a href="https://github.com/input-output-hk/hydra/issues/927" target="_blank" rel="noopener noreferrer">#927</a></li><li>Solved one user issue <a href="https://github.com/input-output-hk/hydra/issues/914" target="_blank" rel="noopener noreferrer">#914</a></li><li>Reduced significantly local state size and logs by removing the full scripts from it <a href="https://github.com/input-output-hk/hydra/pull/928" target="_blank" rel="noopener noreferrer">#928</a></li><li>(pending review) Reduced snapshot size in the API, by only including tx ids <a href="https://github.com/input-output-hk/hydra/pull/922" target="_blank" rel="noopener noreferrer">#922</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>New release 0.11.0</li><li>Monthly report &amp; review meeting.</li><li>Fix some minor bugs discovered when operating our head on mainnet</li><li>Complete journey for external commits using multiple script UTxOs <a href="https://github.com/input-output-hk/hydra/pull/903" target="_blank" rel="noopener noreferrer">#903</a></li><li>Publish benchmarks and provide regular benchmarks for Hydra <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">#186</a></li></ul>]]></content>
        <author>
            <name>Franco Testagrossa</name>
            <uri>https://github.com/ffakenz</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-06-15-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-15-mithril"/>
        <updated>2023-06-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team completed the implementation of the new sub-command for restoring a Mithril stake distribution in the client. They also updated the client’s developer documentation and architecture documentation, and did some refactoring on the client and its dependency injection mechanism. Additionally, they completed and deployed infrastructure enhancements on the test Mithril networks. They also completed the performance tests of the new stake distribution computation on the Cardano mainnet.</p><p>Finally, the team worked on fixing a bug on the client multi-platform test, a bug on the aggregator state machine, and some flakiness on the CI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Completed on the epic that designs and implements generic signing/verification of entity services <a href="https://github.com/input-output-hk/mithril/issues/780" target="_blank" rel="noopener noreferrer">#780</a>:<ul><li>Completed the issue <code>Create the sub-command for 'Mithril Stake Distribution' in client</code> <a href="https://github.com/input-output-hk/mithril/issues/896" target="_blank" rel="noopener noreferrer">#896</a></li><li>Completed the issue <code>Adapt end to end tests to handle new types of data</code> <a href="https://github.com/input-output-hk/mithril/issues/899" target="_blank" rel="noopener noreferrer">#899</a></li><li>Completed the issue <code>Update client documentation</code> <a href="https://github.com/input-output-hk/mithril/issues/897" target="_blank" rel="noopener noreferrer">#897</a></li><li>Completed the issue <code>Update architecture documentations for new types of data</code> <a href="https://github.com/input-output-hk/mithril/issues/898" target="_blank" rel="noopener noreferrer">#898</a></li><li>Completed the issue <code>Refactoring client</code> <a href="https://github.com/input-output-hk/mithril/issues/960" target="_blank" rel="noopener noreferrer">#960</a></li></ul></li><li>Worked on the epic that prepares the Mithril infrastructure for <code>mainnet</code> <a href="https://github.com/input-output-hk/mithril/issues/767" target="_blank" rel="noopener noreferrer">#767</a>:<ul><li>Completed the issue <code>Enhance terraform infrastructure</code> <a href="https://github.com/input-output-hk/mithril/issues/930" target="_blank" rel="noopener noreferrer">#930</a></li></ul></li><li>Completed the epic that implements the computation of the stake distribution for <code>mainnet</code> <a href="https://github.com/input-output-hk/mithril/issues/880" target="_blank" rel="noopener noreferrer">#880</a>:<ul><li>Completed the issue <code>Check performance impact of new stake distribution command on the 'mainnet'</code> <a href="https://github.com/input-output-hk/mithril/issues/962" target="_blank" rel="noopener noreferrer">#962</a></li></ul></li><li>Worked on the epic <code>Prepare Mithril Signer deployment model for SPO</code> <a href="https://github.com/input-output-hk/mithril/issues/862" target="_blank" rel="noopener noreferrer">#862</a>:<ul><li>Worked on the issue <code>Design recommended deployment model for SPOs on 'mainnet' and  'preview'/'preprod'</code> <a href="https://github.com/input-output-hk/mithril/issues/961" target="_blank" rel="noopener noreferrer">#961</a></li></ul></li><li>Worked on bugs and optimizations:<ul><li>Completed the issue <code>Aggregator does not always detect new immutable file</code> <a href="https://github.com/input-output-hk/mithril/issues/953" target="_blank" rel="noopener noreferrer">#953</a></li><li>Completed the issue <code>CI tests fail with Rust '1.70.0'</code> <a href="https://github.com/input-output-hk/mithril/issues/958" target="_blank" rel="noopener noreferrer">#958</a></li><li>Worked on the issue <code>End to end tests are flaky</code> <a href="https://github.com/input-output-hk/mithril/issues/954" target="_blank" rel="noopener noreferrer">#954</a></li><li>Worked on the issue <code>Certificate dates in metadata are not on the same timezone</code> <a href="https://github.com/input-output-hk/mithril/issues/946" target="_blank" rel="noopener noreferrer">#946</a></li><li>Worked on the issue <code>Refactor 'MithrilStakeDistribution' entity</code> <a href="https://github.com/input-output-hk/mithril/issues/967" target="_blank" rel="noopener noreferrer">#967</a></li><li>Completed the issue <code>Fix 'Mithril Client multi-platform test' with new client interface</code> <a href="https://github.com/input-output-hk/mithril/issues/956" target="_blank" rel="noopener noreferrer">#956</a></li><li>Completed the issue <code>Enhance 'ImmutableDigesterError::NotEnoughImmutable' error</code> <a href="https://github.com/input-output-hk/mithril/issues/969" target="_blank" rel="noopener noreferrer">#969</a></li><li>Completed the issue <code>Client 'snapshot download' command fails with option '--download-dir'</code> <a href="https://github.com/input-output-hk/mithril/issues/979" target="_blank" rel="noopener noreferrer">#979</a></li></ul></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-06-14-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-14-consensus"/>
        <updated>2023-06-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The Consensus team had a very productive meeting with IOG Researchers. We now seem to be in alignment in regards to a strong argument that the <code>Byron</code> and <code>TPraos</code> eras do not need to be checkpointed for an MVP.
There is one remaining question (which applies also to the <code>Praos</code> era): how to assess the threat that short forks pose against historical windows that underperformed? We are currently collaborating on that. We also drafted an argument that the updated "Limit on Patience" timeout sufficiently bounds how long the adversary can inflate a victim's overall sync time.</p><p>On the UTxO-HD front, the prototype branch was rebased on top of the latest <code>ouroboros-consensus</code> <code>main</code> branch and integrated on top of <code>cardano-node 8.1.1-pre</code>. As a result, the mempool fairness fix that was released recently is now integrated into UTxO-HD.
We managed to run a node again with UTxO-HD enabled.
We also identified a race condition in the UTxO-HD prototype and fixed it. In addition, we started performing UTxO-HD ad-hoc benchmarks for <code>cardano-node</code>, which uncovered a performance regression on the Network component when using <code>GHC-9.2/9.4</code>. This is being addressed.</p><p>Regarding our support activities, we Released <code>fs-sim-0.2.0.0</code> and are in the process of preparing the 8.2 release of <code>cardano-node</code>. We also identified and started fixing incorrectly-unevaluated thunks in preparation for enabling CI NoThunks tests.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-06-14-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-14-performance-and-tracing"/>
        <updated>2023-06-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Benchmarking: We've continued release benchmarking and established a new baseline for <code>8.0.0</code>.</li><li>New tracing: Our benchmarking profile for measuring new vs. legacy tracing performance has been refined.</li><li>Nomad backend: The healthcheck system for the the nomad cloud has been completed. We've performed the first full runs on the new backend.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">​</a></h3><p>In our release benchmarking cycle, we established a new performance baseline for <code>8.0.0</code>. Additionally, we've measured
performance under various workloads for <code>8.1.1-pre</code>; the results look promising and validate the optimization efforts
done on several system components.  </p><p>In the meantime, we've finalized a build plan with GHC9.2 that matches the current one with GHC8.10; a requirement for
benchmarking as a large amount of differences in the dependency graph can confound the results for the application code proper.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h3><p>The legacy and the new tracing system differ fundamentally in design, implementation and handling. So for metrics to be
meaningful in a comparison, benchmarking profiles have to be tuned such that not only log line frequency but frequency of specific
trace messages are closely aligned. We've found that higher granularity in this regard was necessary, and done additional work on our dedicated profiles.  </p><p>Additionally, we've had a first glance of what additional traces could be valuable in the context of benchmarking UTxO-HD.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>As the new backend's healthcheck system in its first iteration can now serve as a guardrail to ensure sanity of a full-length run, we've performed our first 52-node cluster runs on nomad cloud. We're currently smoothing the edges around cluster deployment, and analysing the metrics gathered from those runs.  </p><p>This means the backend is entering validation phase, where we systematically compare all metrics taken from the new
infrastructure to the existing ones, including determining reproducibility and variance.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-06-12-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-12-network"/>
        <updated>2023-06-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Network Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-update">Network Update<a class="hash-link" href="#network-update" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-contributions-and-advances">Key contributions and advances<a class="hash-link" href="#key-contributions-and-advances" title="Direct link to heading">​</a></h3><p>We merged <code>light peer sharing</code> feature, which allows to include inbound peers
into outbound governor known peers.  This is the primary way for new
unregistered nodes to enter the network, which then can be shared using peer
sharing.  Note that peer sharing is an experimental feature which is disabled
until genesis &amp; eclipse evasion as fully implemented. See <a href="https://github.com/input-output-hk/ouroboros-network/issues/3596" target="_blank" rel="noopener noreferrer">#3596</a>.</p><p>We are making progress reviewing eclipse evasion, <a href="https://github.com/input-output-hk/ouroboros-network/issues/3886" target="_blank" rel="noopener noreferrer">#3886</a>.</p><p>We fixed another bug in local root peers.  We found out that if the local roots
where ignored until the first domain name was resolved, see <a href="https://github.com/input-output-hk/ouroboros-network/issues/4583" target="_blank" rel="noopener noreferrer">#4583</a>.  The bug
fix was backported and released in <code>ouroboros-network-0.8.1.1</code>.</p><p>We re-started working on dynamically enabling block forging to address issue
<a href="https://github.com/input-output-hk/ouroboros-network/issues/3159" target="_blank" rel="noopener noreferrer">#3159</a>, which will enable us to release <code>P2P</code> on block producing nodes. See <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/140" target="_blank" rel="noopener noreferrer">#140</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-cardano-ping--cardano-cli-ping-release">New <code>cardano-ping</code> / <code>cardano-cli ping</code> release<a class="hash-link" href="#new-cardano-ping--cardano-cli-ping-release" title="Direct link to heading">​</a></h4><p>We prepared a new release of <code>cardano-ping</code> library which supports the new
query feature (query supported versions). See <a href="https://github.com/input-output-hk/ouroboros-network/pull/4589" target="_blank" rel="noopener noreferrer">#4589</a>, <a href="https://github.com/input-output-hk/ouroboros-network/pull/4593" target="_blank" rel="noopener noreferrer">#4593</a> and <a href="https://github.com/input-output-hk/cardano-node/pull/5313" target="_blank" rel="noopener noreferrer">#5313</a>.
The new version of <code>cardano-cli ping</code> will use <code>ISO8601</code> formatted
timestamps; also the formatting of ping results is slightly improved, and it
will introduce the new <code>--query-versions</code> (<code>-Q</code>) switch.  If the remote site
supports the query parameter, the command will print:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">redacted-ip:port network rtt: 0.064</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redacted-ip:port handshake rtt: 0.064010896s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redacted-ip:port Queried versions [NodeToNodeVersionV11 764824073 InitiatorAndResponder,NodeToNodeVersionV10 764824073 InitiatorAndResponder,NodeToNodeVersionV9 764824073 Initiat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">orAndResponder,NodeToNodeVersionV8 764824073 InitiatorAndResponder,NodeToNodeVersionV7 764824073 InitiatorAndResponder]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>otherwise it will print the negotiation results</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">redacted-ip:port network rtt: 0.045</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redacted-ip:port handshake rtt: 0.101867615s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redacted-ip:port Negotiated version NodeToNodeVersionV10 764824073 InitiatorAndResponder</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that in that case <code>cardano-cli ping</code> offers <code>InitiatorAndResponder</code>, which
allows us to detect whether the remote side is an <code>InitiatorOnly</code> or
<code>InitiatorAndResponder</code>.   Also <code>cardano-cli ping</code> will no longer announce
itself as <code>InitiatorAndResponder</code>, except for the case mentioned above.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="other-smaller-contributions">Other smaller contributions<a class="hash-link" href="#other-smaller-contributions" title="Direct link to heading">​</a></h3><p>On a request from the Marlow Team, we published haddocks of <code>typed-protocols</code>,
which are now available <a href="https://input-output-hk.github.io/typed-protocols/" target="_blank" rel="noopener noreferrer">here</a> (<a href="https://github.com/input-output-hk/typed-protocols/pull/40" target="_blank" rel="noopener noreferrer">#40</a>, <a href="https://github.com/input-output-hk/typed-protocols/pull/41" target="_blank" rel="noopener noreferrer">#41</a>).</p><p>We made a new release of <code>stric-stm-1.1.0.1</code> on Hackage, which fixed a bug in
package description file, <a href="https://github.com/input-output-hk/io-sim/pull/101" target="_blank" rel="noopener noreferrer">#101</a> .</p><p>We also helped to debug a deadlock when using named pipes on Windows in the new
<code>RawBearer</code> API.  The API is being used to store secret keys only in memory.
The PR <a href="https://github.com/input-output-hk/ouroboros-network/pull/4395" target="_blank" rel="noopener noreferrer">#4395</a> is under review.</p><p>We also have two more PRs which are under review:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4530" target="_blank" rel="noopener noreferrer">#4530</a>: enabling ledger peers on a fixed number of slots before the tip of the chain;</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4580" target="_blank" rel="noopener noreferrer">#4580</a>: a PR which fixes inconsistencies in one of our cddl specs.</li></ul>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-06-09-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-09-crypto"/>
        <updated>2023-06-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>cardano-base: E2E tests for BLS bindings and KES agent </li><li>Sidechains: Implement ECC chip and Rescue hash primitives for ATMS</li><li>mithril: Full node verifier</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>RawBearer API in ouroboros-network-framework (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4395)" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/ouroboros-network/pull/4395)</a>; blocked due to issue with windows' localSnocket. Trying to resolve.</li><li>Adapting cardano-base for direct memory transfers between mlocked RAM and file descriptors <a href="https://github.com/input-output-hk/cardano-base/pull/317" target="_blank" rel="noopener noreferrer">#317</a>.</li><li>Above, blocked by the simplification of typeclasses <a href="https://github.com/input-output-hk/cardano-base/pull/404" target="_blank" rel="noopener noreferrer">#404</a>.</li><li>Provided e2e test cases to the testing team with aggregated signatures and schnorr signatures for the BLS bindings</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>Implementation of Full Node Verifier <a href="https://github.com/input-output-hk/mithril/pull/939" target="_blank" rel="noopener noreferrer">#939</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sidechains">Sidechains<a class="hash-link" href="#sidechains" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/sidechains-zk/tree/master/prover/src/ecc" target="_blank" rel="noopener noreferrer">ECC chip</a> implemented for JubJub over BLS12-381</li><li><a href="https://github.com/input-output-hk/sidechains-zk/tree/master/prover/src/rescue" target="_blank" rel="noopener noreferrer">Rescue chip</a> implemented for hashing.</li><li>Currently working on Schnorr signature (which uses the above constraints)</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Developer Experience Update]]></title>
        <id>2023-06-09-developer-experience</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-09-developer-experience"/>
        <updated>2023-06-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The Developer Experience team has been devoted to day-to-day troubleshooting and support of various elements including build failures, compiler upgrades, the maintaince of our cardano-haskell-packages (CHaP), and infrastructure like GitHub Actions, iohk-nix, haskell.nix, and devx. Furthermore, we have also contributed to upstream tooling improvements.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-support--maintainance">build support &amp; maintainance<a class="hash-link" href="#build-support--maintainance" title="Direct link to heading">​</a></h3><p>Our DevX team has been instrumental in troubleshooting and fixing a wide range of issues, from broken windows builds and obscure <code>LoadDLL</code> errors to <code>blst</code> integration across Nix and Github CI. We've also initiated automatic uploads for release assets. Our efforts in streamlining complex CI setups have paid off, with some repositories like <a href="https://github.com/input-output-hk/cardano-base" target="_blank" rel="noopener noreferrer">cardano-base</a> experiencing significant reductions in CI complexity.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compiler-upgrades">compiler upgrades<a class="hash-link" href="#compiler-upgrades" title="Direct link to heading">​</a></h3><p>After the support for 9.2 across our libraries, we have started working on 9.6 compabilitiy as well. This move brings us closer to the upstream compiler, facilitating the contribution of patches and enabling early detection of regressions. In addition, we're prioritizing compaining even stronger for better backwards compatibility.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="chap-cardano-haskell-packages">CHaP (cardano-haskell-packages)<a class="hash-link" href="#chap-cardano-haskell-packages" title="Direct link to heading">​</a></h3><p>We relocated the underlying tooling, (<a href="https://github.com/input-output-hk/foliage" target="_blank" rel="noopener noreferrer">foliage</a>), for <a href="https://github.com/input-output-hk/cardano-haskell-packages" target="_blank" rel="noopener noreferrer">CHaP</a> into the IOG organization. Furthermore, we have introduced <a href="https://github.com/input-output-hk/cardano-haskell-packages/pull/260" target="_blank" rel="noopener noreferrer">improved tooling to quickly add constraints to packages</a>, <a href="https://github.com/input-output-hk/cardano-haskell-packages/issues/285" target="_blank" rel="noopener noreferrer">better error reporting for add-revision</a> and <a href="https://github.com/input-output-hk/foliage/pull/63" target="_blank" rel="noopener noreferrer">better hackage url compatibility</a> to facilitate easer usage of CHaP.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="github-actions">GitHub Actions<a class="hash-link" href="#github-actions" title="Direct link to heading">​</a></h3><p>Our repository, <a href="https://github.com/input-output-hk/actions" target="_blank" rel="noopener noreferrer">input-output-hk/actions</a>, now houses the necessary actions for installing pre-requisites to build Cardano projects using GitHub Actions. Leveraging the <code>base</code> and <code>haskell</code> install actions has allowed us to simplify workflows in the repos, focusing primarily on invoking <code>cabal</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="iohk-nix">iohk-nix<a class="hash-link" href="#iohk-nix" title="Direct link to heading">​</a></h3><p>The <a href="https://github.com/input-output-hk/iohk-nix" target="_blank" rel="noopener noreferrer">iohk-nix</a> repository has undergone a major revamp and now provides pre-built packages of the cryptographic libraries IOG utilizes for GitHub Runners. The key components we use, <code>sodium</code>, <code>blst</code>, and <code>secp256k1</code>, are also fixed to certain revisions within the <code>iohk-nix</code> repository.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="haskellnix">haskell.nix<a class="hash-link" href="#haskellnix" title="Direct link to heading">​</a></h3><p><a href="https://github.com/input-output-hk/haskell.nix" target="_blank" rel="noopener noreferrer">Haskell.nix</a> has been maintained and updated with the addition of GHC 9.6.2 and GHC 8.2.8. After discovering performance regression in the native bignum backend, we switched the default bignum backend to <code>gmp</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="devx">devx<a class="hash-link" href="#devx" title="Direct link to heading">​</a></h3><p>The relatively new <a href="https://github.com/input-output-hk/devx" target="_blank" rel="noopener noreferrer">devx</a> repository is where we experiment with a single nix development shell that aims to suffice for most use-cases at IOG. This initiative is expected to eliminate a number of CI failures related to project-build and shell interaction problems. The <code>devx</code> repository's readme has been updated to reflect its purpose and usage guidelines.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="upstream-tooling">upstream tooling<a class="hash-link" href="#upstream-tooling" title="Direct link to heading">​</a></h3><p>Our team remains committed to enhancing upstream tooling, with ongoing contributions to GHC, Cabal, and Nix.</p>]]></content>
        <author>
            <name>Moritz Angermann</name>
            <uri>https://github.com/angerman</uri>
        </author>
        <category label="devx" term="devx"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-06-09-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-09-hydra"/>
        <updated>2023-06-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team worked on multiple fronts. They finished the
investigation about the broken head on mainnet and re-opened their persistent
head instance. The team also fixed the monthly report publication on their
website and started sketching ideas and further improvements. Also, they are on
the last mile to deliver a new feature which will allow parties to commit funds
from extern wallets. Finally the team started to work on optimizing the
performance on their benchmarks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Finished investigation on broken head on mainnet <a href="https://github.com/input-output-hk/hydra/issues/897" target="_blank" rel="noopener noreferrer">#897</a> and re-opened it.</li><li>Added support for externally committing regular utxo <a href="https://github.com/input-output-hk/hydra/pull/887" target="_blank" rel="noopener noreferrer">#887</a></li><li>Fix monthly report publication on docs website and published the <a href="https://hydra.family/head-protocol/monthly/2023-05" target="_blank" rel="noopener noreferrer">monthly report</a>. Odd problems when publishing monthly report:<ul><li>Make us think about if we should change something about the website <a href="https://github.com/input-output-hk/hydra/issues/908" target="_blank" rel="noopener noreferrer">#908</a></li><li>Open issue to docusaurus <a href="https://github.com/facebook/docusaurus/issues/9036" target="_blank" rel="noopener noreferrer">#9036</a></li></ul></li><li>Fixed a bug in the benchmark process <a href="https://github.com/input-output-hk/hydra/pull/910" target="_blank" rel="noopener noreferrer">#910</a></li><li>Explored performance of the <code>hydra-node</code>{.verbatim} and identified a
bottleneck.</li><li>Timed transaction feature is being used by the auction project 🎉 </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Complete performance analysis and start/plan improvements and provide
regular benchmarks for Hydra <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">#186</a></li><li>Add hydra as tool to developer platform <a href="https://github.com/input-output-hk/hydra/issues/872" target="_blank" rel="noopener noreferrer">#872</a>.</li><li>Authenticate network messages <a href="https://github.com/input-output-hk/hydra/issues/727" target="_blank" rel="noopener noreferrer">#727</a>.</li><li>Complete journey for external commits using multiple script UTxOs <a href="https://github.com/input-output-hk/hydra/pull/903" target="_blank" rel="noopener noreferrer">#903</a></li><li>Start implementing <em>Option B</em> for external commits <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a>.</li></ul>]]></content>
        <author>
            <name>Franco Testagrossa</name>
            <uri>https://github.com/ffakenz</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB-sync Team Update]]></title>
        <id>2023-06-08-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-08-db-sync"/>
        <updated>2023-06-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We've made progress in all high level objectives</p><ul><li>CIP-1694 integration design</li><li>UTxO-HD integration proof of concept</li><li>schema migrations with a focus on speeding up frequent queries is part of release 13.1.1.2</li><li>A new hire will help us with devx issues.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><ul><li>We have an initial design for the Conway integration in db-sync</li><li>The initial UTxO-HD integration resulted in a requested feuture that
the consensus team is working on
<a href="https://github.com/input-output-hk/ouroboros-consensus/issues/88" target="_blank" rel="noopener noreferrer">#88</a>.</li><li>Added two optional migrations that speed up querying UTxO
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1416" target="_blank" rel="noopener noreferrer">#1416</a></li><li>Work on improving the above feauture by adding tests and fixing tech debt
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1429" target="_blank" rel="noopener noreferrer">#1429</a><a href="https://github.com/input-output-hk/cardano-db-sync/pull/1419" target="_blank" rel="noopener noreferrer">#1419</a></li><li>Fixed issue with ada_pots being wrong
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1407/commits/1ad4521a5601e8e98dc06bba2826d6b2f9b4fcf4" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-db-sync/pull/1407/commits/1ad4521a5601e8e98dc06bba2826d6b2f9b4fcf4</a></li><li>Added a process which fixes in place scripts with wrong CBOR serialisation.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1407/commits/8792f72e2485b320de26c02dacc4d504d377ba17" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-db-sync/pull/1407/commits/8792f72e2485b320de26c02dacc4d504d377ba17</a></li><li>Prepared a tag <a href="https://github.com/input-output-hk/cardano-db-sync/releases" target="_blank" rel="noopener noreferrer"><code>13.1.1.2</code></a>
which is tested and ready to release. It contains many of the above.</li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-06-08-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-08-goedel"/>
        <updated>2023-06-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has been working on giving and preparing public
talks, also on preparing final versions of their ICE 2023 papers, and
on analysing chain selection.</p><p>This sprint the team has been working on final revisions for the
pre-proceedings versions of two ICE 2023 papers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Lambda Days keynote by Kevin Hammond:
<a href="https://www.lambdadays.org/lambdadays2023" target="_blank" rel="noopener noreferrer">https://www.lambdadays.org/lambdadays2023</a></p></li><li><p>Codebeam keynote by Peter Van Roy: <a href="https://www.youtube.com/watch?v=h8sE3Ai8Dsk" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=h8sE3Ai8Dsk</a>; <a href="https://www.youtube.com/watch?v=h8sE3Ai8Dsk" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=h8sE3Ai8Dsk</a></p></li><li><p>Preparing talks and final versions for two ICE 2023 contributions:
<a href="https://www.discotec.org/2023/ice" target="_blank" rel="noopener noreferrer">https://www.discotec.org/2023/ice</a></p></li><li><p>Analysing chain selection.</p></li><li><p>The team is hiring a performance engineering intern - <a href="https://apply.workable.com/io-global/j/BFEC5B0AFF/" target="_blank" rel="noopener noreferrer">https://apply.workable.com/io-global/j/BFEC5B0AFF/</a></p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[SRE Team Update]]></title>
        <id>2023-06-08-sre</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-08-sre"/>
        <updated>2023-06-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The SRE team continues work on CI and cardano environment improvements.  Some notable recent improvements include: expanding the darwin CI cluster and providing new aarch64 builder support; adding bare metal bitte cluster capability with network overlay for high IOPS workload performance, such as explorer.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bitte">Bitte<a class="hash-link" href="#bitte" title="Direct link to heading">​</a></h3><ul><li>Equinix bare metal capability was added to bitte: <a href="https://github.com/input-output-hk/bitte/pull/194" target="_blank" rel="noopener noreferrer">bitte-pull-194</a></li><li>Update bitte nixpkgs, nix version, nomad driver, equinix lifecycle, misc bug fixes: <a href="https://github.com/input-output-hk/bitte/pull/201" target="_blank" rel="noopener noreferrer">bitte-pull-201</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bitte-cells">Bitte-cells<a class="hash-link" href="#bitte-cells" title="Direct link to heading">​</a></h3><ul><li>Improvements made for patroni cluster recovery of large databases: <a href="https://github.com/input-output-hk/bitte-cells/compare/main...patroni-flex" target="_blank" rel="noopener noreferrer">bitte-cells-branch</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-graphql">Cardano-graphql<a class="hash-link" href="#cardano-graphql" title="Direct link to heading">​</a></h3><ul><li>Update cardano-graphql and nixos service: <a href="https://github.com/input-output-hk/cardano-graphql/pull/815" target="_blank" rel="noopener noreferrer">cardano-graphql-pull-815</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">Cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li>Update cardano-node to use the updated iohk-nix environments: <a href="https://github.com/input-output-hk/cardano-node/pull/5241" target="_blank" rel="noopener noreferrer">cardano-node-pull-5241</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-ops">Cardano-ops<a class="hash-link" href="#cardano-ops" title="Direct link to heading">​</a></h3><ul><li>Update cardano-graphql, adds monitoring improvements and misc bug fixes: <a href="https://github.com/input-output-hk/cardano-ops/pull/411" target="_blank" rel="noopener noreferrer">cardano-ops-pull-411</a></li><li>Work in progress on mixed legacy and p2p topology clusters in cardano-ops: <a href="https://github.com/input-output-hk/cardano-ops/compare/master...ops-local" target="_blank" rel="noopener noreferrer">cardano-ops-branch</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-world">Cardano-world<a class="hash-link" href="#cardano-world" title="Direct link to heading">​</a></h3><ul><li>Add a declarative cardano-faucet dashboard: <a href="https://github.com/input-output-hk/cardano-world/commit/e7d40d34aff52bbeb309f87939bd0d40f585e60a" target="_blank" rel="noopener noreferrer">cardano-world-commit</a></li><li>Remove a requirement for root user in Nomad docker images: <a href="https://github.com/input-output-hk/cardano-world/pull/68" target="_blank" rel="noopener noreferrer">cardano-world-pull-68</a></li><li>Enable explorer in cardano-world for high IOPS metal access: <a href="https://github.com/input-output-hk/cardano-world/pull/69" target="_blank" rel="noopener noreferrer">cardano-world-pull-69</a></li><li>Migrate explorer cluster to cardano-world: <a href="https://github.com/input-output-hk/cardano-world/pull/75" target="_blank" rel="noopener noreferrer">cardano-world-pull-75</a></li><li>Migrate testnet metadata server to cardano-world, cleanup envs: <a href="https://github.com/input-output-hk/cardano-world/pull/77" target="_blank" rel="noopener noreferrer">cardano-world-pull-77</a></li><li>Add a faucet restore delegation script to cardano-world for non-functioning delegated pools: <a href="https://github.com/input-output-hk/cardano-world/pull/79" target="_blank" rel="noopener noreferrer">cardano-world-pull-79</a></li><li>Integrate node 8.x into cardano-world: <a href="https://github.com/input-output-hk/cardano-world/pull/84" target="_blank" rel="noopener noreferrer">cardano-world-pull-84</a></li><li>Update cardano-world to use iohk-nix for node environments: <a href="https://github.com/input-output-hk/cardano-world/pull/87" target="_blank" rel="noopener noreferrer">cardano-world-pull-87</a></li><li>Create a stakepool analysis query for cluster pool performance overview: <a href="https://github.com/input-output-hk/cardano-world/commit/64fe3b9d4067c24eef028ac1c561d6f9a7d5a9a8" target="_blank" rel="noopener noreferrer">cardano-world-commit</a></li><li>Added an iptables fixup script for broken bridged networking nomad jobs: <a href="https://github.com/input-output-hk/cardano-world/commit/02550206e4e34d121135794b6e54084635e55a50" target="_blank" rel="noopener noreferrer">cardano-world-commit</a></li><li>Improve cardano-world job automation with additional parameterization: <a href="https://github.com/input-output-hk/cardano-world/pull/92" target="_blank" rel="noopener noreferrer">cardano-world-pr-92</a></li><li>Update preview network experimental config defaults: <a href="https://github.com/input-output-hk/cardano-world/pull/93" target="_blank" rel="noopener noreferrer">cardano-world-pr-93</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-ops">Ci-ops<a class="hash-link" href="#ci-ops" title="Direct link to heading">​</a></h3><ul><li>Update legacy darwin builders and buildkite agent for ci-world network overlay and monitoring: <a href="https://github.com/input-output-hk/ci-ops/pull/108" target="_blank" rel="noopener noreferrer">ci-ops-pull-108</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-world">Ci-world<a class="hash-link" href="#ci-world" title="Direct link to heading">​</a></h3><ul><li>Resolve ci-world linux buildkite agent cleanup bug: <a href="https://github.com/input-output-hk/ci-world/commit/3d053b202a6e40fab23db49801de7d6e580fab1f" target="_blank" rel="noopener noreferrer">ci-world-commit</a></li><li>Integrate new darwin builders into ci-world: <a href="https://github.com/input-output-hk/ci-world/pull/22" target="_blank" rel="noopener noreferrer">ci-world-pull-22</a></li><li>Migrate patroni HA db to it's own namespace in ci-world: <a href="https://github.com/input-output-hk/ci-world/pull/24" target="_blank" rel="noopener noreferrer">ci-world-pull-24</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cicero">Cicero<a class="hash-link" href="#cicero" title="Direct link to heading">​</a></h3><ul><li>Implement a cicero webhook backoff with exponential decay plus jitter: <a href="https://github.com/input-output-hk/cicero/pull/79" target="_blank" rel="noopener noreferrer">cicero-pull-79</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="iohk-nix">Iohk-nix<a class="hash-link" href="#iohk-nix" title="Direct link to heading">​</a></h3><ul><li>Update iohk-nix to be source of truth for node environments: <a href="https://github.com/input-output-hk/iohk-nix/pull/534" target="_blank" rel="noopener noreferrer">iohk-nix-pull-534</a></li><li>Update preview network experimental config defaults: <a href="https://github.com/input-output-hk/iohk-nix/pull/544" target="_blank" rel="noopener noreferrer">iohk-nix-pull-544</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openziti">Openziti<a class="hash-link" href="#openziti" title="Direct link to heading">​</a></h3><ul><li>Add darwin intel and arm support to ziti-edge-tunnel nix modules: <a href="https://github.com/johnalotoski/openziti-bins/pull/1" target="_blank" rel="noopener noreferrer">openziti-bins-pull-1</a></li></ul>]]></content>
        <author>
            <name>John Lotoski</name>
            <uri>https://github.com/johnalotoski</uri>
        </author>
        <category label="sre" term="sre"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[System Test Team Update]]></title>
        <id>2023-06-08-system-test</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-08-system-test"/>
        <updated>2023-06-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>Since the last update (2023-03-26) we did more improvements on our Test Framework, added more automated tests, kept analyzing and fixing nightly jobs failures, tested the <em>1.35.7</em> and <em>8.0.0</em> releases.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><p><a href="https://github.com/input-output-hk/cardano-node-tests/pulls?page=1&amp;q=is%3Apr+is%3Aclosed+updated%3A2023-03-26..2023-06-08" target="_blank" rel="noopener noreferrer">Full list of closed PRs</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="framework-improvements">Framework improvements:<a class="hash-link" href="#framework-improvements" title="Direct link to heading">​</a></h3><ul><li>Make cardano-submit-api REST API service available and run corresponding regression tests by default</li><li>Update cabal build testing for 8.0.0</li><li>Add support for testing governance SPO poll</li><li>Use Poetry for Python dependency management</li><li>Check status of known GH issues during tests runtime and finish the test accordingly</li><li>Generate topology files with both IP addresses and DNS names</li><li>Log issues like failure to start a cluster instance and report errors during tests runtime</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-improvements">Testing improvements<a class="hash-link" href="#testing-improvements" title="Direct link to heading">​</a></h3><ul><li>Add rollback testing:<ol><li>global consensus is reached after rollback, in situation where less than <code>securityParam</code> blocks were produced since cluster split</li><li>global consensus is not reached when more than <code>securityParam</code> blocks were produced, and the result is permanent fork</li></ol></li><li>Add tests to governance SPO poll commands</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node">Node:<a class="hash-link" href="#node" title="Direct link to heading">​</a></h3><ul><li>tested the <a href="https://input-output-hk.github.io/cardano-node-tests/test_results/node/tag_1_35_7.html" target="_blank" rel="noopener noreferrer">1.35.7</a> release</li><li>tested the <a href="https://input-output-hk.github.io/cardano-node-tests/test_results/node/tag_8_0_0.html" target="_blank" rel="noopener noreferrer">8.0.0</a> release</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="db-sync">DB-Sync:<a class="hash-link" href="#db-sync" title="Direct link to heading">​</a></h3><ul><li>improvements in db-sync sync tests</li><li>improvements in db-sync functional tests</li></ul>]]></content>
        <author>
            <name>Martin Kourim</name>
            <uri>https://github.com/mkoura</uri>
        </author>
        <category label="system-test" term="system-test"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-06-02-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-02-hydra"/>
        <updated>2023-06-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team has put their effort on finding solutions on many
different problems, such as our broken head on mainnet
<a href="https://github.com/input-output-hk/hydra/issues/897" target="_blank" rel="noopener noreferrer">#897</a>, our fragile monthly
report publications on the website and implementing <!-- -->“<!-- -->Option A<!-- -->”<!-- --> for
external commits <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a>.
Although most of these items are still open, huge progress has been made. To
accelerate the investigation, they improved their logging to give more precise
errors when a transition requirement fails, and to reduce duplication on effets
logged content. Last but not least, the team is exploring formal methods and
attended a workshop on formalizing cryptographic protocols in Agda.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li><p>Continued investigating broken head and opened an issue to keep track <a href="https://github.com/input-output-hk/hydra/issues/897" target="_blank" rel="noopener noreferrer">#897</a>.</p><p>As part of this issue, improvements were made to the node logs:</p><ul><li><p>Give a precise error when a transition requirement fails <a href="https://github.com/input-output-hk/hydra/pull/895" target="_blank" rel="noopener noreferrer">#895</a>.</p></li><li><p>Reduce duplication for effects logged content by using sequential eventId and effectId pair  <a href="https://github.com/input-output-hk/hydra/pull/896" target="_blank" rel="noopener noreferrer">#896</a>.</p></li></ul></li><li><p>Fixed references in the hydra specification <a href="https://github.com/input-output-hk/hydra/pull/893" target="_blank" rel="noopener noreferrer">#893</a>.</p></li><li><p>Attended a workshop on formal methods and crypto in Agda.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Investigate and re-open our team-internal head on mainnet.</li><li>Improve and provide regular benchmarks for Hydra <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">#186</a>.</li><li>Complete journey for external commits implementing <!-- -->“<!-- -->Option A<!-- -->”<!-- --> and start implementing <!-- -->“<!-- -->Option B<!-- -->”<!-- --> <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a>.</li><li>Authenticate network messages <a href="https://github.com/input-output-hk/hydra/issues/727" target="_blank" rel="noopener noreferrer">#727</a>.</li><li>Add hydra as tool to developr platform <a href="https://github.com/input-output-hk/hydra/issues/872" target="_blank" rel="noopener noreferrer">#872</a>.</li><li>Fix monthly report publication on docs website.</li></ul>]]></content>
        <author>
            <name>Franco Testagrossa</name>
            <uri>https://github.com/ffakenz</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-06-01-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-06-01-mithril"/>
        <updated>2023-06-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2321.1" target="_blank" rel="noopener noreferrer"><code>2321.1</code></a> distribution that fully implements the mechanism developed to sign generic data. They completed the upgrade of the Cardano node in the Mithril networks to v.8.0.0 and the implementation of the new computation of the stake distribution. They refactored the state machines of the signer and aggregator, and the signed entity service of the aggregator. Additionally, they worked on adapting the client and implementing a new sub-command for restoring the Cardano immutable file snapshots.</p><p>Finally, the team worked on adding a new certificate list route in the aggregator REST API, and started enhancing the infrastructure of the Mithril networks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Released the new distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2321.1" target="_blank" rel="noopener noreferrer"><code>2321.1</code></a></li><li>Worked on the epic that designs and implements generic signing/verification of entity services <a href="https://github.com/input-output-hk/mithril/issues/780" target="_blank" rel="noopener noreferrer">#780</a>:<ul><li>Completed the issue <code>Enhance MessageAdapter for Artifact in aggregator REST API</code> <a href="https://github.com/input-output-hk/mithril/issues/925" target="_blank" rel="noopener noreferrer">#925</a></li><li>Completed the issue <code>Create the sub-command for 'Cardano Immutable Files Full' in client</code> <a href="https://github.com/input-output-hk/mithril/issues/895" target="_blank" rel="noopener noreferrer">#895</a></li><li>Completed the issue <code>Enhance state machines Aggregator/Signer</code> <a href="https://github.com/input-output-hk/mithril/issues/933" target="_blank" rel="noopener noreferrer">#933</a></li><li>Completed the issue <code>Adapt the aggregator REST API to list certificates</code> <a href="https://github.com/input-output-hk/mithril/issues/892" target="_blank" rel="noopener noreferrer">#892</a></li><li>Worked on the issue <code>Adapt end to end tests to handle new types of data</code> <a href="https://github.com/input-output-hk/mithril/issues/899" target="_blank" rel="noopener noreferrer">#899</a></li><li>Worked on the issue <code>Update client documentation</code> <a href="https://github.com/input-output-hk/mithril/issues/897" target="_blank" rel="noopener noreferrer">#897</a></li><li>Worked on the issue <code>Update architecture documentations for new types of data</code> <a href="https://github.com/input-output-hk/mithril/issues/898" target="_blank" rel="noopener noreferrer">#898</a></li></ul></li><li>Worked on the epic that prepares the Mithril infrastructure for <code>mainnet</code> <a href="https://github.com/input-output-hk/mithril/issues/767" target="_blank" rel="noopener noreferrer">#767</a>:<ul><li>Worked on the issue <code>Enhance terraform infrastructure</code> <a href="https://github.com/input-output-hk/mithril/issues/930" target="_blank" rel="noopener noreferrer">#930</a></li></ul></li><li>Worked on the epic that implements the computation of the stake distribution for <code>mainnet</code> <a href="https://github.com/input-output-hk/mithril/issues/880" target="_blank" rel="noopener noreferrer">#880</a>:<ul><li>Completed the issue <code>Upgrade Cardano node to '8.0.0'</code> <a href="https://github.com/input-output-hk/mithril/issues/920" target="_blank" rel="noopener noreferrer">#920</a></li></ul></li><li>Completed the issue <code>Add export path in Client CLI</code> <a href="https://github.com/input-output-hk/mithril/issues/512" target="_blank" rel="noopener noreferrer">#512</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-05-31-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-31-consensus"/>
        <updated>2023-05-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the Past two weeks we drafted an implementation path for concluding that a node is caught up, which will also be used to back Network's ledger-peer selection (see <a href="https://github.com/input-output-hk/ouroboros-consensus/issues/101" target="_blank" rel="noopener noreferrer">this issue</a>). We also carried a thorough investigation into the exact feasibility of applying the Genesis rule to certain historical parts of the chain.</p><p>On the UTxO-HD front, we are working on improving the ledger tables design and wrapping up the improved DB locking mechanism. We also released packages that are required not only by UTxO-HD but are already used in cardano.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd">UTxO-HD<a class="hash-link" href="#utxo-hd" title="Direct link to heading">​</a></h2><ul><li>We have a plan for making the ledger tables in UTxO-HD more ergonomic by mimicking <code>SOP</code> classes like <code>HPure</code> and <code>HAp</code> . In short, we implement generalised versions of important classes like <code>Applicative</code> and <code>Traversable</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="support">Support<a class="hash-link" href="#support" title="Direct link to heading">​</a></h2><ul><li><code>fs-sim-0.1.0.2</code> and <code>fs-api-0.1.0.2</code> were released, which makes them now compatible with GHC up to <code>9.6</code>.</li><li><code>ouroboros-consensus-0.7.0.0</code> was released for <code>cardano-node</code> <code>8.1</code>, including query serialization fixes for backwards compatibility.</li></ul>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-05-31-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-31-performance-and-tracing"/>
        <updated>2023-05-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Benchmarking: We've performed and analysed first benchmarks with GHC9.2 builds. Additionally we have developed an early indicator for how build config changes might reflect on metrics from our model cluster.</li><li>New tracing: Collaboration with Galois led to the new tracing system to be equipped with a re-forwarding mechanism.</li><li>Nomad backend: Porting the 52 node model cluster to nomad cloud is ongoing, with the focus on deployment and health checks.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">​</a></h3><p>The first set of runs with GHC9.2 as a build platform are in. We've discovered a significant difference in resource profile usage compared to GHC8.10. Further investigation uncovered the need for benchmarking another parameter change in the build
configuration: As it stands, the <code>ghc-bignum</code> package is using the Haskell <code>native-backend</code> as a default. We strive
to benchmark a build with the <code>gmp-backend</code> next.  </p><p>A variant of our <code>forge-stress</code> local benchmark has been set up to serve as an early indicator for the resource usage profile
we'd expect to observe on the model cluster. This provides us with a much tighter feedback loop, as local run duration is way
shorter. This indicator is specific to changes in the configuration of build and the runtime systems, and will be of great
support when evaluating different compiler versions or RTS flags incrementally.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h3><p>The hub of the new tracing system <code>cardano-tracer</code> is designed with a fixed output behaviour, which is limited to various
logging options. Thanks to the contribution from Galois, that design is now extended to be able to re-forward all, or a pre-filtered portion, of traces from the node in a configurable manner. This will enable downstream applications to
directly receive the set of trace values relevant to their logic, without any additional cost for the node itself at all.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>We're currently working out the details of efficiently deploying and monitoring a fleet of 50+ nodes, along with
job definitions for tracing and transaction generation. Scaling up to those many instances, and monitoring an ongoing
benchmarking run required us to fine-tune communications with the nomad server.  </p><p>Related to that, the new cloud backend will provide a monitoring and health-checking mechanism which is far more flexible
and offers more detailed insight than the previous iteration in <code>cardano-ops</code>. The backend will enable you to formulate
very specific conditions for an ongoing run to be considered healthy, and offer automation of certain actions should these conditions not be met.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-05-26-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-26-goedel"/>
        <updated>2023-05-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has been working on final revisions for the
pre-proceedings versions of two ICE 2023 papers.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Porting Ouroboros Praos formalisation to new application layer.</p></li><li><p>Preparing pre-proceedings version of two ICE 2023 papers.</p></li><li><p>The team is hiring a performance engineering intern - <a href="https://apply.workable.com/io-global/j/BFEC5B0AFF/" target="_blank" rel="noopener noreferrer">https://apply.workable.com/io-global/j/BFEC5B0AFF/</a></p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-05-26-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-26-hydra"/>
        <updated>2023-05-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team accomplished several important tasks. They held their
monthly review meeting and drafted the report for May. They made progress on
implementing the first end-to-end journey for external commits using "Option A"
for normal UTxOs, while still considering "Option B". The team also integrated a
Spanish translation contributed by the community, created micro-benchmarks for
transaction validation and deserialization, and made improvements to
hydra-node's version reporting. Last but not least, they implemented the ability
to commit multiple UTxOs to a head at once.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Held the monthly review meeting (<a href="https://drive.google.com/file/d/1_N6b4RDe579TgLawiJzbE0NLofD3ljE6/view" target="_blank" rel="noopener noreferrer">recording</a> + <a href="https://docs.google.com/presentation/d/1anUC3Z1idloyR6uwiSHLZtV6-LQvUcByHPMUgCBOVIA" target="_blank" rel="noopener noreferrer">slides</a>) &amp; drafted the report for May.</li><li>Have a first end-to-end journey for external commits implementing <!-- -->“<!-- -->Option A<!-- -->”<!-- -->
for normal UTxOs <a href="https://github.com/input-output-hk/hydra/pull/887" target="_blank" rel="noopener noreferrer">#887</a> (still considering <!-- -->“<!-- -->Option B<!-- -->”<!-- -->).</li><li>Integrated the spanish translation <a href="https://github.com/input-output-hk/hydra/pull/866" target="_blank" rel="noopener noreferrer">#866</a>.</li><li>Created micro-benchmarks for transaction validation and deserialization <a href="https://github.com/input-output-hk/hydra/pull/884" target="_blank" rel="noopener noreferrer">#884</a>.</li><li>Improve hydra-node <!-- -->–<!-- -->version reporting on non-released builds <a href="https://github.com/input-output-hk/hydra/issues/849" target="_blank" rel="noopener noreferrer">#849</a></li><li>Some minor CI improvements following up last weeks changes.</li><li>Allow commit transactions with multiple UTxO <a href="https://github.com/input-output-hk/hydra/pull/774" target="_blank" rel="noopener noreferrer">#774</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Investigate and re-open our team-internal head on mainnet.</li><li>Improve and provide regular benchmarks for Hydra <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">#186</a>.</li><li>Complete external commits with script UTxOs <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a>.</li><li>Authenticate network messages <a href="https://github.com/input-output-hk/hydra/issues/727" target="_blank" rel="noopener noreferrer">#727</a>.</li><li>Add hydra as tool to developr platform <a href="https://github.com/input-output-hk/hydra/issues/872" target="_blank" rel="noopener noreferrer">#872</a>.</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-05-26-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-26-ledger"/>
        <updated>2023-05-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The ledger team made progress on the conway ledger era. In particular, the design and implementation
of the new certificates is near complete, we refactored some of our data structures
to be able to support DReps, we cleaned up the serialization format, and renamed things to make
clearer the differences with Shelley.</p><p>The team also completed integration work for the next node release, namely 8.1.0.
And, as always, we continue to address technical debt.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conway-progress">Conway progress<a class="hash-link" href="#conway-progress" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3408" target="_blank" rel="noopener noreferrer">pull-3408</a> - Improve conway delegation certificates</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3428" target="_blank" rel="noopener noreferrer">pull-3428</a> - Get rid of Constitutional in favor of Genesis and Committee</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3426" target="_blank" rel="noopener noreferrer">pull-3426</a> - Add DRep to internal data struture (UMap)</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3425" target="_blank" rel="noopener noreferrer">pull-3425</a> - Improve witness logic needed for conway</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3423" target="_blank" rel="noopener noreferrer">pull-3423</a> - Rename ShelleyDelegCerts constructors to distinguish them from Conway</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3421" target="_blank" rel="noopener noreferrer">pull-3421</a> - Rename DCert -&gt; TxCert</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3454" target="_blank" rel="noopener noreferrer">pull-3454</a> - conway CDDL minor fixes</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="improve-testing">Improve testing<a class="hash-link" href="#improve-testing" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3403" target="_blank" rel="noopener noreferrer">pull-3403</a> - Add Plutus script context golden tests</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-work">Integration work<a class="hash-link" href="#integration-work" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3410" target="_blank" rel="noopener noreferrer">pull-3410</a> - Update chaps index</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3416" target="_blank" rel="noopener noreferrer">pull-3416</a> - Bump cardano-ledger-alonzo-test version</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3414" target="_blank" rel="noopener noreferrer">pull-3414</a> - Bump cardano-ledger-shelley-test minor version</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3420" target="_blank" rel="noopener noreferrer">pull-3420</a> - Bump cardano-ledger-shelley-ma-test version</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3441" target="_blank" rel="noopener noreferrer">pull-3441</a> - Release cardano-ledger-<!-- -->[alonzo|babbage]<!-- -->-1.2.1</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3409" target="_blank" rel="noopener noreferrer">pull-3409</a> -  Unit test - no such thing as a reference datum</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3407" target="_blank" rel="noopener noreferrer">pull-3407</a> -  Fixup release process documentation</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3404" target="_blank" rel="noopener noreferrer">pull-3404</a> -  Create TotalDeposits events during all eras</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3402" target="_blank" rel="noopener noreferrer">pull-3402</a> -  Fix broken references in the Shelley spec</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3424" target="_blank" rel="noopener noreferrer">pull-3424</a> -  Remove no longer used cardano-ledger-shelley-ma package</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3432" target="_blank" rel="noopener noreferrer">pull-3432</a> -  Add an example on how to bump up versions in the changelog </li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3440" target="_blank" rel="noopener noreferrer">pull-3440</a> -  Revert back to the group serialization for ProtVer for PParams </li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-05-26-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-26-network"/>
        <updated>2023-05-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We continued working on <code>eclipse-evasion</code>.  We also analysed and fixed a bug
when using DNS names in local root peers.  We continued working on engineering
blog post about P2P. We released a new version of packages for
<code>cardano-node-8.1.0</code> release.</p><p>We improved our CI, removed obsolete scripts add extra validation which checks
if <code>CHANGELOG.md</code> files were updated.</p><p>We also improved release scripts.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-summary">Detailed summary<a class="hash-link" href="#detailed-summary" title="Direct link to heading">​</a></h2><ul><li>Eclipse evasion: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4462" target="_blank" rel="noopener noreferrer">#4462</a></li><li>Local root peers bug fix: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4559" target="_blank" rel="noopener noreferrer">#4559</a></li><li>Release to CHaP: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4573" target="_blank" rel="noopener noreferrer">#4573</a></li><li>CI improvements: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4572" target="_blank" rel="noopener noreferrer">#4572</a></li><li>Release script improvements: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4573" target="_blank" rel="noopener noreferrer">#4573</a></li></ul>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-05-24-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-24-node-cli-api"/>
        <updated>2023-05-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-05-24 - 2023-06-06</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>The last sprint focused on removing cardano-cli and cardano-api from the cardano-node repository. We have successfully moved cardano-api to its own repository and will do the same for cardano-cli after the 8.1 node is released. </li><li>We provided assitance where needed in the release</li><li>An integration repository <a href="https://github.com/input-output-hk/fusion-flamingo" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/fusion-flamingo</a> was created to enable my team to more easily work on cardano-cli and cardano-api</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5290" target="_blank" rel="noopener noreferrer">Update <code>cardano-cli</code> changelog</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5197" target="_blank" rel="noopener noreferrer">Propagate protocol parameters conversion errors</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5149" target="_blank" rel="noopener noreferrer">Command line option for parsing UTC time to slot number</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-api/pull/31" target="_blank" rel="noopener noreferrer">Switch to <code>tasty-discover</code></a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/30" target="_blank" rel="noopener noreferrer">Move tests to standard locations</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/26" target="_blank" rel="noopener noreferrer">Make cardano-api:internal component public</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/24" target="_blank" rel="noopener noreferrer">update chaps index</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/18" target="_blank" rel="noopener noreferrer">Make <code>ErrorSpec</code> check for all constructors, move golden tests together</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/17" target="_blank" rel="noopener noreferrer">Expose toAlonzoCostModels</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/9" target="_blank" rel="noopener noreferrer">Make <code>ErrorsSpec</code>  use generated types and constructors names</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/32" target="_blank" rel="noopener noreferrer">Check changelog in tag script</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/34" target="_blank" rel="noopener noreferrer">Use tag script from <code>cardano-dev</code> repository instead</a> </li><li><a href="https://github.com/input-output-hk/cardano-api/pull/38" target="_blank" rel="noopener noreferrer">Use .x suffix for release branches</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5291" target="_blank" rel="noopener noreferrer">Use <code>cryptoInit</code> instead of <code>sodiumInit</code></a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5284" target="_blank" rel="noopener noreferrer">Move configuration tests to <code>cardano-node</code> tests</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5243" target="_blank" rel="noopener noreferrer">update chaps &amp; integration</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5240" target="_blank" rel="noopener noreferrer">#5222 Remove <code>ApplicationName</code> and <code>ApplicationVersion</code> config parameters</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-05-19-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-19-hydra"/>
        <updated>2023-05-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team has worked on several fronts, including improvements of their CI speed, logs, documentation pages and adding the support for timed transactions. They also updated the "Coding Standards" for the project, improved the troubleshooting page on their website and wrote a section about how to operate a hydra node. Finally the team completed a feature request that allows clients to submit and validate transactions to their hydra nodes using time validity ranges, ensuring isomorphism with L1.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Complete validation of timed transactions feature <a href="https://github.com/input-output-hk/hydra/issues/196" target="_blank" rel="noopener noreferrer">#196</a>.</li><li>Write <!-- -->“<!-- -->ops<!-- -->”<!-- --> instructions and troubleshooting <a href="https://github.com/input-output-hk/hydra/issues/569" target="_blank" rel="noopener noreferrer">#569</a> and improve logs.</li><li>Remove <code>--ledger-genesis</code> argument to hydra-node options <a href="https://github.com/input-output-hk/hydra/pull/863" target="_blank" rel="noopener noreferrer">#863</a>.</li><li>Fix issue with garbage collected caches by using a new cardano-scaling.cachix in more workflows <a href="https://github.com/input-output-hk/hydra/pull/877" target="_blank" rel="noopener noreferrer">#877</a>.</li><li>Use nix to build test binaries to increase CI speed <a href="https://github.com/input-output-hk/hydra/pull/867" target="_blank" rel="noopener noreferrer">#867</a>.</li><li>Updated our <a href="https://github.com/input-output-hk/hydra/wiki/Coding-Standards" target="_blank" rel="noopener noreferrer">Coding Standards</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Monthly report &amp; review meeting.</li><li>Have a first end-to-end journey for external commits implementing "Option A" <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a>.</li><li>Integrate spanish translation <a href="https://github.com/input-output-hk/hydra/pull/866" target="_blank" rel="noopener noreferrer">#866</a>.</li><li>Improve and provide regular benchmarks for Hydra <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">#186</a>.</li><li>Allow commit transactions with multiple UTxO <a href="https://github.com/input-output-hk/hydra/pull/774" target="_blank" rel="noopener noreferrer">#774</a>.</li><li>Explored stateless observation and refined hydra explorer ticket <a href="https://github.com/input-output-hk/hydra/issues/696" target="_blank" rel="noopener noreferrer">#696</a>.</li></ul>]]></content>
        <author>
            <name>Franco Testagrossa</name>
            <uri>https://github.com/ffakenz</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-05-17-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-17-consensus"/>
        <updated>2023-05-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks we brought further improvements into the Genesis design in collaboration with the IO Research and Networking teams. These improvements concern the Genesis selection rule, candidate rule, and root peers usage. See the <!-- -->[Genesis][#genesis]<!-- --> section for more details.</p><p>Regarding our UTxO-HD prototype, during the past two weeks we put together a pull-request that improves the DB locking mechanism, started porting the mempool fairness improvements from our <code>main</code> branch, and integrated a new open source library (that implements cancellative monoids) that allowed us to simplify our code and get a small performance gain.</p><p>We improved our tooling by releasing an <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/68" target="_blank" rel="noopener noreferrer">immutable DB server</a>, which can be used for testing and benchmarking purposes, and a <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/70" target="_blank" rel="noopener noreferrer"><code>db-truncater</code></a> program, which can be used in disaster recovery and benchmarking scenarios.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h2><p>The consensus team working on Genesis:</p><ul><li>Improved the genesis selection rule as a result of our interaction with IO Research.</li><li>Studied how the hard-fork combinator handles forecasting at era transitions, and <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/89" target="_blank" rel="noopener noreferrer">improved our documentation</a>.</li><li>Determined that the simplest candidate rule we had considered will work for the Genesis window at era transitions, at least for the MVP.</li><li>Elaborated concrete proposal for the Genesis State Machine.</li><li>Met with the Networking Team and advised/co-designed how to implement the stop gap usage of public trusted root peers before Genesis is released (it's similar to the Genesis State Machine).</li></ul><p>The team is currently re-analyzing the Limit on Patience, which can be less aggressive now that we've re-introduced the Genesis State Machine.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-05-17-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-17-mithril"/>
        <updated>2023-05-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2318.0" target="_blank" rel="noopener noreferrer"><code>2318.0</code></a> distribution that implements the last migration phase of the aggregator stores and embeds a bug fix for the signer registration. They also completed the implementation of the interfaces defined to provide certification for the immutable full snapshot of Cardano files and Mithril stake distribution. They finalized the implementation of the framework to sign generic types of data in the aggregator and the signer nodes. They also updated the runtime of the aggregator to handle open messages associated with the available types, and evolved the REST API of the aggregator to deliver the artifacts for these types. Additionally, they have upgraded the network explorer in order to display the artifacts and certificates for these different types.</p><p>Finally, the team started designing an on-chain decentralized signer registration process, and started implementing the new stake distribution computation available from Cardano node <code>8.0.0</code> (along with the backward compatibility for previous <code>1.35.x</code> versions).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Worked on the epic that designs and implements generic signing/verification of entity services <a href="https://github.com/input-output-hk/mithril/issues/780" target="_blank" rel="noopener noreferrer">#780</a>:<ul><li>Completed the handling of multiple types of signed entity in the aggregator runtime <a href="https://github.com/input-output-hk/mithril/issues/907" target="_blank" rel="noopener noreferrer">#907</a></li><li>Completed the adaptation of the signer runtime to use the signable builder service <a href="https://github.com/input-output-hk/mithril/issues/854" target="_blank" rel="noopener noreferrer">#854</a></li><li>Completed the adaptation of the aggregator runtime to use the artifact builder service <a href="https://github.com/input-output-hk/mithril/issues/869" target="_blank" rel="noopener noreferrer">#869</a></li><li>Completed the appending of the next AVK to all protocol messages <a href="https://github.com/input-output-hk/mithril/issues/888" target="_blank" rel="noopener noreferrer">#888</a></li><li>Completed the adaptation of the aggregator REST API to retrieve the list/details of the artifacts produced <a href="https://github.com/input-output-hk/mithril/issues/893" target="_blank" rel="noopener noreferrer">#893</a></li><li>Completed the adaptation of the explorer to handle new artifact routes of the aggregator <a href="https://github.com/input-output-hk/mithril/issues/927" target="_blank" rel="noopener noreferrer">#927</a></li></ul></li><li>Worked on the epic that implements the computation of the stake distribution for <code>mainnet</code> <a href="https://github.com/input-output-hk/mithril/issues/880" target="_blank" rel="noopener noreferrer">#880</a>:<ul><li>Completed the implementation of the new stake distribution computation in the chain observer <a href="https://github.com/input-output-hk/mithril/issues/919" target="_blank" rel="noopener noreferrer">#919</a></li><li>Worked on upgrading the Cardano node to <code>8.0.0</code> <a href="https://github.com/input-output-hk/mithril/issues/920" target="_blank" rel="noopener noreferrer">#920</a></li></ul></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-05-17-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-17-performance-and-tracing"/>
        <updated>2023-05-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Benchmarking: We're preparing our model cluster to perform GHC9.2 benchmarks, as well as experimenting with increased dataset sizes.</li><li>New tracing: After optimization work on the new tracing system, another cycle of validation and documentation is due.</li><li>Analysis pipeline: First steps on implementing incremental analysis have been untertaken.</li><li>Open Sourcing: Exhaustive dataflow charts for both our analysis tool <code>locli</code> and our <code>workbanch</code> have been merged to <code>master</code></li><li>Nomad backend: The first set of CI-centric workbench profiles have been adjusted and run on the nomad backend; currently we're porting the definition of our model cluster.</li><li>P&amp;T Meetup: We had a very productive personal meetup in Lugano, Switzerland.</li><li>Offboarding: Sadly, we have to say goodbye to our team lead. Currently, we're busy with the handover.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking">Benchmarking<a class="hash-link" href="#benchmarking" title="Direct link to heading">​</a></h3><p>As a compiler switch to GHC 9.2.7 for <code>cardano-node</code>'s default build environment is around the corner, we're setting up our benchmarking cluster to
handle the new version. Special attention is given to the fact that we might need more flexibility in switching compiler versions in the future. This
also involves choosing a reliable baseline as reference point for inter-version comparisons.  </p><p>Additionally we've been working on refining our model cluster: by increasing UTxO and delegation map sizes to closer match those of current mainnet,
we strive to have a more accurate model - and thus be able to make more detailed predictions regarding performance. However, this still needs to
be balanced against resource demand for all our cluster's nodes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h3><p>For our new tracing system, we're currently validating the behaviour of the system after optimizations have been applied. Furthermore, some
quality-of-life details that have changed required us to revision the system documentation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis">Analysis<a class="hash-link" href="#analysis" title="Direct link to heading">​</a></h3><p>As a mid-term goal, we aim to provide incremental analysis of our benchmarking metrics. While currently, we can only reliably process runs that have been
normally (or abnormally) terminated, we see the possibility of incrementally analysing ongoing runs, or any data source yielding our key metrics, as a
huge opportunity to increase our operational flexibility. All in all, this approach entails building completely new features for our pipeline. A first effort to accomodate incrementally incoming data points has been undertaken. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-sourcing">Open Sourcing<a class="hash-link" href="#open-sourcing" title="Direct link to heading">​</a></h3><p>A very involved and exhaustive documentation and visualization effort has been undertaken to make the data flow through our key benchmarking
copmonents more accessible. As a result, detailed charts for both our LogObject CLI <code>locli</code> and our <code>workbench</code> have been merged to <code>master</code>. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>While our Nomad backend is reaching completion, and hardware setup is being implemented in collaboration with SRE, we've been adjusting
those profiles of our <code>workbench</code> that target CI-oriented workloads to the new backend. Those profiles should demonstrate the full functionality
of the nomad cloud backend.  </p><p>Additionally, we're porting a first deployable version of our model cluster to nomad cloud, which will form the basis for validation of our actual key metrics with regard to those from the existing cluster.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance--tracing-meetup">Performance &amp; Tracing Meetup<a class="hash-link" href="#performance--tracing-meetup" title="Direct link to heading">​</a></h3><p>We held a personal team meetup in Lugano, Switzerland. In an amazing location, and with a great seminar room to focus, we had 2 very productive
days together. Being able to discuss live and in colour, we could effectively synchronize on where the team is at, and how we want to develop in the future.
Also, it was a great opportunity to finally meet in person.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="offboarding">Offboarding<a class="hash-link" href="#offboarding" title="Direct link to heading">​</a></h3><p>Last not least we regret that our team lead is leaving at the end of May. Currently, he's handing over all his obligations, which requires reorganisation
of team structure, and responsabilities of team members for specific tasks. Serge, we all want to thank you for your excellent and reliable lead; we very much enjoyed the time with you, and wish you all the best for your future endeavours!</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-05-12-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-12-crypto"/>
        <updated>2023-05-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>cardano-base: Include final tests for BLS signature. Further adaptations for KES agent. </li><li>Sidechains: Implement BLS and JubJub using upstream's macros to merge these curves in halo2curves.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>RawBearer API in ouroboros-network-framework (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4395)" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/ouroboros-network/pull/4395)</a>; this is needed for KES Agent. Review ongoing.</li><li>Facilitate BLS test vectors in Haskell test suite (<a href="https://github.com/input-output-hk/cardano-base/pull/408" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-base/pull/408</a>)</li><li>Add the SignKeyWithKES type to cardano-base (<a href="https://github.com/input-output-hk/cardano-base/pull/389" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-base/pull/389</a>)</li><li>Restructuring and simplifying the MLocking code in cardano-base (<a href="https://github.com/input-output-hk/cardano-base/pull/404" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-base/pull/404</a>, <a href="https://github.com/input-output-hk/cardano-base/pull/405" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-base/pull/405</a>), getting rid of the purpose-built MonadMLock etc. typeclasses in the process</li><li>Merging the DSIGN and DSIGNM APIs such that the same phantom type can be used to select both the pure and mlocked versions of the same DSIGN algorithm (<a href="https://github.com/input-output-hk/cardano-base/pull/411" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-base/pull/411</a>)</li><li>Simplifying the KES API into a single KESAlgorithm typeclass, merging the KESSignAlgorithm class into it (this is possible due to the simplifications from #404). (Same PR as above: <a href="https://github.com/input-output-hk/cardano-base/pull/411" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-base/pull/411</a>).</li><li>Update CIP-0381 with new plutus built-in functions, <a href="https://github.com/cardano-foundation/CIPs/pull/506" target="_blank" rel="noopener noreferrer">#506</a>. In particular hash_to_curve now takes as input a secon input for the Domain Separation Tag (DST), and we limit to have a maximu size of 255 bytes. </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sidechains">Sidechains<a class="hash-link" href="#sidechains" title="Direct link to heading">​</a></h3><ul><li>Opened PR in halo2curves to include BLS12-381 and JubJub, <a href="https://github.com/privacy-scaling-explorations/halo2curves/pull/38" target="_blank" rel="noopener noreferrer">#38</a></li><li>Addition constraint over JubJub merged <a href="https://github.com/input-output-hk/sidechains-zk/pull/10" target="_blank" rel="noopener noreferrer">#10</a></li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-05-12-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-12-goedel"/>
        <updated>2023-05-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team had two paper accepted for ICE 2023
(<a href="https://www.discotec.org/2023/ice" target="_blank" rel="noopener noreferrer">https://www.discotec.org/2023/ice</a>). The event will be held in Lisbon
on 19th June 2023. The papers will be published in EPTCS.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Application layer for Praos formalisation in review.</p></li><li><p>Participating in interactive peer review process for ICE 2023.</p></li><li><p>The team is hiring a performance engineering intern - <a href="https://apply.workable.com/io-global/j/BFEC5B0AFF/" target="_blank" rel="noopener noreferrer">https://apply.workable.com/io-global/j/BFEC5B0AFF/</a></p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-05-12-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-12-hydra"/>
        <updated>2023-05-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team achieved a number of milestones, including the release
of the first mainnet compatible version. Besides this they also addressed
inconsistencies in rollback handling, added an architecture page to the website,
reducing the size of logs using event IDs. They also had productive discussions
with researchers on plans for incremental commits/decommits and had a whiteboard
session on DeFi and lending protocols. The goals for next week include
completing the validation of the timed transactions feature, exploring stateless
observation, refining the Hydra explorer ticket, writing ops instructions and
troubleshooting, and implementing the first end-to-end journey for external
commits.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Released first mainnnet compatible version <a href="https://github.com/input-output-hk/hydra/releases/tag/0.10.0" target="_blank" rel="noopener noreferrer">0.10.0</a></li><li>Addressed inconsist handling of rollbacks <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a></li><li>Added <a href="https://hydra.family/head-protocol/core-concepts/architecture/" target="_blank" rel="noopener noreferrer">architecture page</a> and fixed haddock links on our website <a href="https://github.com/input-output-hk/hydra/pull/838" target="_blank" rel="noopener noreferrer">#838</a></li><li>Opened a new hydra head on mainnet</li><li>Talked with researchers on initial plan for incremental commits/decommits</li><li>Had a Whiteboard session on DeFi and lending protocols</li><li>Reduced size of logs using event ids <a href="https://github.com/input-output-hk/hydra/pull/859" target="_blank" rel="noopener noreferrer">#859</a></li><li>Published the <a href="https://hydra.family/head-protocol/monthly/2023-04" target="_blank" rel="noopener noreferrer">monthly report for April</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Complete validation of timed transactions feature <a href="https://github.com/input-output-hk/hydra/issues/196" target="_blank" rel="noopener noreferrer">#196</a></li><li>Explored stateless observation and refined hydra explorer ticket <a href="https://github.com/input-output-hk/hydra/issues/696" target="_blank" rel="noopener noreferrer">#696</a></li><li>Write <!-- -->“<!-- -->ops<!-- -->”<!-- --> instructions and troubleshooting <a href="https://github.com/input-output-hk/hydra/issues/569" target="_blank" rel="noopener noreferrer">#569</a> and improve logs</li><li>Have a first end-to-end journey for external commits implemented <a href="https://github.com/input-output-hk/hydra/issues/215" target="_blank" rel="noopener noreferrer">#215</a></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-05-12-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-12-network"/>
        <updated>2023-05-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We started working on a new way to switch between root &amp; ledger peers (see
below).  We continued to work on <code>eclipse-evasion</code>.  We merged changes to
Handshake contributed by Galois Inc.  We made improvements to our tests (fixed
a flaky test, added cddl specs for <code>NodeToNodeVersionData</code> and
<code>NodeToClientVersionData</code>).  We improved our CI and automated the process of
releasing new package version to <code>CHaP</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-summary">Detailed summary<a class="hash-link" href="#detailed-summary" title="Direct link to heading">​</a></h2><p>We continued to work on testing <code>eclipse-evasion</code>.</p><p>We came up with an idea to limit how full node wallets relay on root peers
(currently operated by IOG, in future also CF and Emurgo).  We designed
a switch to use ledger peers if the node tip is close enough to the current
time.  For more details see <a href="https://github.com/input-output-hk/ouroboros-network/issues/4530" target="_blank" rel="noopener noreferrer">#4530</a>.</p><p>We merged changes to the handshake mini-protocol which allow one to query
server's <code>node-to-node</code> / <code>node-to-client</code> parameters.  We are grateful to
Galois Inc. for implementing it, <a href="https://github.com/input-output-hk/ouroboros-network/issues/4256" target="_blank" rel="noopener noreferrer">#4256</a> and <a href="https://github.com/input-output-hk/ouroboros-network/issues/4538" target="_blank" rel="noopener noreferrer">#4538</a>.  We published new version
of packages to CHaP <a href="https://github.com/input-output-hk/cardano-haskell-packages/pull/253" target="_blank" rel="noopener noreferrer">chap-#253</a>.</p><p>We added <code>DiffusionError</code> wrapper.  Thanks to it, <code>ouroboros-consensus</code> will
not duplicate diffusion errors messages in the log, <a href="https://github.com/input-output-hk/ouroboros-network/issues/4537" target="_blank" rel="noopener noreferrer">#4537</a>.</p><p>We fixed an issue which caused one of our tests to be flaky, <a href="https://github.com/input-output-hk/ouroboros-network/issues/4515" target="_blank" rel="noopener noreferrer">#4515</a>.</p><p>We added cddl tests for <code>NodeToNodeVersionData</code> and <code>NodeToClientVersionData</code>:
<a href="https://github.com/input-output-hk/ouroboros-network/issues/4540" target="_blank" rel="noopener noreferrer">#4540</a>, <a href="https://github.com/input-output-hk/ouroboros-network/issues/4544" target="_blank" rel="noopener noreferrer">#4544</a> (in review).</p><p>We wrote scripts which will help us release packages as well as verify that we
released all the package necessary to build the newest set of packages,
<a href="https://github.com/input-output-hk/ouroboros-network/issues/4542" target="_blank" rel="noopener noreferrer">#4542</a>.</p><p>We renamed the consensus startup tracer and make sure it doesn't log
<code>ExitSuccess</code> exceptions, <a href="https://github.com/input-output-hk/ouroboros-consensus/pulls/71" target="_blank" rel="noopener noreferrer">consensus-#71</a>.</p><p>We reviewed PR which adds <code>RawBearer</code> API, <a href="https://github.com/input-output-hk/ouroboros-network/issues/4395" target="_blank" rel="noopener noreferrer">#4395</a>.</p><p>We made series of improvements to our CI:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4539" target="_blank" rel="noopener noreferrer">#4539</a>: we don't need to install cryptographic libraries in CI;</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4545" target="_blank" rel="noopener noreferrer">#4545</a>: Javier Sagredo (consensus) cleaned up CI after <code>consensus</code> moved
to a new repo;</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4546" target="_blank" rel="noopener noreferrer">#4546</a>: we switched to use <a href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-pull-request-merges/managing-a-merge-queue" target="_blank" rel="noopener noreferrer">GitHub merge queues</a>;</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4549" target="_blank" rel="noopener noreferrer">#4549</a>: we made it possible to trigger building haddocks manually;</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4553" target="_blank" rel="noopener noreferrer">#4553</a>: we fixed and enhanced caching of building dependencies.</li></ul>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-05-05-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-05-ledger"/>
        <updated>2023-05-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The ledger team focused mainly on the conway ledger era and node integration.
For conway, we completed a large structural change that now allows
for delegation certificates to be parameterized by era, and introducing
new certificates for the first time since Shelley.
We also continue to build out our contraint based generators that we will
use to property test the conway era.
In particular, we can now generate an entire ledger state and a
transaction which is balanced with respect to the ledger state.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conway-certificates">Conway certificates<a class="hash-link" href="#conway-certificates" title="Direct link to heading">​</a></h2><p>Certificiates are now abstracted as a type family in the ledger codebase.
Moreover, there are new certificates in the Conway era to support CIP-1694,
and MIR certificates have been removed.</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3387" target="_blank" rel="noopener noreferrer">pull-3387</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="constraint-based-testing">Constraint based testing<a class="hash-link" href="#constraint-based-testing" title="Direct link to heading">​</a></h2><p>Our plan for property testing in the conway era is to no longer use the trace generators,
but instead generate ledger states and transactions based on constraints.
We hit a milestone this week, namely the ability to generate a balanced transaction in the context
of a ledger state, all based on our ever growing constaint language.</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3374" target="_blank" rel="noopener noreferrer">pull-3374</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3386" target="_blank" rel="noopener noreferrer">pull-3386</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-work">Integration work<a class="hash-link" href="#integration-work" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3393" target="_blank" rel="noopener noreferrer">pull-3393</a> - Performance improvements</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3395" target="_blank" rel="noopener noreferrer">pull-3395</a> - Conway instances</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3398" target="_blank" rel="noopener noreferrer">pull-3398</a> - Fix mint translation in the script context</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3389" target="_blank" rel="noopener noreferrer">pull-3389</a> - Reduce github pages size</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3390" target="_blank" rel="noopener noreferrer">pull-3390</a> - Reinstate the tickf optimizations</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-05-05-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-05-node-cli-api"/>
        <updated>2023-05-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-05-05 - 2023-05-23</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Golden tests for cardano-cli command help output were added.</li><li>Documentation was updated with new libsodium installation instructions.</li><li>There were several updates for the cardano-cli:<ul><li>Deletion of the deprecated shelley command group.</li><li>Addition of golden tests for CLI help.</li><li>An improvement to avoid bare IO in tests, allowing better error reporting in failed tests.</li><li>Generation of UTCTime test values without leap seconds (avoids erroneous test failures)</li><li>Support for signing transactions with GenesisDelegateSigningKey_ed25519_bip32.</li></ul></li><li>The cardano-api underwent multiple refinements:<ul><li>Implementing deposit handling when balancing transactions (necessary for Conway)</li><li>Cleaning up socket file path code.</li></ul></li><li>Several changes were made to the cardano-testnet:<ul><li>Adding golden tests for cardano-testnet help.</li><li>Removing all hardcoded yaml files in cardano-testnet</li><li>Improving cardano-testnet help output.</li><li>Parameterizing default yaml configuration value, allowing for easier hardforking to the era of choice.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5181" target="_blank" rel="noopener noreferrer">Update libsodium installation instructions</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5264" target="_blank" rel="noopener noreferrer">Delete deprecated <code>shelley</code> command group</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5206" target="_blank" rel="noopener noreferrer">Add golden tests for CLI help</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5201" target="_blank" rel="noopener noreferrer">Avoid bare IO in tests</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5200" target="_blank" rel="noopener noreferrer">Split <code>cardano-cli</code> test files into separate directories</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5198" target="_blank" rel="noopener noreferrer">Make UTCTime test generator generate values without leap seconds</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5189" target="_blank" rel="noopener noreferrer">Add support with signing transactions with <code>GenesisDelegateSigningKey_ed25519_bip32</code></a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5184" target="_blank" rel="noopener noreferrer">Rename --signed-tx-file argument to --tx-file argument in verify-poll command</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5120" target="_blank" rel="noopener noreferrer">Simplify socket path code</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5221" target="_blank" rel="noopener noreferrer">refactor: make renderScriptWitnessIndex output more explicit</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5218" target="_blank" rel="noopener noreferrer">Implement deposit handling when balancing transactions</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5217" target="_blank" rel="noopener noreferrer">Replace remaining <code>FilePath</code> use in <code>cardano-api</code></a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5215" target="_blank" rel="noopener noreferrer">Cleanup socket file path code</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5207" target="_blank" rel="noopener noreferrer">Delete <code>readEnvSocketPath</code> function</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5194" target="_blank" rel="noopener noreferrer">IO functions for reading. Remove PoolMetadataFile type</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5191" target="_blank" rel="noopener noreferrer">Expose config reader</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5188" target="_blank" rel="noopener noreferrer">Golden tests for <code>cardano-api</code> errors</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5175" target="_blank" rel="noopener noreferrer">Fix <code>toEraInMode</code> for conway</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5168" target="_blank" rel="noopener noreferrer">Use machine readable output for ToJSON ScriptWitnessIndex</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5096" target="_blank" rel="noopener noreferrer">Expose LocalTxSubmissionClient data constructor</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5047" target="_blank" rel="noopener noreferrer">Use cardano-api from separate repository</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4684" target="_blank" rel="noopener noreferrer">[cardano-api] Export fromConsensusPointHF</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5022" target="_blank" rel="noopener noreferrer">Provide orphan <code>ToJSON</code> instances for <code>HardForkNodeToClientVersion</code> and <code>HardForkNodeToNodeVersion</code></a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5254" target="_blank" rel="noopener noreferrer">Add golden test for <code>cardano-testnet</code> help</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5242" target="_blank" rel="noopener noreferrer">Remove all hardcoded yaml files from cardano-testnet</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5234" target="_blank" rel="noopener noreferrer">Fix cardano-testnet help</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5211" target="_blank" rel="noopener noreferrer">Parameterize default yaml configuration value in cardano-testnet</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5165" target="_blank" rel="noopener noreferrer">Freeze callstack in integration and integrationRetryWorkspace functions</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5128" target="_blank" rel="noopener noreferrer">Create defaultYamlValue for cardano-testnet</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-05-04-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-04-mithril"/>
        <updated>2023-05-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team completed the implementation of the new certifier service of the aggregator, which is in charge of producing certificates for multi-signatures. They also finished implementing the interfaces defined to provide certification for the full immutable Cardano files snapshot and the Mithril stake distribution. Additionally, they have completed the refactoring of the multi-signer in the aggregator. The team also fixed the bug in the signer registration that was responsible for gaps during the signature phase for some signers, and they upgraded the Cardano node used in the Mithril testnets and devnet to version <code>1.35.7</code>.</p><p>Finally, they have worked on designing a decentralized registration for the signers that takes place on the Cardano chain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Worked on the epic that designs and implements generic signing/verification of entity services <a href="https://github.com/input-output-hk/mithril/issues/780" target="_blank" rel="noopener noreferrer">#780</a>:<ul><li>Completed the implementation of the <code>Certifier</code> service in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/850" target="_blank" rel="noopener noreferrer">#850</a></li><li>Completed the implementation of the signable builder for the <code>Mithril Stake Distribution</code> <a href="https://github.com/input-output-hk/mithril/issues/851" target="_blank" rel="noopener noreferrer">#851</a></li><li>Completed the implementation of the artifact builder for the <code>Mithril Stake Distribution</code> <a href="https://github.com/input-output-hk/mithril/issues/870" target="_blank" rel="noopener noreferrer">#870</a></li><li>Completed the implementation of the signable builder for the <code>Full Immutables Snapshot</code> <a href="https://github.com/input-output-hk/mithril/issues/852" target="_blank" rel="noopener noreferrer">#852</a></li><li>Completed the implementation of the artifact builder for the <code>Full Immutables Snapshot</code> <a href="https://github.com/input-output-hk/mithril/issues/871" target="_blank" rel="noopener noreferrer">#871</a></li><li>Completed the adaptation of the aggregator runtime to use the signable builder service <a href="https://github.com/input-output-hk/mithril/issues/853" target="_blank" rel="noopener noreferrer">#853</a></li><li>Worked on the adaptation of the signer runtime to use the signable builder service <a href="https://github.com/input-output-hk/mithril/issues/854" target="_blank" rel="noopener noreferrer">#854</a></li><li>Completed the definition of the entity service interface for verification/restoration <a href="https://github.com/input-output-hk/mithril/issues/868" target="_blank" rel="noopener noreferrer">#868</a></li><li>Completed the refactoring of the <code>OpenMessage</code> type <a href="https://github.com/input-output-hk/mithril/issues/878" target="_blank" rel="noopener noreferrer">#878</a></li></ul></li><li>Completed the epic that simplifies the multi-signer in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/398" target="_blank" rel="noopener noreferrer">#398</a>:<ul><li>Completed the extraction of the single signature registration from the multi-signer <a href="https://github.com/input-output-hk/mithril/issues/643" target="_blank" rel="noopener noreferrer">#643</a></li></ul></li><li>Completed the upgrade of the Cardano node to version <code>1.35.7</code> <a href="https://github.com/input-output-hk/mithril/issues/881" target="_blank" rel="noopener noreferrer">#881</a></li><li>Fixed the bug that created a discrepancy of the signer verification keys between signers and aggregators <a href="https://github.com/input-output-hk/mithril/issues/873" target="_blank" rel="noopener noreferrer">#873</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-05-03-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-03-consensus"/>
        <updated>2023-05-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks we made some important progress in the Genesis design.
It seems the <code>BlockFetch</code> logic need not be modified for Genesis, although this
needs to be confirmed. We started a DoS mitigation handbook and updated our
conceptual component diagram to guide the Genesis design. We engaged with the
IOG researchers to work on the Limit on Patience attack vector, work in this
area is still ongoing. We sketched a design to decouple the CPU load of the node
from its responsiveness to the socket. Finally, we discussed with Networking our
approach to lower the performance impact of the BlockFetch decision logic, and
got green light from them.</p><p>We migrated the consensus code to a <a href="https://github.com/input-output-hk/ouroboros-consensus" target="_blank" rel="noopener noreferrer">new
repository</a>, splitting
it from the <code>ouroboros-network</code> repository, and released version 0.6 of
Consensus.</p><p>We also merged the mempool fairness improvement to main branch.</p><p>Another significant enhancement to our documentation was the addition of an
explanation of the hardfork combinator forecast horizon.</p><p>See the sections below for more details.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h2><p>We reviewed the <code>BlockFetch</code> design documentation, and added some source-code
comments that emphasize certain properties of the decisions the <code>BlockFetch</code>
logic makes that are helping us confirm that Genesis does not require any
changes to <code>BlockFetch</code>. We are waiting on input from our former system
architect to verify this.</p><p>We migrated and updated the conceptual component diagram in the <code>ouroboros-consensus</code>
repository which helps us situate the Genesis design and argument.</p><p>We engaged with the IOG researchers about the Genesis design. We sketched out a
way to address the concern that the Limit on Patiente (LoP) attack vector duty
cycle is indeed low, but it's still non-trivial to ultimately conclude it's
sufficiently low.</p><p>We also sketched a design to decouple the CPU load of the node from its
responsiveness to the socket, since the LoP is a relatively tight timeout, and
node performance bugs inducing seconds-worth of latency are unfortunately
familiar phenomena.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="fostering-collaboration">Fostering collaboration<a class="hash-link" href="#fostering-collaboration" title="Direct link to heading">​</a></h2><p>We <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/62" target="_blank" rel="noopener noreferrer">added an
explanation</a> of
a question that we had to explain many times about the exact behavior of the
hardfork combinator forecast horizon.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-05-03-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-03-performance-and-tracing"/>
        <updated>2023-05-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[* Benchmarking: The benchmarks and performance investigations for the new 8.0 release branch are ongoing.]]></summary>
        <content type="html"><![CDATA[<ul><li>Benchmarking: The benchmarks and performance investigations for the new <code>8.0</code> release branch are ongoing.</li><li>New tracing: Performance optimization of the new tracing system is paying off and we could notably shrink its resource footprint.</li><li>Analysis pipeline: An exhaustive documentation and dataflow diagram for our analyses is being worked on.</li><li>Infrastructure: The <code>plutus-apps</code> flake input for <code>cardano-node</code> has finally been removed.</li><li>Nomad backend: A PR implementing placement of benchmarking clusters has been merged.</li></ul><h1>Benchmarking</h1><p>The performance investigations on the <code>8.0</code> release branch have lead to pinpointing and addressing incosistent behaviour. For that,
we created yet another local reproduction with the workbench's <code>forge-stress</code> benchmark.  </p><p>Currently we're working on scaling up the dataset size (UTxO and delegations) on the AWS cluster to gain further insight into <code>8.0</code> and
subsequent releases.  </p><p>Additionally, we've refined the <code>trace-bench</code> family of profiles that target benchmarking our own new tracing system. </p><h1>Tracing</h1><p>Optimization of the tracing system has identified several locations where inefficient serializations were used; those were not originally
intended to run on a performance-critical codepath. We've worked on improving those, as well as eliminating cases of redundant
conversion between different serialization formats. This has brought down both memory and CPU impact of the tracing system.</p><h1>Infrastructure &amp; Analysis</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dataflow-documentation">Dataflow documentation<a class="hash-link" href="#dataflow-documentation" title="Direct link to heading">​</a></h3><p>The LogObject CLI <code>locli</code> is at the heart of our analysis and reporting pipeline. To increase its accessibility and facilitate
further development, we're creating a detailed and illustrated documentation of all dataflows that happen during analysis and reporting. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove-redundant-plutus-flake-input">Remove redundant Plutus flake input<a class="hash-link" href="#remove-redundant-plutus-flake-input" title="Direct link to heading">​</a></h3><p>This step is the conclusion of porting Plutus benchmarking scripts to our own library. By finally removing the now unnecessary flake input,
we simplify the dependency graph for <code>cardano-node</code>, as well as enable immediate feedback when developing Plutus benchmarks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>Sophisticated placement of nodes across various regions of the globe is a cornerstone of the model cluster we use for benchmarking.
This capability has now been added to the Nomad backend and can be controlled with Nomad job descriptions. A PR with this, along
with various quality-of-life improvements, has been merged to <code>master</code>.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB-sync Team Update]]></title>
        <id>2023-05-01-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-05-01-db-sync"/>
        <updated>2023-05-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><ul><li>Prepared a schema change which is expected to speed up queries and help clients
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1389" target="_blank" rel="noopener noreferrer">#1389</a>.</li><li>Ran a big number of benchmarks on the above to evaluate if this change is reasonable.</li><li>Performance optimization related to rewards
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1382" target="_blank" rel="noopener noreferrer">#1382</a></li><li>Using the cache in more places to reduce recourses usage
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1380" target="_blank" rel="noopener noreferrer">#1380</a></li><li>Evaluated risks related to UTXO-HD integration</li><li>Worked on a feauture request to split the <code>tx_out</code> to an address table
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1396" target="_blank" rel="noopener noreferrer">#1396</a></li><li>Worked on another feauture request to prune the consumed entries from the <code>tx_out</code> table
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1398" target="_blank" rel="noopener noreferrer">#1398</a></li><li>Prepared for CIP-1694 integration</li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-04-28-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-28-crypto"/>
        <updated>2023-04-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>cardano-base: New KES structure finally merged. Included additional tests to BLS, and including test vectors created with zkcrypto's library.</li><li>KES agent: Reaching state of MVP. Rewriting KES agent networking code to use the Snockets abstraction.</li><li>Sidechains: Started implementing ECC chip of JubJub over BLS12-381.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-base/pull/255" target="_blank" rel="noopener noreferrer">#255</a> finally merged 🎉</li><li>Additional tests for BLS bindings <a href="https://github.com/input-output-hk/cardano-base/pull/384" target="_blank" rel="noopener noreferrer">#384</a></li><li>Open PR for including test vectors created with <a href="https://github.com/zkcrypto/bls12_381" target="_blank" rel="noopener noreferrer">zkscrypto</a>'s library, <a href="https://github.com/input-output-hk/cardano-base/pull/397" target="_blank" rel="noopener noreferrer">PR#397</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>Introducing the SignKeyWithPeriodKES wrapper type, which bundles a KES key with its corresponding KES period <a href="https://github.com/input-output-hk/cardano-base/pull/389" target="_blank" rel="noopener noreferrer">PR#389</a>.</li><li>Introducing the DirectSerialise API into cardano-base, which allows us to write mlocked memory directly to a file descriptor, without going through intermediate encodings stored on the GHC heap (which is a no-no due to secure forgetting requirements) <a href="https://github.com/input-output-hk/cardano-base/pull/317" target="_blank" rel="noopener noreferrer">#317</a>.</li><li>Figuring out how to generalize the KES, DSIGN, and mlocking code in cardano-base such that it can run in IOSim</li><li>Rewriting KES agent networking code to use the Snockets abstraction, which gives us a platform-independent sockets layer (i.e., it will also work on Windows), and also allows us to run networked code in IOSim for testing purposes</li><li>Refactor MonadSodium into MonadMLock <a href="https://github.com/input-output-hk/cardano-base/pull/388" target="_blank" rel="noopener noreferrer">PR#388</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sidechains">Sidechains<a class="hash-link" href="#sidechains" title="Direct link to heading">​</a></h3><ul><li>Started working on ECC chip for JubJub over BLS (problems still with the multiplication constraint)</li><li>Use macros used by PSE library to try and merge our fork of halo2curves into PSE's repo</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-04-28-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-28-goedel"/>
        <updated>2023-04-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The team is working on porting an existing formalisation of Ouroboros
Praos to a newer foundation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>The team worked on documentation.</p></li><li><p>The team worked on an application layer for the Praos formalisation.</p></li><li><p>The team is hiring a performance engineering intern - <a href="https://apply.workable.com/io-global/j/BFEC5B0AFF/" target="_blank" rel="noopener noreferrer">https://apply.workable.com/io-global/j/BFEC5B0AFF/</a></p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-04-28-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-28-network"/>
        <updated>2023-04-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The networking team has released the following packages to <code>Hackage</code>:</p><ul><li><a href="https://hackage.haskell.org/package/io-classes" target="_blank" rel="noopener noreferrer"><code>io-classes</code></a>,</li><li><a href="https://hackage.haskell.org/package/io-classes-mtl" target="_blank" rel="noopener noreferrer"><code>io-classes-mtl</code></a></li><li><a href="https://hackage.haskell.org/package/io-sim" target="_blank" rel="noopener noreferrer"><code>io-sim</code></a>,</li><li><a href="https://hackage.haskell.org/package/strict-stm" target="_blank" rel="noopener noreferrer"><code>strict-stm</code></a>,</li><li><a href="https://hackage.haskell.org/package/strict-mvar" target="_blank" rel="noopener noreferrer"><code>strict-mvar</code></a></li></ul><p>We published an announcement <a href="https://engineering.iog.io/2023-04-14-io-sim-annoucement" target="_blank" rel="noopener noreferrer">blog post</a>.  We made progress
also on another blog post which will describes the design of the P2P networking
layer.</p><p>After moving <code>ouroboros-consensus</code> to its own repository, we made
<code>ouroboros-network</code> compatible with <code>GHC</code> <code>9.4</code> and <code>9.6</code>.</p><p>We made <code>cardano-client</code> library independent of
<code>ouroboros-consensus-diffusion</code>.</p><p>We prepared release of network packages for <code>cardano-node-8.0</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-log">Detailed log<a class="hash-link" href="#detailed-log" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ouroboros-network">Ouroboros-Network<a class="hash-link" href="#ouroboros-network" title="Direct link to heading">​</a></h3><ul><li>Compatibility with <code>io-classes-1.1.0.0</code>: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4281" target="_blank" rel="noopener noreferrer">ouroboros-network#4281</a>.</li><li>Compatibility with <code>GHC</code> <code>9.4</code> and <code>9.6</code>: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4527" target="_blank" rel="noopener noreferrer">ouroboros-network#4527</a>.</li><li><code>cardano-client</code> independent of <code>ouroboros-cosnensus-diffusion</code>: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4526" target="_blank" rel="noopener noreferrer">ouroboros-network#4526</a>.</li><li>Release new versions of packages for <code>cardano-node-8.0</code>: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4532" target="_blank" rel="noopener noreferrer">ouroboros-network#4532</a>.</li><li>Galois Inc, has been making progress towards merging <a href="https://github.com/input-output-hk/ouroboros-network/pull/4256" target="_blank" rel="noopener noreferrer">ouroboros-network#4256</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="io-sim">IO-Sim<a class="hash-link" href="#io-sim" title="Direct link to heading">​</a></h3><ul><li><code>io-classes-1.0.0.0</code>, and following up releases: <code>1.0.0.1</code> (<code>ghc-9.6</code>
support), <code>1.1.0.0</code> (documentation fix).</li><li>Fixed timeouts and delays in <code>io-sim</code> in a series of PRs: <a href="https://github.com/input-output-hk/io-sim/pull/81" target="_blank" rel="noopener noreferrer">io-sim#81</a>,
<a href="https://github.com/input-output-hk/io-sim/pull/82" target="_blank" rel="noopener noreferrer">io-sim#82</a>, <a href="https://github.com/input-output-hk/io-sim/pull/86" target="_blank" rel="noopener noreferrer">io-sim#86</a>, <a href="https://github.com/input-output-hk/io-sim/pull/87" target="_blank" rel="noopener noreferrer">io-sim#87</a>.</li><li>Renamed a module: <a href="https://github.com/input-output-hk/io-sim/pull/88" target="_blank" rel="noopener noreferrer">io-sim#88</a>.</li><li>Fixed a failing <code>registerDelayCancellable</code> test: <!-- -->[io-sim#80]<!-- -->.</li><li>Use GitHub merge queue in <code>io-sim</code> repository.</li><li>CI: download <code>stylish-haskell</code>: <a href="https://github.com/input-output-hk/io-sim/pull/83" target="_blank" rel="noopener noreferrer">io-sim#83</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="typed-protocols">Typed Protocols<a class="hash-link" href="#typed-protocols" title="Direct link to heading">​</a></h3><ul><li>Released <code>typed-protocols-0.1.0.4</code> which support <code>io-classes-1.1.0.0</code>:
<a href="https://github.com/input-output-hk/cardano-haskell-packages/pull/227" target="_blank" rel="noopener noreferrer">typed-protocols#227</a>.</li><li>Use GitHub merge queue in <code>typed-protocols</code>: <a href="https://github.com/input-output-hk/typed-protocols/pull/30" target="_blank" rel="noopener noreferrer">typed-protocols#30</a>.</li><li>CI: download <code>stylish-haskell</code>: <a href="https://github.com/input-output-hk/typed-protocols/pull/29" target="_blank" rel="noopener noreferrer">typed-protocols#29</a>.</li></ul>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-04-27-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-27-hydra"/>
        <updated>2023-04-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team held their Monthly review meeting and drafted the
report which likely is published next week. They put the spec into the
repository and website, addressed a user issue and fixed the TUI peer list.
Furthermore, they updated dependencies, conducted a Twitter space on Auctions
use cases, covered the rollback bug with tests and implemented a solution.
Looking ahead, their goals for next week include releasing 0.10.0, implementing
timed transactions support, writing a Query API ADR, and grooming work items
like off-chain benchmarks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Held the Monthly review meeting and drafted the report (to be published next week)</li><li>Added the spec into the repository
<a href="https://github.com/input-output-hk/hydra/issues/693" target="_blank" rel="noopener noreferrer">#693</a> and published on
<a href="https://hydra.family/head-protocol/unstable/core-concepts/specification" target="_blank" rel="noopener noreferrer">the
website</a></li><li>Groom and addressed user issue <a href="https://github.com/input-output-hk/hydra/issues/823" target="_blank" rel="noopener noreferrer">#823</a></li><li>Covered the rollback bug with tests and implemented a solution (to be reviewed) <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a></li><li>Fixed the TUI peer list</li><li>Updated dependencies to match <code>cardano-node</code> master</li><li>Conducted a twitter space on Auctions use cases</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Release 0.10.0</li><li>Support timed transactions solution drafted and validated API with users</li><li>Write Query API ADR and groom a concrete step</li><li>Groom and solve <code>PostTxOnChainFailed</code> UX problem <a href="https://github.com/input-output-hk/hydra/issues/832" target="_blank" rel="noopener noreferrer">#832</a></li><li>Groom off-chain benchmarks idea <a href="https://github.com/input-output-hk/hydra/issues/186" target="_blank" rel="noopener noreferrer">#186</a> and turn it into a <!-- -->“<!-- -->feature<!-- -->”</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-04-21-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-21-hydra"/>
        <updated>2023-04-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team worked on several fronts, including fixing state
machine continuity on-chain, discussing voting project solutions, exploring
adding Hydra support to kupo, and improving API navigation with a sidebar. The
team also updated dependencies and fixed issues in their test suites. Moving
forward, the team plans to hold the next monthly review meeting, address a user
issue, prepare for the 0.10.0 release, and work on a dirt road fix for the
rollbacks issue with proper test coverage.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Fixed scripts to enforce state machine continuity on-chain <a href="https://github.com/input-output-hk/hydra/pull/777" target="_blank" rel="noopener noreferrer">#777</a>.</li><li>Took part in a twitter space on <a href="https://twitter.com/thepizzaknight_/status/1647833904282320896" target="_blank" rel="noopener noreferrer">“<!-- -->Scaling Cardano<!-- -->”</a>.</li><li>Joined a CBIA meeting to discuss Cardano network protocols &amp; how to specify them.</li><li>Discussed potential solutions of ensuring vote uniqueness in the voting project.</li><li>Updated dependencies to match <code>cardano-node</code> master to prepare for upcoming releases and hard-forks</li><li>Explored adding Hydra <a href="https://github.com/CardanoSolutions/kupo/pull/117" target="_blank" rel="noopener noreferrer">support to kupo</a>, a lightweight Cardano chain indexer - some more work required.</li><li>Improved navigation of the API Reference with a sidebar, see <a href="https://hydra.family/head-protocol/unstable/api-reference/" target="_blank" rel="noopener noreferrer">unstable API version</a>.</li><li>Fixed two things in our test suites (random port conflicts and an arithmetic underflow in smoke test)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Monthly review meeting (join via <a href="https://discord.gg/inputoutput?event=1097863746216538194" target="_blank" rel="noopener noreferrer">Discord</a> or <a href="https://www.addevent.com/event/ck16794110" target="_blank" rel="noopener noreferrer">AddEvent</a>) &amp; report</li><li>Dirt road fix for rollbacks <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a> properly covered by a test.</li><li>Groom and ideally address user issue <a href="https://github.com/input-output-hk/hydra/issues/823" target="_blank" rel="noopener noreferrer">#823</a>.</li><li>Put the spec into the repo <a href="https://github.com/input-output-hk/hydra/issues/693" target="_blank" rel="noopener noreferrer">#693</a> and prepare release 0.10.0.</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-04-21-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-21-ledger"/>
        <updated>2023-04-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We continued to make progress on CIP-1694 and the conway ledger era.
In particular, the conway era now supports Plutus V3.
Finally, we made small improvements to the ledger API and now host
our Haskell code documentation (haddocks) on github pages.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conway-ledger-era">Conway ledger era<a class="hash-link" href="#conway-ledger-era" title="Direct link to heading">​</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3365" target="_blank" rel="noopener noreferrer">pull-3365</a>] - Support for Plutus V3.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3368" target="_blank" rel="noopener noreferrer">pull-3368</a>] - Conway genesis fix.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3369" target="_blank" rel="noopener noreferrer">pull-3369</a>] - Added some governance ledger state.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3372" target="_blank" rel="noopener noreferrer">pull-3372</a>] - Work on the conway delegation certificates.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3384" target="_blank" rel="noopener noreferrer">pull-3384</a>] - Rename.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="haddocks-hosted-on-github-pages">Haddocks hosted on github pages<a class="hash-link" href="#haddocks-hosted-on-github-pages" title="Direct link to heading">​</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3385" target="_blank" rel="noopener noreferrer">pull-3385</a>] </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="small-improvements-to-the-api">Small improvements to the API<a class="hash-link" href="#small-improvements-to-the-api" title="Direct link to heading">​</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3366" target="_blank" rel="noopener noreferrer">pull-3366</a>]</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical Debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3367" target="_blank" rel="noopener noreferrer">pull-3367</a>] Fix cost model json instances.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3371" target="_blank" rel="noopener noreferrer">pull-3371</a>] UMap cleanup.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3373" target="_blank" rel="noopener noreferrer">pull-3373</a>] Upgrade to ghc 9.2.7 and cabal 3.10.1.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3375" target="_blank" rel="noopener noreferrer">pull-3375</a>] Sadly, we had to revert the <code>TICKF</code> optimizations. There was a regression we do not yet understand.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3377" target="_blank" rel="noopener noreferrer">pull-3377</a>] Fix cabal warnings.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3383" target="_blank" rel="noopener noreferrer">pull-3383</a>] Fix multi-asset test.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-04-20-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-20-mithril"/>
        <updated>2023-04-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2315.0" target="_blank" rel="noopener noreferrer"><code>2315.0</code></a> distribution that implements the first part of the migration of the aggregator stores along with minor improvements and bug fixes. They finished the migration of the aggregator stores to a relational design by completing the adaptation and migration of the signed entity, signer and single signature stores. They also created a new tick service that provides beacons to other services of the aggregator. Additionally, they started implementing the new new certifier service of the aggregator that is in charge of producing certificates for multi-signatures.</p><p>Finally, they completed the design and definition of the interfaces that must be implemented to provide certification for a new type of data in a Mithril network.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Released the new distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2315.0" target="_blank" rel="noopener noreferrer"><code>2315.0</code></a></li><li>Completed the epic that implements a relational store in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/779" target="_blank" rel="noopener noreferrer">#779</a>:<ul><li>Completed the migration/adaptation of the <code>signed_entity</code> table <a href="https://github.com/input-output-hk/mithril/issues/816" target="_blank" rel="noopener noreferrer">#816</a></li><li>Completed the creation of the <code>signer</code> table <a href="https://github.com/input-output-hk/mithril/issues/814" target="_blank" rel="noopener noreferrer">#814</a></li><li>Completed the migration/adaptation of the <code>single_signature</code> table <a href="https://github.com/input-output-hk/mithril/issues/829" target="_blank" rel="noopener noreferrer">#829</a></li></ul></li><li>Worked on the epic that designs and implement generic signing/verification of entity services <a href="https://github.com/input-output-hk/mithril/issues/780" target="_blank" rel="noopener noreferrer">#780</a>:<ul><li>Completed the definition of the interface of the generic entity service for signing <a href="https://github.com/input-output-hk/mithril/issues/847" target="_blank" rel="noopener noreferrer">#847</a></li><li>Worked on the implementation of the <code>Certifier</code> service in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/850" target="_blank" rel="noopener noreferrer">#850</a></li><li>Completed the extension of the <code>SignedEntityType</code> type <a href="https://github.com/input-output-hk/mithril/issues/848" target="_blank" rel="noopener noreferrer">#848</a></li><li>Completed the implementation of the <code>Tick</code> service in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/849" target="_blank" rel="noopener noreferrer">#849</a></li><li>Worked on implementing the signable builder for the <code>Mithril Stake Distribution</code> <a href="https://github.com/input-output-hk/mithril/issues/851" target="_blank" rel="noopener noreferrer">#851</a></li></ul></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-04-20-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-20-node-cli-api"/>
        <updated>2023-04-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-04-20 - 2023-05-04</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Various fixes and improvements</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5136" target="_blank" rel="noopener noreferrer">Modify golden test functions to automatically create parent directories</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5132" target="_blank" rel="noopener noreferrer">SPO on-chain poll commands adjustments</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5119" target="_blank" rel="noopener noreferrer">New environment variable CARDANO_NODE_NETWORK_ID</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5172" target="_blank" rel="noopener noreferrer"><code>--out-file</code> option for governance commands</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5130" target="_blank" rel="noopener noreferrer">UTC Time to slots conversion function</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5157" target="_blank" rel="noopener noreferrer">Update CHaP to get latest ledger with performance fix</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4854" target="_blank" rel="noopener noreferrer">Integration with Peer Sharing</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-04-19-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-19-consensus"/>
        <updated>2023-04-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week the consensus team continued working on the improved DB lock mechanism
for UTxO-HD, and modifications to the mempool benchmarks that this prototype
requires.</p><p>On the Genesis front we validated that the fragment size calculation in
<code>BlockFetch</code> is a major performance sink for ChainSync Jumping. By removing it
we will get performance that is acceptably close to that of the baseline. We
also started investigating a performance fix that does not alter the existing
baseline behavior too much. In addition we reviewed our Genesis attack vector
calculations.</p><p>On the support front we released Consensus 0.4, and we are working on improving
our release process, to support the Cardano-wide efforts in this area. We also
performed an analysis on the number of file descriptors that consensus use. This
information can be used by the node operators to check if the number of file
descriptors they want to support are enough.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-04-19-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-19-performance-and-tracing"/>
        <updated>2023-04-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[* Benchmarking: We performed a series of benchmarks aimed at the new 8.0 release branch and built a timeline from the 1.35 releases to that branch.]]></summary>
        <content type="html"><![CDATA[<ul><li>Benchmarking: We performed a series of benchmarks aimed at the new <code>8.0</code> release branch and built a timeline from the <code>1.35</code> releases to that branch.</li><li>New tracing: Work on safeguarding the new tracing system performance-wise is ongoing. A practical use case for data points is being tackled with Galois.</li><li>Analysis pipeline: We're working on automatically obtaining a detailed manifest for each run.</li><li>Infrastructure: The library for benchmarking Plutus scripts has been merged. Also, we've laid the ground for including GHC profiling data into our workbench.</li><li>Nomad backend: The first iteration of a distributed / multi-client Nomad cluster has been merged.</li></ul><h1>Benchmarking</h1><p>We have performed various cluster runs targeting the <code>8.0</code> release branch. That way we were able to catch an inconsistency in behaviour early on. This led to the creation of a specialized workbench profile <code>epoch-transition</code> for local reproduction of what we observed on the benchmarking cluster.  </p><p>Furthermore, we bridged the gap between the run data from the <code>1.35.x</code> releases to the the new <code>8.0.x</code> release branch. This included walking the
<code>master</code> branch backwards and pinpointing the order, as well as the dates and commits of all relevant component bumps. This timeline is absolutely crucial
in locating possible regressions for the new release branch, as it provides the exact points in history we would need to target with a comprehensive set of
benchmarks.</p><h1>Tracing</h1><p>In-depth performance analysis of the new tracing system has already yielded results and helped us smoothing some rough edges. However, this work is still
ongoing.  </p><p>In coordination with Galois, who are developing a system assurance service by observing a number of <code>cardano-node</code>s, we're working with the implementation
of data points which the node provides during runtime. While making the view on data points expressive enough for the external service, the computational
burden inside the node needs to be kept to an absolute minimum. We're currently in ideation about whether <code>cardano-tracer</code> could be extended with a richer
feature set to that end.</p><h1>Infrastructure &amp; Analysis</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-manifest">Detailed manifest<a class="hash-link" href="#detailed-manifest" title="Direct link to heading">​</a></h3><p>A run manifest documents, among other things, the component dependencies that were used for a specific build the run has been performed with.
These dependencies come from different package sources, have different versioning policies, and an identical package version might provide different
performance characteristics depending on the exact commit used for the build. This manifest will greatly increase insight into where changes in measured behaviour might have originated
by making all component bumps visible and accessible.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ghc-profiling-inside-workbench">GHC profiling inside workbench<a class="hash-link" href="#ghc-profiling-inside-workbench" title="Direct link to heading">​</a></h3><p>The workbench has been equipped with a new <code>-profnix</code> profile flavour. This enforces a <code>-fprof-auto</code> build for all node-related packages. The type of
profiling data generated by the GHC runtime can be customized and will enter statistical analysis. The relevant PR for this new feature has already
been merged to <code>master</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>The added feature for a multi-client Nomad cluster greatly enhances how jobs are organized by the backend and mapped within specific instances.
This results in great maintainability while not giving up on flexibility. However, work on that feature is still ongoing.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Incident Report]]></title>
        <id>2023-04-17-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-17-ledger"/>
        <updated>2023-04-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Incident reporting: Cardano block production temporary outage]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="incident-reporting-cardano-block-production-temporary-outage">Incident reporting: Cardano block production temporary outage<a class="hash-link" href="#incident-reporting-cardano-block-production-temporary-outage" title="Direct link to heading">​</a></h2><p>On Sunday, January 22, 2023, an incident occurred resulting in block production pausing for a brief period of time (approximately two minutes, similar to the usual pause at an epoch boundary). Around 50% of block-producing nodes and relays restarted during this period. Having restarted, nodes continued to produce blocks without failure. While the network continued to operate, the issue did have the potential to affect network integrity, so was flagged as a ‘critical’ incident, thus warranting immediate response and investigation by IOG engineers.
The investigation (with SPO &amp; Cardano Foundation collaboration) quickly revealed the cause of the issue – a complex bug in data structure handling code related to the precise order of insertion/deletion of multi-asset tokens into the internal ledger record. Input Output Global (IOG) engineers, along with SPOs and DApp developers, collectively identified how to reproduce the issue as a unit test that could be included in the standard Cardano node test suite.
Following successful testing, this led to a bug fix being implemented, tested, benchmarked, and deployed as a hotfix in the node v.1.35.5 release on Friday, January 27, 2023. Care was taken not to highlight the exact cause of the bug during this process so that it could not be exploited prior to SPOs deploying this new node version.
With the fix deployed, the Cardano SPO and developer community have not seen any further instances of this issue.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="further-details">Further Details<a class="hash-link" href="#further-details" title="Direct link to heading">​</a></h3><p>You can read more details on the incident and how it was managed from SundaeSwap’s Pi Lanningham <a href="https://www.314pool.com/post/cardano-post-mortem-1" target="_blank" rel="noopener noreferrer">here</a>. Thanks again to all the community for its support in identifying and fixing this bug.</p>]]></content>
        <author>
            <name>Kevin Hammond</name>
            <uri>https://github.com/kevinhammond</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-04-14-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-14-goedel"/>
        <updated>2023-04-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has submitted two papers for publication, carried
out consultancy with other teams and has an opening for an intern.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Finalised and submitted two papers to ICE 2023</p></li><li><p>Studying Praos paper.</p></li><li><p>The team is hiring a performance engineering intern - <a href="https://apply.workable.com/io-global/j/BFEC5B0AFF/" target="_blank" rel="noopener noreferrer">https://apply.workable.com/io-global/j/BFEC5B0AFF/</a></p></li><li><p>Design exploration for congestion management.</p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-04-14-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-14-hydra"/>
        <updated>2023-04-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team focused on improving the smoke test, fixing developer
tooling, and improving the API for voting use cases. They reviewed progress on
auction, payments, and voting projects and made worked on reproducing a bug with
handling rollbacks. Moving forward, the team plans to update dependencies,
implement a dirt road fix for the rollbacks bug, and explore adding Hydra
support to kupo.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Reviewed progress on auction, payments and voting projects</li><li>Improved smoke tests so they can run on mainnet</li><li>Fixed a regression in the development environment and updated cardano-node
used in tests</li><li>Improved API with more configurability to unblock voting use case<ul><li>Exclude utxo in <code>SnapshotConfirmed</code> outputs <a href="https://github.com/input-output-hk/hydra/pull/808" target="_blank" rel="noopener noreferrer">#808</a></li><li>Addressed a user request by only sending <code>Greetings</code> once <a href="https://github.com/input-output-hk/hydra/issues/813" target="_blank" rel="noopener noreferrer">#813</a></li></ul></li><li>Reproduced the rollback bug by improving our model-based test suite <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Update dependencies to match <code>cardano-node</code> master</li><li>Dirt road fix for rollbacks <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a></li><li>Update Hydraw to maintain state locally</li><li>Explore adding Hydra support to kupo</li><li>Put disclaimer texts and closing mainnet compatibility feature <a href="https://github.com/input-output-hk/hydra/issues/713" target="_blank" rel="noopener noreferrer">#713</a></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-04-07-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-07-hydra"/>
        <updated>2023-04-07T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team published the monthly report for March, created
separate links for different versions of documentation, and clarified potential
solutions for the Rollbacks bug. The team also discussed Query API requests for
the Hydra Voting project and met with community members to answer questions
about Hydra. Moving forward, the team plans to integrate the specification into
the repository, implement a short-term fix for the Rollbacks issue, and draft a
Query API ADR.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Published monthly reports on <a href="https://hydra.family/head-protocol/monthly/2023-03" target="_blank" rel="noopener noreferrer">website</a></li><li>Separate last released and latest versions of docs (e.g. normal <a href="https://hydra.family/head-protocol/core-concepts/behavior/#replay-of-past-server-outputs" target="_blank" rel="noopener noreferrer">released</a> vs. <a href="https://hydra.family/head-protocol/unstable/core-concepts/behavior/#replay-of-past-server-outputs" target="_blank" rel="noopener noreferrer">/unstable</a>)</li><li>Discussed Query API concerns from Hydra Voting project (<a href="https://github.com/input-output-hk/hydra/discussions/797" target="_blank" rel="noopener noreferrer">link</a>)</li><li>Clarified rollbacks bug and defined possible solutions (short and long term) <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a></li><li>Met with community members to answer questions about Hydra</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Finally get the docs integrated into the repository <a href="https://github.com/input-output-hk/hydra/issues/693" target="_blank" rel="noopener noreferrer">#693</a></li><li>Dirt road fix for rollbacks <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a></li><li>Disclaimer text and detail known issues about mainnet compatibility
<a href="https://github.com/input-output-hk/hydra/issues/713" target="_blank" rel="noopener noreferrer">#713</a></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-04-06-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-06-mithril"/>
        <updated>2023-04-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2313.0" target="_blank" rel="noopener noreferrer"><code>2313.0</code></a> distribution that implements minor improvements and bug fixes. They continued implementing the migration of the aggregator stores to a relational design. They finished adaptating and migrating the certificate, epoch settings, signed entity type, signer registration and open message stores. Additionally, they completed the refactoring of the dependency injector of the aggregator and simplified its multi-signer in order for it to sign multiple concurrent messages.</p><p>Finally, the team has worked on designing the new architecture of the network to support signing multiple types of data and upgraded the version of the Cardano node used in the Mithril testnets and devnet to <code>1.35.6</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Released the new distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2313.0" target="_blank" rel="noopener noreferrer"><code>2313.0</code></a></li><li>Worked on the epic that implements a relational store in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/779" target="_blank" rel="noopener noreferrer">#779</a>:<ul><li>Completed the migration/adaptation of the <code>epoch_settings</code> table <a href="https://github.com/input-output-hk/mithril/issues/813" target="_blank" rel="noopener noreferrer">#813</a></li><li>Completed the migration/adaptation of the <code>signed-entity-type</code> table <a href="https://github.com/input-output-hk/mithril/issues/815" target="_blank" rel="noopener noreferrer">#815</a></li><li>Completed the migration/adaptation of the <code>certificate</code> table <a href="https://github.com/input-output-hk/mithril/issues/817" target="_blank" rel="noopener noreferrer">#817</a></li><li>Completed the migration/adaptation of the <code>open_message</code> table <a href="https://github.com/input-output-hk/mithril/issues/827" target="_blank" rel="noopener noreferrer">#827</a></li><li>Completed the migration/adaptation of the <code>signer_registration</code> table <a href="https://github.com/input-output-hk/mithril/issues/828" target="_blank" rel="noopener noreferrer">#828</a></li></ul></li><li>Completed the refactoring of the dependency injection of the aggregator <a href="https://github.com/input-output-hk/mithril/issues/823" target="_blank" rel="noopener noreferrer">#823</a></li><li>Completed the cleanup of the multi-signer of the aggregator <a href="https://github.com/input-output-hk/mithril/issues/824" target="_blank" rel="noopener noreferrer">#824</a></li><li>Completed the upgrade of the Cardano node to <code>1.35.6</code> <a href="https://github.com/input-output-hk/mithril/issues/843" target="_blank" rel="noopener noreferrer">#843</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-04-05-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-05-consensus"/>
        <updated>2023-04-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week the consensus team finished the UTxO-HD prototype refactoring. We are
now working on improving the DB lock mechanism to improve performance. We also
introduced several improvements to the file system abstraction and simulation
layer (<code>fs-sim</code>), which culminated in the release of <code>fs-sim-0.1.0.0</code> and
<code>fs-api-0.1.0.0</code> to <code>CHaP</code>.</p><p>On the Genesis front we distributed the updated Genesis design document,
soliciting feedback from Networking Team and IOG Researchers. We also opened up
a PR for the adversarial leader schedule <code>QuickCheck</code> generator, which is being
reviewed.</p><p>On the support front, we got a new Consensus version that can use different
fundamental VRF crypto primitives for Babbage and Conway eras.</p><p>On the tech debt front we fixed an bug in the followers logic, which was
discovered by our <code>QuickCheck</code> property tests.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-04-05-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-05-node-cli-api"/>
        <updated>2023-04-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-04-05 - 2023-04-19</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Introduce new governance commands create, answer and verify. This allows us to have onchain polls.</li><li>Begin making changes in cardano-api to accomodate for CIP-1694</li><li>Rename <code>TestEnableDevelopmentHardForkEras</code> to <code>ExperimentalHardForksEnabled</code> and <code>TestEnableDevelopmentNetworkProtocols</code> to <code>ExperimentalProtocolsEnabled</code></li><li>Various bug fixes and improvements </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5112" target="_blank" rel="noopener noreferrer">Add new interim governance commands: {create, answer, verify}-poll</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5061" target="_blank" rel="noopener noreferrer">Remove --stake-address option from stake-address build</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5059" target="_blank" rel="noopener noreferrer">Frozen callstack for checkTextEnvelopeFormat function</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5053" target="_blank" rel="noopener noreferrer">#5052 Remove reading protocol parameters from Shelley genesis file</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5046" target="_blank" rel="noopener noreferrer">Move parsers to reusable location</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4910" target="_blank" rel="noopener noreferrer">New --socket-path cli option</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5108" target="_blank" rel="noopener noreferrer">CIP-1694 make space for DRep certificates</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5105" target="_blank" rel="noopener noreferrer">File type to track the content and direction of files</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5087" target="_blank" rel="noopener noreferrer">Fix import warning</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5086" target="_blank" rel="noopener noreferrer">Expose UsingRawBytes et al types</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5085" target="_blank" rel="noopener noreferrer">Expose SerialiseAsRawBytesError in Cardano.Api</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5072" target="_blank" rel="noopener noreferrer">Introduce new AnyShelleyBasedEra type and simplify CDDL tests.</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5071" target="_blank" rel="noopener noreferrer">New genCardanoKeyWitness function</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5069" target="_blank" rel="noopener noreferrer">Replace roundtripCBOR with trippingCbor</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5064" target="_blank" rel="noopener noreferrer">Remove non-round-trippable value TxInsReferenceNone for babbage onwards in generator</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5063" target="_blank" rel="noopener noreferrer">Improve roundtrip functions to report annotations on callsite</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5057" target="_blank" rel="noopener noreferrer">Define Functor instance for FileError</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5049" target="_blank" rel="noopener noreferrer">Split serialisation from IO</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5115" target="_blank" rel="noopener noreferrer">Master build failure fixes</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5106" target="_blank" rel="noopener noreferrer">Allow renamed fields to exist if values the same</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5091" target="_blank" rel="noopener noreferrer">workbench: updates</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5084" target="_blank" rel="noopener noreferrer">Delete duplicate packages sort packages and imports</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras and TestEnableDevelopmentNetworkProtocols</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5110" target="_blank" rel="noopener noreferrer">Additional check for not-leader slots in LeadershipSchedule tests</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5099" target="_blank" rel="noopener noreferrer">Fix epochLength and securityParam to conform to the formula 10 * k / f</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5083" target="_blank" rel="noopener noreferrer">Ergonomic directory creation code in tests</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5036" target="_blank" rel="noopener noreferrer">Default Cardano.Testnet to NodeLoggingFormatAsJson</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5013" target="_blank" rel="noopener noreferrer">Integrate latest ledger dependencies</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-04-05-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-04-05-performance-and-tracing"/>
        <updated>2023-04-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[* Benchmarking: We worked on adjusting our infrastructure to the new 8.0 release branch and performed a (very) early run.]]></summary>
        <content type="html"><![CDATA[<ul><li>Benchmarking: We worked on adjusting our infrastructure to the new <code>8.0</code> release branch and performed a (very) early run.</li><li>New tracing: We're profiling the new tracing system for minimizing its resource footprint and guarantee high throughput.</li><li>Analysis pipeline: Variance analysis both for reporting and for serving as a point of comparison has been merged.</li><li>Infrastructure: A library for Plutus scripts will be integrated in our tooling and benchmarking profiles. Also, a profile family aimed at the tracing systems has been added.</li><li>Nomad backend: Various specializations of the backend are currently being implemented, along with streamlining credentials management.</li></ul><h1>Benchmarking</h1><p>We have adapted our benchmarking cluster to the requirements of the <code>8.0</code> release branch. Testing runs of a very early feature branch for <code>8.0</code>
helped us localize an important issue in collaboration with the other teams. We look forward to gathering preliminary metrics for <code>8.0</code> soon.</p><h1>Tracing</h1><p>Analysis of resource usage profiles of both the legacy and new tracing system, with and without trace forwarding, have lead us to gather very
detailed profiling data for each possible setup. This is to ensure we keep resource usage within the node to an absolute minimum, while still providing
the highest possible throughput of data for forwarding to <code>cardano-tracer</code>.   </p><p>Additionally, we've worked on a very practically-oriented document targeted at end users of the new tracing system. It provides tested step-by-step instructions
for tunneling trace forwarding from a node to <code>cardano-tracer</code> via an easy to manage system service, which will match the production setup of most users.</p><h1>Infrastructure &amp; Analysis</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a class="hash-link" href="#general" title="Direct link to heading">​</a></h3><p>Variance analysis as a full-fledged entity in our tooling has been merged. Not only is this type of analysis now part of our reporting pipeline - variance
analysis can be fed back and serve as an additional point of comparison.</p><p>Furthermore, we've created a profile family for the workbench that's specifically aimed at measuring and comparing tracing system configurations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="plutus-library">Plutus library<a class="hash-link" href="#plutus-library" title="Direct link to heading">​</a></h3><p>We opened a PR containing a new package for benchmarking - an extendable library that holds all Plutus scripts we use in our benchmarking profiles.
This will enable us in the future to iteratively work on customizing any given script, and the way is called in the context of a specific profile.
It is a refinement of current affairs, where we have additional build inputs solely to generate a static script file tied to an external commit.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>The nomad backend is being specialized in three ways: using a podman driver locally, using nomad agents supporting nix installables, and using nomad cloud agents. This supports having a common surface independent of the actual backend driver being used. In addition, vault retrieval and management of cloud access credentials is
being improved to minimize any friction for the backend user.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-03-31-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-31-crypto"/>
        <updated>2023-03-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>Mithril: Started looking into full-node verifier</li><li>cardano-base: BLS12-381's PR merged. Creating test-vectors for verifying basic pairing properties.</li><li>KES agent: Blockers overcome. Reaching a first MVP level of the KES-agent.  </li><li>Sidechains: Included BLS12-381 &amp; JubJub to halo2curves</li><li>MuSig2: Final modifs to C version.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>Started designing how a full-node verifier would work. Issue comming in the next couple of weeks. </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>BLS12-381 branch merged <a href="https://github.com/input-output-hk/cardano-base/pull/266" target="_blank" rel="noopener noreferrer">PR#266</a>. </li><li>Testing strategy for BLS bindings:<ul><li>Test-vectors for Groth16, and simple BLS signatures ready.</li><li>Test-vectors with different library, and created by different engineer. </li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>Resolved issues of circular dependency</li><li>Got rid of separate DSIGN and DSIGNM, we now have DSIGN over mlocked keys, but the phantom type is the same.  </li><li>Opened a PR for raw bearer branch in ouroboros network <a href="https://github.com/input-output-hk/ouroboros-network/pull/4395" target="_blank" rel="noopener noreferrer">PR4395</a></li><li>Resolved a bug where the agent node did not properly closed connections</li><li>Updated version of <a href="https://github.com/input-output-hk/io-sim/pull/70" target="_blank" rel="noopener noreferrer">IOSim</a> allowed us to finish a first version of KES agent.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sidechains">Sidechains<a class="hash-link" href="#sidechains" title="Direct link to heading">​</a></h3><ul><li>Included <a href="https://github.com/iquerejeta/halo2curves/commit/1ccf987b772dcfaa3c1e3439a4a28f23fcf07c7a" target="_blank" rel="noopener noreferrer">BLS12-381</a> curve to our branch of halo2curves</li><li>Included <a href="https://github.com/iquerejeta/halo2curves/commit/3f20edb2ed112733a0a0986b0a0386c1b9bc439f" target="_blank" rel="noopener noreferrer">JubJub</a> to our branch of halo2curves </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="musig2">MuSig2<a class="hash-link" href="#musig2" title="Direct link to heading">​</a></h3><ul><li>Minor reorg <a href="https://github.com/input-output-hk/musig2/pull/42" target="_blank" rel="noopener noreferrer">PR#42</a></li><li>Started including fuzz testing for deserialisation <a href="https://github.com/input-output-hk/musig2/pull/43" target="_blank" rel="noopener noreferrer">PR#</a></li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-03-31-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-31-goedel"/>
        <updated>2023-03-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has been working on final drafts of two papers
for internal review and planning next steps of analysis of consensus
design refiniments.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Preparing final draft of DeltaQSD algebra paper for internal review</p></li><li><p>Preparing final draft of verifying design refinements for
distributed system design for internal review</p></li><li><p>Planning next phase of consensus design refinement analysis</p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-03-31-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-31-hydra"/>
        <updated>2023-03-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra continued work on finishing mainnet compatibility. The
semi-automated smoke tests and some missing documentation is still preventing
from calling that fully done. They fixed smaller issues and made a step in the
Head protocol more robust. Besides development, they met with interested people
from the community who want to get started collaborating on communication and
marketing materials.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Groomed and followed-up on <code>GetUTxO</code> user request discussion <a href="https://github.com/input-output-hk/hydra/discussions/797" target="_blank" rel="noopener noreferrer">#797</a></li><li>Fixed <code>hydra-node</code> crashes after forks <a href="https://github.com/input-output-hk/hydra/issues/560" target="_blank" rel="noopener noreferrer">#560</a></li><li>Made <code>collectCom</code> more robust and aligned with spec <a href="https://github.com/input-output-hk/hydra/pull/786" target="_blank" rel="noopener noreferrer">#786</a></li><li>Completed configurable API feature <a href="https://github.com/input-output-hk/hydra/issues/380" target="_blank" rel="noopener noreferrer">#380</a></li><li>Met potential contributors about Hydra communication and marketing materials</li><li>Versioned documentation: we have a <code>unstable</code> bleeding edge version available as well now, seperate from the last released version</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Follow-up backlog and roadmap clean-up</li><li>Complete mainnet compatibility feature <a href="https://github.com/input-output-hk/hydra/issues/713" target="_blank" rel="noopener noreferrer">#713</a> (documentation updates)</li><li>Integrate Hydra specification into repository <a href="https://github.com/input-output-hk/hydra/issues/693" target="_blank" rel="noopener noreferrer">#693</a></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-03-31-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-31-ledger"/>
        <updated>2023-03-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We are still heavily involved in work related to preparing the next release.
The other main thing we have worked on is experimentation about how we will
handle the DRep stake distribution for CIP-1694 in the conway ledger era.
Lastly, we merged a fix for
<a href="https://github.com/input-output-hk/cardano-node/issues/4826" target="_blank" rel="noopener noreferrer">node-4826</a>
into our main branch (there will be a post-mortem shortly).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support-for-the-next-release">Support for the next release<a class="hash-link" href="#support-for-the-next-release" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3363" target="_blank" rel="noopener noreferrer">pull-3363</a> - Fix problems relating to Arbitrary instances used by consensus.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3361" target="_blank" rel="noopener noreferrer">pull-3361</a> - Remove the alonze genesis from the conway genesis.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3360" target="_blank" rel="noopener noreferrer">pull-3360</a> - Translate bad pointer addresses to valid ones in conway.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3357" target="_blank" rel="noopener noreferrer">pull-3357</a> - Fix a bug relating to zero valued ADA in the script context.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3356" target="_blank" rel="noopener noreferrer">pull-3356</a> - Added needed instances (Arbitrary and Serialization) for conway integration.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3345" target="_blank" rel="noopener noreferrer">pull-3345</a> - Added helper functions for the CLI.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3342" target="_blank" rel="noopener noreferrer">pull-3342</a> - Fix a bug with a CLI helper function (having to do with deposit tracking).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="experiments-for-drep-stake-distribution">Experiments for DRep stake distribution<a class="hash-link" href="#experiments-for-drep-stake-distribution" title="Direct link to heading">​</a></h3><p>Adding another stake distribution to the ledger state presents some new challenges.
We would like to be able to use the current stake distribution at the epoch boundary
for DRep voting so that people can always vote themselves in time for any proposal.
To this end, we have a prototype of an incremental computation based on the incremental
lambda calculus, together with tests and benchmarks (which are very promising).
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3344" target="_blank" rel="noopener noreferrer">pull-3344</a>.</p><p>Additionally, more of the ledger state is going to need to be rearranged to accomodate
the new incremental computations.
We have two draft PRs up for possibles solution.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3353" target="_blank" rel="noopener noreferrer">pull-3353</a> and <a href="https://github.com/input-output-hk/cardano-ledger/pull/3364" target="_blank" rel="noopener noreferrer">pull-3364</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt-and-bug-fixes">Technical debt and bug fixes<a class="hash-link" href="#technical-debt-and-bug-fixes" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3343" target="_blank" rel="noopener noreferrer">pull-3343</a> - A fix <a href="https://github.com/input-output-hk/cardano-node/issues/4826" target="_blank" rel="noopener noreferrer">node-4826</a>.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3333" target="_blank" rel="noopener noreferrer">pull-3333</a> - Moving more code out of the shelley packages. </li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3347" target="_blank" rel="noopener noreferrer">pull-3347</a> - Bug fix for the multi-asset generators.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3341" target="_blank" rel="noopener noreferrer">pull-3341</a> - Removal of code duplication.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="documentation-changes">Documentation changes<a class="hash-link" href="#documentation-changes" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3354" target="_blank" rel="noopener noreferrer">pull-3354</a> - Rename "optional datums" with "supplemental datums" in the alonzo spec.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3352" target="_blank" rel="noopener noreferrer">pull-3352</a> - Add a section to the Shelly errata about the individual deposit tracking.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3351" target="_blank" rel="noopener noreferrer">pull-3351</a> - Further clarify the details regarding the script integrity hash.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3350" target="_blank" rel="noopener noreferrer">pull-3350</a> - Some cleanup of the Babbage spec.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[System Test Team Update]]></title>
        <id>2023-03-27-system-test</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-27-system-test"/>
        <updated>2023-03-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>Since the last update (2023-1-13) we did more improvements on our Test Framework, added more automated tests, kept analyzing and fixing nightly jobs failures, tested the <em>1.35.5</em> and <em>1.35.6</em> releases (and their predecessing release candidates) and ran tests on branch with the <em>UTxO-HD</em> functionality.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="framework-improvements">Framework improvements:<a class="hash-link" href="#framework-improvements" title="Direct link to heading">​</a></h3><ul><li>improvements in searching for unexpected error messages in log files during test run</li><li>added support for UTxO-HD testing</li><li>added support for the new P2P topology format</li><li>added local cluster variant that has the same properties as mainnet (epoch length, fees, etc.)</li><li>added preliminary support for the Conway era</li><li>added support for running tests on the <em>Preview</em> testnet</li></ul><p><a href="https://github.com/input-output-hk/cardano-node-tests/pulls?q=is%3Apr+is%3Aclosed+updated%3A2023-01-13..2023-03-26" target="_blank" rel="noopener noreferrer">Full list of closed PRs</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node">Node:<a class="hash-link" href="#node" title="Direct link to heading">​</a></h3><ul><li>ran tests on node branch with the UTxO-HD functionality</li><li>tested the <a href="https://input-output-hk.github.io/cardano-node-tests/test_results/node/tag_1_35_5.html" target="_blank" rel="noopener noreferrer">1.35.5</a> release</li><li>tested the <a href="https://input-output-hk.github.io/cardano-node-tests/test_results/node/tag_1_35_6.html" target="_blank" rel="noopener noreferrer">1.35.6</a> release</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="db-sync">DB-Sync:<a class="hash-link" href="#db-sync" title="Direct link to heading">​</a></h3><ul><li>improvements in db-sync sync tests</li><li>improvements in db-sync functional tests</li></ul>]]></content>
        <author>
            <name>Martin Kourim</name>
            <uri>https://github.com/mkoura</uri>
        </author>
        <category label="system-test" term="system-test"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-03-24-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-24-hydra"/>
        <updated>2023-03-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra had a team workshop and conducted the monthly review
meeting for March. They demonstrated a Hydra Head on mainnet, which was running
the hydraw demo application. While this marks an important milestone, they also
emphasized that more features are still to be added as needed for applications
to run on Hydra. Besides this, the roadmap is getting cleaned up to encourage
discussions and provide more space for user requests.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Monthly review meeting <a href="https://docs.google.com/presentation/d/1yZ4AqUQ8OBMG9ARMYvj3IOjaIAqglf7kZei4vsLMrbs/edit#slide=id.g1f87a7454a5_0_1392" target="_blank" rel="noopener noreferrer">slides</a>/<a href="https://drive.google.com/file/d/1krzM8VN-gpKTtpVdC2JQx-lGti-4gKQS/view?ts=641b3c1c" target="_blank" rel="noopener noreferrer">recording</a>, full report of March next week<ul><li>Opened a head on mainnet with hydraw demonstration</li><li>Hydra pay updates</li></ul></li><li>Team workshop in Austria<ul><li>Hydra presentation at the Cardano Foundation in Zurich</li><li>In-person grooming session, marked many items as candidates to be rather :idea: dicussions</li><li>Improved head protocol <a href="https://github.com/input-output-hk/hydra/pull/786" target="_blank" rel="noopener noreferrer">#786</a> and investigated a potential bug in rollback handling <a href="https://github.com/input-output-hk/hydra/issues/784" target="_blank" rel="noopener noreferrer">#784</a></li><li>Team building and retrospective</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Follow-up on backlog and roadmap clean-up</li><li>Complete mainnet compatibility feature (documentation updates)</li><li>Make API more configurable <a href="https://github.com/input-output-hk/hydra/issues/380" target="_blank" rel="noopener noreferrer">#380</a></li><li>Integrate Hydra specification into repository <a href="https://github.com/input-output-hk/hydra/issues/693" target="_blank" rel="noopener noreferrer">#693</a></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB-sync Team Update]]></title>
        <id>2023-03-23-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-23-db-sync"/>
        <updated>2023-03-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The DBSync team worked in performance enhancements issues, on providing new db-sync options and on
technical debt and bug fixing. The DBSync team also on boarded a new member.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><ul><li>Worked on an issue which causes <code>ada_pots</code> tables to include the values related not only to an
epoch, but also the first epoch of the last epoch.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1367" target="_blank" rel="noopener noreferrer">#1367</a></li><li>Fixed an issue where the <code>epoch</code> table didn't rollback and caused wrong values
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1370" target="_blank" rel="noopener noreferrer">#1370</a></li><li>Fixed an issue were users with <code>disable-ledger</code> option had to provide the state dir option, even
though it was never used. Also refactored the no ledger part of the codebase.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1378" target="_blank" rel="noopener noreferrer">#1378</a></li><li>Improved the perforance by using the cache more. Also provided many new options which enables or
disables parts of db-sync. In addition a new <code>--turbo</code> mode is enables which allows db-sync to sync
mainnet in hours.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1379" target="_blank" rel="noopener noreferrer">#1379</a></li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-03-23-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-23-mithril"/>
        <updated>2023-03-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2310.0" target="_blank" rel="noopener noreferrer"><code>2310.0</code></a> distribution that activates the era switch mechanism. They also kept implementing the migration of the aggregator stores to a relational design with the first adaptation of the stake pool store, and then the adaptation of the epoch settings &amp; signed entity type stores. They have implemented the handling of the network API version from the Open API specifications and its automatic switch at era transition. Additionally, they optimized the stake distribution computation that now happens only once per epoch, and also enhanced the client multi-platform workflow to test the Docker images.</p><p>Finally, they have successfully completed the tests to create certificates and snapshots on a network running on the Cardano <code>mainnet</code> and they have fixed some bugs. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Completed the epic that implements eras behavior switch <a href="https://github.com/input-output-hk/mithril/issues/707" target="_blank" rel="noopener noreferrer">#707</a>:<ul><li>Completed handling the API version switch at era transition <a href="https://github.com/input-output-hk/mithril/issues/727" target="_blank" rel="noopener noreferrer">#727</a></li></ul></li><li>Worked on the epic that implements a relational store in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/779" target="_blank" rel="noopener noreferrer">#779</a>:<ul><li>Completed on the migration/adaptation of the <code>stake_pool</code> table <a href="https://github.com/input-output-hk/mithril/issues/787" target="_blank" rel="noopener noreferrer">#787</a></li><li>Worked on the migration/adaptation of the <code>epoch_settings</code> table <a href="https://github.com/input-output-hk/mithril/issues/813" target="_blank" rel="noopener noreferrer">#813</a></li><li>Worked on the migration/adaptation of the <code>signed-entity-type</code> table <a href="https://github.com/input-output-hk/mithril/issues/815" target="_blank" rel="noopener noreferrer">#815</a></li><li>Completed the creation of a stake distribution service <a href="https://github.com/input-output-hk/mithril/issues/799" target="_blank" rel="noopener noreferrer">#799</a></li></ul></li><li>Completed the testing of Mithril with Cardano <code>mainnet</code> network <a href="https://github.com/input-output-hk/mithril/issues/777" target="_blank" rel="noopener noreferrer">#777</a></li><li>Completed qualifying the computation of the stake distribution <a href="https://github.com/input-output-hk/mithril/issues/810" target="_blank" rel="noopener noreferrer">#810</a></li><li>Completed the testing of the Docker client in the <code>Mithril Client multi-platform test</code> workflow <a href="https://github.com/input-output-hk/mithril/issues/794" target="_blank" rel="noopener noreferrer">#794</a></li><li>Worked on bugs and optimizations:<ul><li>Fixed a bug that made computation of the stake distribution occur multiple times during an epoch <a href="https://github.com/input-output-hk/mithril/issues/804" target="_blank" rel="noopener noreferrer">#804</a></li><li>Fixed a bug that created deadlocks on the SQLite connection <a href="https://github.com/input-output-hk/mithril/issues/807" target="_blank" rel="noopener noreferrer">#807</a></li><li>Optimized the error message and the behavior of the signer node when KES keys have expired <a href="https://github.com/input-output-hk/mithril/issues/820" target="_blank" rel="noopener noreferrer">#820</a></li><li>Upgraded the infrastructure of the <code>testing-preview</code> and <code>pre-release-preview</code> networks <a href="https://github.com/input-output-hk/mithril/issues/801" target="_blank" rel="noopener noreferrer">#801</a></li><li>Re-genesis of the <code>testing-preview</code> network <a href="https://github.com/input-output-hk/mithril/issues/803" target="_blank" rel="noopener noreferrer">#803</a></li><li>Re-genesis of the <code>pre-release-preview</code> network <a href="https://github.com/input-output-hk/mithril/issues/818" target="_blank" rel="noopener noreferrer">#818</a></li></ul></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-03-22-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-22-consensus"/>
        <updated>2023-03-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week the consensus team continued working on the refactoring of the UTxO HD
prototype, and design and testing of Genesis. We also extracted the <code>fs-sim</code>
package, which provides a file-system abstraction layer that can be used for
testing and simulation. This makes the Consensus code base smaller, while
providing a package that the community can reuse and contribute to. We also
fixed a failing property test related to iterators. We are also working on
mempool and VRF improvements.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-details">Low-level details<a class="hash-link" href="#low-level-details" title="Direct link to heading">​</a></h2><ul><li>Extraction of <code>fs-sim</code> code from <code>ouroboros-network</code>:<ul><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4425" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/ouroboros-network/pull/4425</a></li><li><a href="https://github.com/input-output-hk/fs-sim/pull/1" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/fs-sim/pull/1</a></li><li><a href="https://github.com/input-output-hk/fs-sim/pull/2" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/fs-sim/pull/2</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4460" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/ouroboros-network/pull/4460</a></li></ul></li><li>Smaller changes in <code>fs-sim</code> code (some required by <code>UTxO-HD</code>):<ul><li><a href="https://github.com/input-output-hk/fs-sim/pull/5" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/fs-sim/pull/5</a></li><li><a href="https://github.com/input-output-hk/fs-sim/pull/6" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/fs-sim/pull/6</a></li><li><a href="https://github.com/input-output-hk/fs-sim/pull/7" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/fs-sim/pull/7</a></li><li><a href="https://github.com/input-output-hk/fs-sim/pull/8" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/fs-sim/pull/8</a></li></ul></li><li>Released cardano-lmdb-simple-0.6.0.0<ul><li><a href="https://github.com/input-output-hk/lmdb-simple/pull/20" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/lmdb-simple/pull/20</a></li><li><a href="https://github.com/input-output-hk/cardano-haskell-packages/pull/150" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-haskell-packages/pull/150</a></li></ul></li></ul>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-03-22-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-22-node-cli-api"/>
        <updated>2023-03-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-03-22 - 2023-04-05</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Added new cardano-cli ping command which allows users to ping remote cardano-nodes.</li><li>The <code>transaction build</code> command now can automatically balance multiassets</li><li>New combinators for constructing transaction bodies. This allows us to construct transaction bodies in a composable manner.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5041" target="_blank" rel="noopener noreferrer">Remove unused error constructors</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4909" target="_blank" rel="noopener noreferrer">Fix qKesKesKeyExpiry to not always be null</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">New cardano-cli ping command.</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5040" target="_blank" rel="noopener noreferrer">Remove use of AcquireFailure type</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5038" target="_blank" rel="noopener noreferrer">Simplify implementation of executeQueryAnyMode</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5002" target="_blank" rel="noopener noreferrer">Script data serialisation</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4956" target="_blank" rel="noopener noreferrer">Guard against overflows in Shelley TxIns</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4941" target="_blank" rel="noopener noreferrer">Combinators for TxBodyContent and related types</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5011" target="_blank" rel="noopener noreferrer">Use Haskell variables for passing values.</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4879" target="_blank" rel="noopener noreferrer">Re-enable kes-period-info test.</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-03-22-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-22-performance-and-tracing"/>
        <updated>2023-03-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[* Benchmarking: We performed benchmarks for the new tracing system, and started benchmarking for varying GHC RTS configurations.]]></summary>
        <content type="html"><![CDATA[<ul><li>Benchmarking: We performed benchmarks for the new tracing system, and started benchmarking for varying GHC RTS configurations.</li><li>New tracing: Backwards compatibility with legacy tracer nomenclature has been merged; we're currently improving documentation and creating setup guidelines for end users.</li><li>Analysis pipeline: Our refined metrics PR has been merged. We're working on including variance analysis to our reporting machinery.</li><li>Infrastructure: Support for Conway genesis in our workbench has been merged. At the moment, we're laying the groundwork for enabling GHC 9.2 in our benchmarks.</li><li>Open Sourcing: The API demo has reached prototype phase; work on documenting the API and providing exemplifying use cases is ongoing.</li><li>Nomad backend: The nomad-exec based task driver has been merged. The backend has been equipped with the capability for genesis distribution via S3 bucket.</li></ul><h1>Performance</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-tracing">New tracing<a class="hash-link" href="#new-tracing" title="Direct link to heading">​</a></h3><p>The new tracing system has undergone various benchmarking runs with variance analysis, and comparison to a baseline using legacy tracing. We could observe
a slight shift in the resource usage profile from memory to CPU, but no regressions in block propagation metrics. Variance was observed to be notably smaller, which gives the new system a much better predictability. From this angle, we consider the new system fit for production use.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ghc-rts-parametrization">GHC RTS parametrization<a class="hash-link" href="#ghc-rts-parametrization" title="Direct link to heading">​</a></h3><p>We're currently prerforming various runs on the cluster to explore the space of different GHC RTS settings for running nodes. The main focus lies
on different configurations for the garbage collector, as well as increasing the number of CPU cores the node may use.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-sourcing">Open Sourcing<a class="hash-link" href="#open-sourcing" title="Direct link to heading">​</a></h3><p>Our API demo has reached prototype stage, and operates on live data from the production database. Making use of the experience gained, we're refining version 1 of the API to provide optimized usability, and creating documentation that both is descriptive of the API endpoints, and focuses on practical, exemplary use cases.</p><h1>Tracing</h1><p>For the new tracing system we're currently undertaking an effort to multi-layered documentation: a condensed version, as well
as a setup guide with pragmatical focus, will be provided alongside the in-depth documentation. This effort should cater to different audiences, and provide distinct entry points
for users of the new system, depending on their wants and needs. </p><h1>Infrastructure &amp; Analysis</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a class="hash-link" href="#general" title="Direct link to heading">​</a></h3><p>Having included Conway genesis in the workbench, as a next step in future-proofing out benchmarking infrastructure, we're laying the foundation for a switch in compiler version to GHC 9.2. Additionally, we considered variance analysis of our runs to merit inclusion into our reporting pipeling - which will
increase confidence in specific metrics.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>We have implemented an appropriate mechanism for genesis distribution: Only after a benchmarking cluster has been deployed successfully, genesis
is patched and uploaded to an AWS S3 bucket for the nodes to retrieve - as a final step before initiating the actual run. We're confident that this deferred approach will provide clearer evidence for genesis patches, as well as minimize startup time for all runs by factoring in deployment re-tries.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-03-21-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-21-network"/>
        <updated>2023-03-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>In the last spring we released <code>cardano-node-1.35.6</code> with dynamic P2P
functionality.</p><p>We received reports from some SPOs who encountered problems with their non
P2P block producing nodes not being able to connect to their P2P relay.  Karl
Knutsson (from Cardano Foundation) reproduced this issue between two nodes (a
non P2P and a P2P one) on mainnet.  Karl and the IOG Networking Team analysed
it and found a bug in the legacy non p2p code.  The bug is only possible to
trigger with a P2P node which is binding its outbound connection port to
a fixed IP address and port (default in p2p).  A possible solution was found.
For more information see <a href="https://github.com/input-output-hk/ouroboros-network/issues/4465" target="_blank" rel="noopener noreferrer">#4465</a>.</p><p>We released <code>cardano-ping-0.1.0.0</code> package to <code>CHaP</code>.  <code>cardano-ping</code> is no
longer available as a standalone binary, but instead it will become part of
<code>cardano-cli</code> (see <a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">#4664</a>)</p><p>We are testing <code>cardano-node</code> with peer sharing functionality (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4019" target="_blank" rel="noopener noreferrer">#4019</a>).</p><p>We are working on <em>eclipse evasion</em>.  We added new class of peers: big ledger
peers to the outbound governor, implemented tests and fixed found issues
(<a href="https://github.com/input-output-hk/ouroboros-network/pull/4462" target="_blank" rel="noopener noreferrer">#4462</a>).  We also made the information if a given peer plays the role of
a big ledger peer to the mini-protocols.  This will allow to modify
mini-protocol applications for such peers.   As part of this functionality we
refactored some core types in the network code which simplifies exposed API.</p><p>Together with Moritz Angerman we started to update <code>io-sim</code> to <code>ghc-9.6.1</code> (see
<a href="https://github.com/input-output-hk/io-sim/pull/73" target="_blank" rel="noopener noreferrer">#73</a>).</p><p>We merged a fix of configuration of accepted connections limit in
<code>cardano-node</code> (see <a href="https://github.com/input-output-hk/cardano-node/pull/4902" target="_blank" rel="noopener noreferrer">#4902</a>).</p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-03-17-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-17-crypto"/>
        <updated>2023-03-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>Mithril: RFP finished. Code ready for audit.</li><li>cardano-base: BLS12-381's PR approved, only blocker is Windows' CI. Preparing extensive testing strategy together with Plutus and Testing teams.</li><li>KES agent: Working on a desing on how to use IO sim in order to allow for proper network simulation testing.</li><li>Sidechains: Preparing proving system to use the curves needed for main-net PoC.  </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>Merged <a href="https://github.com/input-output-hk/mithril/pull/783" target="_blank" rel="noopener noreferrer">PR#783</a></li><li>RFP for crypto audit ready.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>BLS12-381 branch approved <a href="https://github.com/input-output-hk/cardano-base/pull/266" target="_blank" rel="noopener noreferrer">PR#266</a>. Blocker is Windown's CI. Working on it</li><li>Testing strategy for BLS bindings:<ul><li>Preparing test-vectors for Groth16, and simple BLS signatures</li><li>Finding community projects to help write their use cases</li><li>Designing AC, and expected tests for higher levels of development (Plutus team, E2E tests, etc)</li></ul></li><li>Wrote <a href="https://github.com/input-output-hk/blogpost_breaking_ed25519_vrf/blob/main/blog.md" target="_blank" rel="noopener noreferrer">blogpost</a> on how using the same key for ed25519 and VRF completely breaks the security of both systems </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>Started integration of sockets interface used in consensus</li><li>Use that for de/ser</li><li>Resolving problems with block memory in IOSim. Can't use withForeignPtr in IOSim</li><li>Results in having to parametrise for IOSim in KES and DSIGN for testing</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sidechains">Sidechains<a class="hash-link" href="#sidechains" title="Direct link to heading">​</a></h3><ul><li>Prepared an API for proof generation in sidechains, with it's C API for integration with JVM languages.</li><li>Design document and start interacting with researchers for concrete instantiation of SNARK-based ATMS.</li><li>EdDSA over JubJub ready</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-03-17-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-17-hydra"/>
        <updated>2023-03-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team has continued work on the mainnet compatibility of the
hydra-node. They added a golden test suite for <code>hydra-plutus</code> scripts, added
some detection of <code>hydra-node</code> misconfiguration, established a limit of 100 ADA
per commit and other smaller tasks to prepare for a mainnet beta release.</p><p>Next week there will be a small team workshop to push for demonstrating a Hydra
Head on the Cardano mainnet, ideally just in time for the monthly review
meeting. See the hydra channels on the IOG Technical Community discord server
for details.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Implement a 100 ADA hard-coded commit limit in the hydra-node
<a href="https://github.com/input-output-hk/hydra/pull/763" target="_blank" rel="noopener noreferrer">#763</a></li><li>Pay back funds to faucet after smoke-test run
<a href="https://github.com/input-output-hk/hydra/pull/773" target="_blank" rel="noopener noreferrer">#773</a></li><li>Setup custom github runner for smoke-tests on mainnet
<a href="https://github.com/input-output-hk/hydra/pull/775" target="_blank" rel="noopener noreferrer">#775</a></li><li>Created golden tests to assure the script hash stays the same between
changes <a href="https://github.com/input-output-hk/hydra/pull/772" target="_blank" rel="noopener noreferrer">#772</a></li><li>Removed hardcoded error codes in plutus scripts
<a href="https://github.com/input-output-hk/hydra/pull/768" target="_blank" rel="noopener noreferrer">#768</a></li><li>Detect misconfiguration of a hydra-node given persistent state
<a href="https://github.com/input-output-hk/hydra/pull/767" target="_blank" rel="noopener noreferrer">#767</a></li><li>Met with potential users for hydra-pay</li><li>Prepared hydra workshop</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Hydra monthly meeting</li><li>Open a multi-party head on mainnet</li><li>Complete mainnet compatibility feature</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-03-17-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-17-ledger"/>
        <updated>2023-03-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We made further progress on the conway ledger era.
In particular, we expanded the ledger API significantly, including lots of governance features.
We also made progress on the specification and corresponding work in the Haskell implementation.</p><p>We also continued to integrate the latest ledger packages into cardano node and addressed
technical debt.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="expanded-ledger-api">Expanded ledger API<a class="hash-link" href="#expanded-ledger-api" title="Direct link to heading">​</a></h3><p>The ledger API was significantly expanded to include:</p><ul><li>a lot of protocol parameter support</li><li>versioning support (type level ledger eras and protocol versions)</li><li>auxiliary data support</li><li>many new lenses</li><li>support for witnesses</li><li>support for conway governance</li></ul><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3328" target="_blank" rel="noopener noreferrer">pull-3328</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conway-ledger-rules">Conway ledger rules<a class="hash-link" href="#conway-ledger-rules" title="Direct link to heading">​</a></h3><p>We have made progress on the formal ledger specification for the Conway era.
Moreover, the corresponding Haskell updates were also completed:</p><ul><li>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3339" target="_blank" rel="noopener noreferrer">pull-3339</a></li><li>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3326" target="_blank" rel="noopener noreferrer">pull-3326</a></li><li>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3330" target="_blank" rel="noopener noreferrer">pull-3330</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="incremental-spodrep-stake-distribution-computation">Incremental SPO/DRep stake distribution computation<a class="hash-link" href="#incremental-spodrep-stake-distribution-computation" title="Direct link to heading">​</a></h3><p>We have a working (and correct) proof of concept for how to use the incremental lambda calculus
to maintain several of the stake distributions incrementally.
For the per-SPO distribution, this is a performance improvement.
For the (conway) per-DRep distribution, this is will allow those who have delegated their votes
to a DRep to have time to react to any votes that they disapprove of.
(Sorry, no code to share just yet, more to come.)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><ul><li>Improved CBOR testing facilities <a href="https://github.com/input-output-hk/cardano-ledger/pull/3332" target="_blank" rel="noopener noreferrer">pull-3332</a></li><li>GitHub actions improvement <a href="https://github.com/input-output-hk/cardano-ledger/pull/3320" target="_blank" rel="noopener noreferrer">pull-3320</a></li><li>Move ToJSON orphans from cardano-node <a href="https://github.com/input-output-hk/cardano-ledger/pull/3338" target="_blank" rel="noopener noreferrer">pull-3323</a></li><li>Minor OCert improvements <a href="https://github.com/input-output-hk/cardano-ledger/pull/3327" target="_blank" rel="noopener noreferrer">pull-3327</a></li><li>Remove duplication <a href="https://github.com/input-output-hk/cardano-ledger/pull/3341" target="_blank" rel="noopener noreferrer">pull-3341</a></li><li>Enforce unique elements in CBOR sets <a href="https://github.com/input-output-hk/cardano-ledger/pull/3331" target="_blank" rel="noopener noreferrer">pull-3331</a> </li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-03-16-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-16-goedel"/>
        <updated>2023-03-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has been working on drafts of two papers
improving the deltaQ tutorial, consulting on performance design, and
the final version of the Djed paper.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Preparing draft of DeltaQSD algebra paper for ICE 2023</p></li><li><p>Successful outcome of Marlowe consultancy leading to substantial
improvement in performance</p></li><li><p>Preparing sections on the communication language and bisimulation
proofs for draft paper about verifying design refinements for
distributed system design</p></li><li><p>Camera ready version of Djed paper under preparation</p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-03-10-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-10-hydra"/>
        <updated>2023-03-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team addressed issues with committing complex UTxOs into a
Hydra Head, prepared the <code>hydra-node</code> to be run on mainnet (soon) and improved
the test suite of the <code>hydra-plutus</code> scripts. The specification is constantly
getting improved upon reviewer feedback on overleaf - this week the graphical
notation was refined to be more transaction-focused.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Clarified <!-- -->“<!-- -->bug<!-- -->”<!-- --> of committing UTxOs with reference scripts to a Hydra head <a href="https://github.com/input-output-hk/hydra/issues/737" target="_blank" rel="noopener noreferrer">#737</a></li><li>Prepare usage of <code>hydra-node</code> on mainnet by updating command line options <a href="https://github.com/input-output-hk/hydra/pull/715" target="_blank" rel="noopener noreferrer">#715</a></li><li>Improved our mutation test suite to all expected errors <a href="https://github.com/input-output-hk/hydra/issues/705" target="_blank" rel="noopener noreferrer">#705</a></li><li>Re-opened our persistent hydraw demo head on <code>preprod</code> using version <code>0.9.0</code></li><li>Updated on-chain graphs to be more transaction-focused in the specification</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Complete mainnet compatibility feature</li><li>Prepare the Hydra workshop</li><li>Address all todo’s in the Hydra specification</li><li>Unblock the auctions project with <!-- -->“<!-- -->commit from script<!-- -->”<!-- --> a solution</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-03-09-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-09-mithril"/>
        <updated>2023-03-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team worked on deploying the era activation mechanism to their test networks and preparing the upgrade procedure to be implemented on the signer nodes run by the SPOs. They also refactored the state machines of the aggregator and signer nodes so that they can better handle critical errors, which lead to node panic, from recoverable errors. Additionally, the team continued the deployment of a new test network that runs on the Cardano <code>mainnet</code> and computes the stake distribution with the optimized unreleased Cardano CLI command.</p><p>Finally, they have designed the certification of generic types of data by a Mithril network and they have started implementing its first phase. Also they fixed a bug that made the client Docker image crash at startup.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Worked on the epic that implements eras behavior switch <a href="https://github.com/input-output-hk/mithril/issues/707" target="_blank" rel="noopener noreferrer">#707</a>:<ul><li>Completed the deployment of the era behavior switch to the test networks <a href="https://github.com/input-output-hk/mithril/issues/752" target="_blank" rel="noopener noreferrer">#752</a></li><li>Completed the enhancement of datum generation for era markers <a href="https://github.com/input-output-hk/mithril/issues/786" target="_blank" rel="noopener noreferrer">#786</a></li><li>Worked on handling the API version with an era switch <a href="https://github.com/input-output-hk/mithril/issues/727" target="_blank" rel="noopener noreferrer">#727</a></li></ul></li><li>Worked on the epic that implements a relational store in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/779" target="_blank" rel="noopener noreferrer">#779</a>:<ul><li>Worked on the migration/adaptation of the <code>stake_pool</code> table <a href="https://github.com/input-output-hk/mithril/issues/787" target="_blank" rel="noopener noreferrer">#787</a></li></ul></li><li>Completed the refactoring of errors in the signer and aggregator state machines <a href="https://github.com/input-output-hk/mithril/issues/665" target="_blank" rel="noopener noreferrer">#665</a></li><li>Worked on testing Mithril with a <code>mainnet</code> Cardano network <a href="https://github.com/input-output-hk/mithril/issues/777" target="_blank" rel="noopener noreferrer">#777</a></li><li>Worked on fixing bugs with the Docker client image:<ul><li>Fixed a bug that made the Docker client container crash at startup <a href="https://github.com/input-output-hk/mithril/issues/769" target="_blank" rel="noopener noreferrer">#769</a></li><li>Fixed a bug that prevented the restoration of a snapshot with a Docker client <a href="https://github.com/input-output-hk/mithril/issues/791" target="_blank" rel="noopener noreferrer">#791</a></li><li>Worked on testing the Docker client in the <code>Mithril Client multi-platform test</code> workflow <a href="https://github.com/input-output-hk/mithril/issues/794" target="_blank" rel="noopener noreferrer">#794</a></li></ul></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-03-08-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-08-consensus"/>
        <updated>2023-03-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The Consensus team continued working on refactoring and improving the UTxO-HD
prototype, and introducing improvements to the <code>lmdb</code> related packages. In
particular we identified an opportunity to gain performance by handling locks in
a more optimal way.</p><p>On the Genesis front, we sketched a mitigation for an issue that <code>PNSol</code> and
Researchers caught. We also came op with a road map for not only testing the
Genesis prototypes, but also for enriching the tests we already have.</p><p>Regarding technical debt, next to some minor improvements, we created
component-level micro-benchmarks for adding transactions to the mempool. The
results of these benchmarks will be published in the <code>ouroboros-consensus</code> <a href="https://input-output-hk.github.io/ouroboros-consensus/" target="_blank" rel="noopener noreferrer">web
page</a>.</p><p>We also finished moving the Consensus documentation to the <code>ouroboros-consensus</code>
repository, released <code>ouroboros-consensus</code> <code>0.3.0.0</code>, and reduced the time
GitHub actions take in <code>ouroboros-network</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd-prototype">UTxO HD Prototype<a class="hash-link" href="#utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We continued working on refactoring and improving the UTxO-HD prototype. As a
result of the first round of sytem-level benchmarks, we identified an
opportunity to optimise the way we handle locks to improve performance
(<a href="https://github.com/input-output-hk/ouroboros-network/issues/4393" target="_blank" rel="noopener noreferrer">#4393</a>).</p><p>Also, we introduced several improvements to the <code>lmdb</code> related packages:</p><ul><li><a href="https://github.com/input-output-hk/lmdb-simple/pull/19" target="_blank" rel="noopener noreferrer">New tests</a> for read-only transaction handles.</li><li><a href="https://github.com/input-output-hk/lmdb-simple/pull/18" target="_blank" rel="noopener noreferrer">New functions</a> and <a href="https://github.com/input-output-hk/lmdb-simple/pull/13" target="_blank" rel="noopener noreferrer">data types</a>.</li><li><a href="https://github.com/input-output-hk/lmdb-simple/pull/11" target="_blank" rel="noopener noreferrer">Updates</a> to support improved type safety and smaller constraints in
the UTxO HD prototype.</li><li>Windows and MacOS <a href="https://github.com/input-output-hk/haskell-lmdb/pull/8" target="_blank" rel="noopener noreferrer">CI support</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><p>We sketched out a mitigation of the issue that <code>PNSol</code> and Researchers caught in
the Genesis design.</p><p>We came up with a road map for testing the Genesis prototypes, including early
milestones that are applicable to today's master branch, ie tests that are
useful before Genesis, and that will be nicely enriched when we do add Genesis.</p><p>We developed the aforementioned tests, specifically a <code>QuickCheck</code> generator for
the Honest leader schedule and one as-aggressive-as-possible Adversarial
leader schedule that together satisfy the Praos properties that the Consensus
design takes as invariants.</p><p>We investigated why the improved <code>ChainDB</code> queueing implementation behaves
differently in the baseline compared to the prototype, and we are close to
having a full picture of how the Consensus components interact during bulk sync.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4400" target="_blank" rel="noopener noreferrer">created</a> component-level micro-benchmarks for adding transactions
to the mempool. We plan on extending this to more mempool actions and different
types of blocks. We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4422" target="_blank" rel="noopener noreferrer">store</a> the benchmark data to make it available
to the GitHub action that <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/12" target="_blank" rel="noopener noreferrer">publishes</a> the benchmarks results.</p><p>Other minor improvements include:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4429" target="_blank" rel="noopener noreferrer">Removal</a> of <code>Test.Util.Classify</code> in favour of <code>Test.StateMachine.Labelling</code>.</li><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4423" target="_blank" rel="noopener noreferrer">Addition</a> of <code>-Wunused-packages</code> to the default <code>ghc-options</code> for Consensus
packages.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fostering-collaboration">Fostering collaboration<a class="hash-link" href="#fostering-collaboration" title="Direct link to heading">​</a></h3><p>We finished moving the Consensus documentation <a href="https://github.com/input-output-hk/ouroboros-network/pull/4374" target="_blank" rel="noopener noreferrer">from</a>
<code>ouroboros-network</code> <a href="https://github.com/input-output-hk/haskell-lmdb/pull/8" target="_blank" rel="noopener noreferrer">to</a> <code>ouroboros-consensus</code>, in preparation for
migrating the code to the latter repository.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support">Support<a class="hash-link" href="#support" title="Direct link to heading">​</a></h3><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4412" target="_blank" rel="noopener noreferrer">released</a> ouroboros-consensus 0.3.0.0.</p><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4421" target="_blank" rel="noopener noreferrer">reduced</a> the load in the <code>ouroboros-network</code> GitHub actions,
thereby reducing the time CI jobs take.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-03-08-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-08-node-cli-api"/>
        <updated>2023-03-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-03-08 - 2023-03-21</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>General bug fixes and some refactoring </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4958" target="_blank" rel="noopener noreferrer">Remove error calls in Cardano.CLI.Shelley.Run.Transaction</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4880" target="_blank" rel="noopener noreferrer">Detect invalid counter and certificate</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/5003" target="_blank" rel="noopener noreferrer">Add missing imports</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/5001" target="_blank" rel="noopener noreferrer">Add LedgerStateBabbage and LedgerStateConway pattern synonyms</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4967" target="_blank" rel="noopener noreferrer">Remove unnecessary functions</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4953" target="_blank" rel="noopener noreferrer">Remove duplicate scripts when building transaction body for Mary, Alonzo and Babbage</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4903" target="_blank" rel="noopener noreferrer">Reduce number of calls to toLedgerPParams</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4763" target="_blank" rel="noopener noreferrer">Remove simple script distinction</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4686" target="_blank" rel="noopener noreferrer">Add ToJSON/FromJSON instances for ChainPoint</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4683" target="_blank" rel="noopener noreferrer">Derive Eq instance for AcquiringFailure</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4682" target="_blank" rel="noopener noreferrer">Export <code>fromShelleyBasedScript</code> from Cardano.Api</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4344" target="_blank" rel="noopener noreferrer">Remove unnecessary validation of Data</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3775" target="_blank" rel="noopener noreferrer">Remove hint of "string" support for ScriptData</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4988" target="_blank" rel="noopener noreferrer">Conway hard forks on prot-ver 9</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4968" target="_blank" rel="noopener noreferrer">Reinstate -Werror for cardano-node and fix errors</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4921" target="_blank" rel="noopener noreferrer">Take all dependencies from Hackage or CHaP</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4911" target="_blank" rel="noopener noreferrer">Less verbose node-to-client and node-to-node version logging</a> </li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4902" target="_blank" rel="noopener noreferrer">Get AcceptedConnectionsLimit from the configuration</a> </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4729" target="_blank" rel="noopener noreferrer">fix cardano-testnet Babbage genesis.json</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-03-08-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-08-performance-and-tracing"/>
        <updated>2023-03-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[* Release benchmarking: We again performed benchmarks for the next 1.35.6 release candidate.]]></summary>
        <content type="html"><![CDATA[<ul><li>Release benchmarking: We again performed benchmarks for the next 1.35.6 release candidate.</li><li>New tracing: Backwards compatibility with legacy tracer nomenclature is being implemented to smoothe the transition for end users.</li><li>Analysis pipeline: A major refinement of benchmarking metrics has been realized, along with a structural improvementents regarding metrics denomination.</li><li>Open Sourcing: Work on going live with our benchmarking data has begun, as well as creating an API demo and documentation.</li><li>Nomad backend: The backend was adapted to a major refactoring in workbench and is being equipped with a nomad-exec based task driver.</li></ul><h1>Performance</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1356-release">1.35.6 release<a class="hash-link" href="#1356-release" title="Direct link to heading">​</a></h3><p>Benchmarking the second release candidate for 1.35.6 could again attest to a perfectly clean bill of health.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-pipeline">Analysis pipeline<a class="hash-link" href="#analysis-pipeline" title="Direct link to heading">​</a></h3><p>Our analysis pipeline has seen an introduction of additional metrics, especially when focusing on the block producing node. They allow us to better
differentiate the timing of ledger ticking and mempool snapshotting in the forging loop - a feature that promises much deeper insight into UTxO-HD performance.
Additionally, a restructuring of metrics names has been undertaken along with improvements in their data dictionary; a measure that will make benchmarking
data more easily accessible.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-sourcing">Open Sourcing<a class="hash-link" href="#open-sourcing" title="Direct link to heading">​</a></h3><p>As a prerequisite for going live with our benchmarking data, we're currently working on consolidation of existing analyses, such as to provide a common foundation when accessing them externally. Additionally, we've begun working on a small visualization demo and interactive API documentation. Those will enable
third parties to make use of that data much more easily, by having reliable guidelines and a working example.</p><h1>Tracing</h1><p>The new tracing system is being outfitted with a comprehensive mapping of its structure to the legacy tracer nomenclature. This feature will make
the switch to the new system as smooth as possible for end users, allowing them to gradually adapt their tooling without breaking any functionality in the process.</p><h1>Infrastructure</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><p>The Nomad backend was adapted to the latest major refactoring in workbench. Work was done on making stateful Nomad clients more autonomous, which will greatly facilitate any automation building on that backend. A task driver based on nomad-exec is currently being implemented.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-03-03-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-03-crypto"/>
        <updated>2023-03-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>Mithril: Updated KES crate to force user to allocate buffer of bytes for the key. Include proper testing for batch mtree opening and STM batch verify. Progressed with RFP for audit.</li><li>cardano-base: BLS branch is now ready for review. We are workign forward its merge. </li><li>KES agent: time off of part of the team, but in general continuing with the adaptation of the KES agent with consensus codebase.</li><li>Sidechains: We are exploring and starting discussion on how sidechains could leverage BLS12-381 bindings for SNARKs</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>Bumped to version <a href="https://crates.io/crates/kes-summed-ed25519/0.2.0" target="_blank" rel="noopener noreferrer">0.2.0</a> the implementation of KES. Redesigned the representation of the secret key to allow user to allocate a buffer using <code>mlock</code>.</li><li>Opened <a href="https://github.com/input-output-hk/mithril/pull/783" target="_blank" rel="noopener noreferrer">PR#783</a> to update dependency</li><li>Improved testing for batch opening of mtree, <a href="https://github.com/input-output-hk/mithril/pull/773" target="_blank" rel="noopener noreferrer">PR#773</a></li><li>Improved testing for batch verification of STM sigs <a href="https://github.com/input-output-hk/mithril/pull/774" target="_blank" rel="noopener noreferrer">PR#774</a></li><li>RFP for crypto audit almost ready.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>BLS12-381 branch finally ready for review <a href="https://github.com/input-output-hk/cardano-base/pull/266" target="_blank" rel="noopener noreferrer">PR#266</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><p>Team off for one week. Other progress:</p><ul><li>Learning about raw direct-bearer abstraction. An interface for sockets in consensus.</li><li>use that for direct ser/deser</li><li>written those syntaxes for ouroboros (coming PR)</li><li>the kes agent will depend on that. 	</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sidechains">Sidechains<a class="hash-link" href="#sidechains" title="Direct link to heading">​</a></h3><p>Progress with familiarisation of Halo2 library to write circuits.</p>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-03-03-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-03-goedel"/>
        <updated>2023-03-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has been working on drafts of two papers and one
technical report, improving the deltaQ tutorial, consulting on
performance design, and the Djed paper has been accepted for
publication.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Preparing draft of DeltaQSD algebra paper for FORTE 2023</p></li><li><p>Extending the technical report on which the above paper is based</p></li><li><p>Consulting with an external company on performance engineering of Plutus contracts</p></li><li><p>Planning improvements and collecting material for the deltaQ
tutorial based on experience with systems that manage risk at
multiple timescales</p></li><li><p>Preparing sections on the communication language and idempontency
laws for draft paper about verifying design refinements for
distributed system design</p></li><li><p>Studying Cardano chain sync protocol</p></li><li><p>"Djed: A Formally Verified Crypto-Backed Autonomous Stablecoin
Protocol" has been accepted for publication at IEEE ICBC 2023</p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-03-03-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-03-hydra"/>
        <updated>2023-03-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team released version
<a href="https://github.com/input-output-hk/hydra/releases/tag/0.9.0" target="_blank" rel="noopener noreferrer">0.9.0</a> - a version
of the <code>hydra-node</code> with fully specified behavior of on-chain scripts and
off-chain head-logic, decreased costs for opening/closing a Head and scalable
contestation deadline semantics. Check out the full release notes for details.</p><p>Furthermore, they published the <a href="https://hydra.family/head-protocol/monthly/2023-03" target="_blank" rel="noopener noreferrer">monthly
report</a> of the Hydra project
and conducted a review meeting with an increasingly wider audience. The team
plans to extend invitations through the new Hydra
<a href="https://discord.gg/Bwdy2jNdm2" target="_blank" rel="noopener noreferrer">#announcements</a> discord channel for the next
months, stay tuned!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Monthly review meeting with report published <a href="https://hydra.family/head-protocol/monthly/2023-03" target="_blank" rel="noopener noreferrer">on website</a></li><li>Fixed smoke tests <a href="https://github.com/input-output-hk/hydra/pull/726" target="_blank" rel="noopener noreferrer">#726</a></li><li>Reduced the cost of opening/closing a Head (error codes <a href="https://github.com/input-output-hk/hydra/pull/748" target="_blank" rel="noopener noreferrer">#748</a> + head reference script <a href="https://github.com/input-output-hk/hydra/pull/701" target="_blank" rel="noopener noreferrer">#701</a>)</li><li>Released version <a href="https://github.com/input-output-hk/hydra/releases/tag/0.9.0" target="_blank" rel="noopener noreferrer">0.9.0</a></li><li>Conducted a first experiment on mainnet compatibility <a href="https://github.com/input-output-hk/hydra/issues/713" target="_blank" rel="noopener noreferrer">#713</a></li><li>New discord category with <a href="https://discord.gg/Bwdy2jNdm2" target="_blank" rel="noopener noreferrer">#announcements</a> channel</li><li>Received a demo about the Hydra for Voting project</li><li>Lightning talk on mutation-based testing (to be shared)</li><li>New <a href="https://github.com/orgs/input-output-hk/projects/21/views/26" target="_blank" rel="noopener noreferrer">themes view</a> in on our roadmap and some rearranging as we align it with high-level objectives</li><li>Clarified things with researchers, but mostly identified action items for them</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Redraw transaction graphs and address TODOs specification</li><li>Run hydraw with 0.9.0 on preprod</li><li>Make smoke tests on mainnet possible</li><li>Groom the explorer item</li><li>Unblock the auctions projecth with <!-- -->“<!-- -->commit from script<!-- -->”<!-- --> a solution</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-03-03-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-03-ledger"/>
        <updated>2023-03-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We have focused the last two weeks on CIP-1694, integration of the last several months of ledger
work into consensus and node, and testing infrastrutcture that we will use in the conway ledger era.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conway-rules">Conway rules<a class="hash-link" href="#conway-rules" title="Direct link to heading">​</a></h3><p>We made a major update to the conway era so that the implementation is now in sync with the spec
with respect to the ratification and enactment logic.</p><p>See the notes in <a href="https://github.com/input-output-hk/cardano-ledger/pull/3291" target="_blank" rel="noopener noreferrer">pull-3291</a> for more details.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="constraint-based-generators">Constraint based generators<a class="hash-link" href="#constraint-based-generators" title="Direct link to heading">​</a></h3><p>This week we hit a major milestone in our efforts to build out better property based testing
support for the main ledger properties.
The new constraint based generators can now generate full ledger states with what is probably
very close to the real constraints (if anything, it is under constrained).
Next we will work on generating a transaction in the context of a ledger state, which would allow
us to actually start using these generators for real tests.</p><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3219" target="_blank" rel="noopener noreferrer">pull-3219</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="preparing-a-release-now-with-proper-versioning">Preparing a release, now with proper versioning<a class="hash-link" href="#preparing-a-release-now-with-proper-versioning" title="Direct link to heading">​</a></h3><p>After quite some time, we are ready to release a version of ledger that will work with a new
version of consensus, using CHaPs.</p><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3308" target="_blank" rel="noopener noreferrer">pull-3308</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><ul><li>We cleaned up the redeemer serialization code (to prevent future mistakes). See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3269" target="_blank" rel="noopener noreferrer">pull-3269</a>.</li><li>We added a note to the Alonzo spec, specifying that the transaction inputs are
lexicographically ordered in the Plutus script context. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3306" target="_blank" rel="noopener noreferrer">pull-3306</a>.</li><li>We fixed a problem with the address deserialiazation
(we mistakenly fixed a bug in the Babbage era which cannot be fixed until Conway).
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3307" target="_blank" rel="noopener noreferrer">pull-3307</a>.</li><li>We fixed a problem with our nix build. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3311" target="_blank" rel="noopener noreferrer">pull-3311</a>.</li><li>We fixed a problem with our <code>NoThunks</code> tests. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3310" target="_blank" rel="noopener noreferrer">pull-3310</a>.</li><li>We improved our nightly tests. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3316" target="_blank" rel="noopener noreferrer">pull-3316</a>.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-03-02-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-03-02-network"/>
        <updated>2023-03-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>In the current sprint the networking team focused on fixing bugs and pushing
forward implementation of eclipse evasion.  We also found a bug in our
simulation testing setup (in integration of test node).  We also overviewed the
work on extending handshake protocol which is delivered by Galois Inc.</p><p>We published <code>ouroboros-network-0.4.0.1</code> and
<code>ouroboros-network-protocols-0.3.0.0</code> to <a href="https://github.com/input-output-hk/cardano-haskell-packages/pull/147" target="_blank" rel="noopener noreferrer">CHaP</a>.</p><p>We also fixed a bug in <code>cardano-node</code> which results in not being able to
configure inbound connection limits, see <a href="https://github.com/input-output-hk/cardano-node/pull/4902" target="_blank" rel="noopener noreferrer">PR #4902</a>.</p><p>Together with Karl Knutsson (CF) we realised an issue in <code>cardano-cli</code>: it's
validation of DNS names, IP address &amp; ports when registering a stake pool
should be more strict to protect against common mistakes which we identified on
the chain.  See <a href="https://github.com/input-output-hk/cardano-node/issues/4929" target="_blank" rel="noopener noreferrer">issue #4929</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-work-log">Detailed work log<a class="hash-link" href="#detailed-work-log" title="Direct link to heading">​</a></h2><p>In <a href="https://github.com/input-output-hk/ouroboros-network/pull/4385" target="_blank" rel="noopener noreferrer">PR #4385</a> we fixed two bugs in peer state actions.  First one results in
a busy loop if demotion from hot to warm times outs.  This busy loop is
eventually exited when mux exits (we reported this in our previous report).
This fix made it to <code>1.35.6</code> release as well.</p><p>In addition the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4385" target="_blank" rel="noopener noreferrer">PR #4385</a> also fixes another bug which results in <code>hot -&gt; warm
-&gt; hot</code> demotion / promotion busy loop.</p><p>The <a href="https://github.com/input-output-hk/ouroboros-network/pull/4385" target="_blank" rel="noopener noreferrer">PR #4385</a> also fixed a bug in a node only used in simulation which
resulted in not using <code>chain-sync</code> or <code>block-fetch</code> mini-protocols.  In the
review process, we realised that the header-body split in the simulated node
requires further work (see <a href="https://github.com/input-output-hk/ouroboros-network/pull/4419" target="_blank" rel="noopener noreferrer">PR #4419</a>, which is under review).</p><p>The <a href="https://github.com/input-output-hk/ouroboros-network/pull/4385" target="_blank" rel="noopener noreferrer">PR #4385</a> also extend our generators, which together with the above fix,
cover the <code>hot -&gt; warm -&gt; hot</code> demotion / promotion busy loop.</p><p>In <a href="https://github.com/input-output-hk/ouroboros-network/pull/4419" target="_blank" rel="noopener noreferrer">PR #4419</a> we introduce a <code>ChainDB</code> for our simulation node, which plays
similar role to <code>ChainDB</code> in the <code>ouroboros-consensus</code>: a persistent (across
simulated restarts) store of blocks which does chain selection.  This ensures
that the simulated node is using <code>block-fetch</code> to download blocks announced by
<code>chain-sync</code> mini-protocol.</p><p>We also made progress with reviewing <a href="https://github.com/input-output-hk/ouroboros-network/pull/4019" target="_blank" rel="noopener noreferrer">PR #4019</a> - peer sharing.</p><p>We also fixed <a href="https://github.com/input-output-hk/ouroboros-network/issues/4370" target="_blank" rel="noopener noreferrer">issue #4370</a> - a connection manager test failure, see <a href="https://github.com/input-output-hk/ouroboros-network/pull/4384" target="_blank" rel="noopener noreferrer">PR #4384</a>.</p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-02-24-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-24-hydra"/>
        <updated>2023-02-24T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team continue closing many gaps and aligning the
implementation with the specification. More over, they have groomed a plan to
make Hydra Mainnet compatible. Also, they continue moving forward with the
internal auditing and have published some auditing guidelines to receive
contributions from the community.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Completed <a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">#452</a> (what is
remaining in there)</li><li>Aligned the Head protocol logic implementation with the specification</li><li>Completed full minting policy implementation and spec
<a href="https://github.com/input-output-hk/hydra/issues/720" target="_blank" rel="noopener noreferrer">#720</a></li><li>Clarified message authentication with researchers</li><li>Groomed what is left to do for Mainnet compatibility
<a href="https://github.com/input-output-hk/hydra/issues/713" target="_blank" rel="noopener noreferrer">#713</a> and drafted a
0.10.0 version</li><li>Added a tutorial by <a href="https://github.com/perturbing/" target="_blank" rel="noopener noreferrer">@perturbing</a> to the
website <a href="https://hydra.family/head-protocol/docs/tutorial/" target="_blank" rel="noopener noreferrer">LINK</a></li><li>Published auditing guidelines
<a href="https://hydra.family/head-protocol/audit-guidelines" target="_blank" rel="noopener noreferrer">LINK</a></li><li>Made hydra-node work for macos
<a href="https://github.com/input-output-hk/hydra/issues/746" target="_blank" rel="noopener noreferrer">#746</a> and added support
for building on aarch64
<a href="https://github.com/input-output-hk/hydra/issues/673" target="_blank" rel="noopener noreferrer">#673</a></li><li>Met with a potential customer of Hydra for Payments</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Have the monthly review meeting incl. the report</li><li>Have smoke tests fixed and running regularly</li><li>Release 0.9.0 with updated scripts</li><li>Redraw transaction graphs for specification</li></ul>]]></content>
        <author>
            <name>Franco Testagrossa</name>
            <uri>https://github.com/ffakenz</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-02-23-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-23-mithril"/>
        <updated>2023-02-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2306.0" target="_blank" rel="noopener noreferrer"><code>2306.0</code></a> distribution that implements minor fixes and updates and completes the wiring of the era activation markers reader into the signer and aggregator nodes. They also designed an event store in the aggregator and completed its implementation as a monitoring solution to provide figures for deployment rates of versions on signer nodes before activating an era switch. Additionally, the team created a dedicated command on their nodes’ CLI that allows generating and signing an era marker’s payload to be stored on the Cardano chain, as well as creating dynamic cases for the end-to-end tests they run on the CI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Released the new distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2306.0" target="_blank" rel="noopener noreferrer"><code>2306.0</code></a></li><li>Completed the epic that implements signer versions deployment monitoring <a href="https://github.com/input-output-hk/mithril/issues/718" target="_blank" rel="noopener noreferrer">#718</a>:<ul><li>Completed the implementation an event producer/consumer via channel <a href="https://github.com/input-output-hk/mithril/issues/738" target="_blank" rel="noopener noreferrer">#738</a></li><li>Completed the creation of a database and its configuration to save the events on the consumer side <a href="https://github.com/input-output-hk/mithril/issues/740" target="_blank" rel="noopener noreferrer">#740</a></li><li>Completed the creation of events and sending them on the channel on the producer side <a href="https://github.com/input-output-hk/mithril/issues/741" target="_blank" rel="noopener noreferrer">#741</a></li><li>Completed the creation of the signer registration event <a href="https://github.com/input-output-hk/mithril/issues/742" target="_blank" rel="noopener noreferrer">#742</a></li><li>Completed the creation a query to extract the node versions stakes distribution <a href="https://github.com/input-output-hk/mithril/issues/743" target="_blank" rel="noopener noreferrer">#743</a></li></ul></li><li>Worked on the epic that implements eras behavior switch <a href="https://github.com/input-output-hk/mithril/issues/707" target="_blank" rel="noopener noreferrer">#707</a>:<ul><li>Completed the loading of era reader adapters from config in the signer and the aggregator <a href="https://github.com/input-output-hk/mithril/issues/732" target="_blank" rel="noopener noreferrer">#732</a></li><li>Completed the implementation of an era cli command in the aggregator <a href="https://github.com/input-output-hk/mithril/issues/755" target="_blank" rel="noopener noreferrer">#755</a></li><li>Completed the implementation of a dynamic matrix of cases in CI end to end tests <a href="https://github.com/input-output-hk/mithril/issues/760" target="_blank" rel="noopener noreferrer">#760</a></li></ul></li><li>Fixed some bugs:<ul><li>Fixed the unsupported <code>unixepoch()</code> function <a href="https://github.com/input-output-hk/mithril/issues/757" target="_blank" rel="noopener noreferrer">#757</a></li><li>Fixed the problem that prevented some signers from signing on the <code>testing-preview</code> network <a href="https://github.com/input-output-hk/mithril/issues/730" target="_blank" rel="noopener noreferrer">#730</a></li><li>Update SQLite version to <code>3.40</code> in aggregator infrastructure <a href="https://github.com/input-output-hk/mithril/issues/765" target="_blank" rel="noopener noreferrer">#765</a></li></ul></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-02-23-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-23-performance-and-tracing"/>
        <updated>2023-02-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[* SECP benchmarking: we concluded our benchmarking runs and analyses of the new SECP primitives for the Valentine hard-fork.]]></summary>
        <content type="html"><![CDATA[<ul><li>SECP benchmarking: we concluded our benchmarking runs and analyses of the new SECP primitives for the Valentine hard-fork.</li><li>Release benchmarking: we performed a round of benchmarks for the 1.35.6 release.</li><li>UTxO-HD benchmarking: we performed first runs for UTxO-HD and are currently refining the benchmarking setup.</li><li>New tracing: for better accessibility, the new tracing system is being outfitted with introspective capabilities.</li><li>Infrastructure: with the Nomad cloud workbench backend we were able to perform our first test cluster runs successfully on SRE infrastructure.</li><li>Infrastructure: the initial NixOps workbench backend has been completed; a PR containing this work, along with many quality-of-life improvements of our tooling, got merged.</li></ul><h1>Performance</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secp">SECP<a class="hash-link" href="#secp" title="Direct link to heading">​</a></h3><ol><li>For SECP, we settled on a fixed tx count per block, while simultaneously spending as much as possible of the block budget. Thus we were able to minimize the impact of per-SC-call overhead.</li><li>The final runs were performed with various fractions, e.g. half, of the current block budget to ascertain how these workloads would fare compared to a value-only run.</li><li>The SECP machinery and profiles are currently being generalized into an approach to aim for very specific aspects of a smart contract for benchmarking. </li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd">UTxO-HD<a class="hash-link" href="#utxo-hd" title="Direct link to heading">​</a></h3><ol><li>After analyzing initial UTxO-HD runs, it turned out that mempool snapshotting had to be throttled for benchmarking; it affects a lock that UTxO-HD had to introduce into the forging loop.</li><li>We're currently adapting the benchmark setup to that, and will then perform a new combination of baseline and UTxO-HD runs.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1356-release">1.35.6 release<a class="hash-link" href="#1356-release" title="Direct link to heading">​</a></h3><p>Benchmarking the 1.35.6 release candidate could attest to a perfectly clean bill of health.</p><h1>Tracing</h1><p>Work on the new tracing system's introspective capabilites is ongoing: Immediate use cases of the new API include being able to statically validate generated tracer documentation, as well as providing information of a specific tracing setup in the node via traces themselves. These features will make the new system both more robust, and more accessible.</p><h1>Infrastructure</h1><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nomad-backend">Nomad backend<a class="hash-link" href="#nomad-backend" title="Direct link to heading">​</a></h3><ol><li>Work on the cloud deployment capability of the Nomad workbench backend continued; for testing we can automate multiple Nomad clients.</li><li>Locality assumptions were removed and job monitoring was refactored.</li><li>To facilitate directly-executable derivations, Nomad Job specification files are now self contained with GitHub references and configs needed to run a cluster.</li><li>We're currently evaluating different options for genesis distribution in said cluster.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nixops-backend">NixOps backend<a class="hash-link" href="#nixops-backend" title="Direct link to heading">​</a></h3><p>The NixOps workbench backend has reached an initial functional stage. Consequently, the relevant PR was merged. It also contained many improvements to our analysis tooling, as well as a structural overhaul of workbench itself. We consider this an important step of future-proofing our benchmarking machinery.</p>]]></content>
        <author>
            <name>Michael Karg</name>
            <uri>https://github.com/mgmeier</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-02-22-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-22-consensus"/>
        <updated>2023-02-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks we got the results from the system level benchmarks
for UTxO HD. They showed a substantial performance regression, so we spent some
time analyzing the results. We found out the frequency at which ledger snapshots
were taken was too high, so we requested the benchmarking team a new run with a
more realistic snapshotting policy. We continued refactoring and improving the
prototype, and we released UTxO-HD related packages to CHaP.</p><p>We met with IOG researchers and networking specialists to discuss the Genesis
design, which was well received. We continued working on testing and
benchmarking different Genesis prototypes.</p><p>We are also working on solving a test failure related to iterators. This work
derived in several improvements such as better documentation, a framework for
writing unit (and regression) tests, and the possibility of debugging
<code>QuickCheck</code> counter examples in the REPL.</p><p>Finally, we released <code>ouroboros-consensus</code> 0.2.0.0 and
<code>ouroboros-consensus-cardano</code> 0.3.0.0 to CHaP</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd-prototype">UTxO HD Prototype<a class="hash-link" href="#utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We got the results of the first system level benchmarks for UTxO HD. They seemed
to indicate a significant regression in performance. After looking into the
benchmark logs we found that the benchmark runs took ledger state snapshots too
often, due to the default snapshotting policy depending on <code>k</code>, and <code>k</code> being so
small in the benchmark runs. Therefore, the next step is to re-run the
benchmarks with a snapshotting policy that more closely resembles the one from
mainnet.</p><p>At the same time, we continued refactoring and cleaning up the prototype. </p><p>Also, we prepared the <code>anti-diff</code> packages (<code>fingertree-rm</code>, <code>diff-containers</code>,
<code>simple-semigroupoids</code>) and the <code>lmdb</code> related packages (<code>cardano-lmdb</code> and
<code>cardano-lmdb-simple</code>) to <a href="https://github.com/input-output-hk/cardano-haskell-packages" target="_blank" rel="noopener noreferrer">CHaP</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><p>The Genesis design was presented to the IOG researchers and Peter Thompson from
NSol. It was well received. They pointed out one blindspot, but we think it'll
be relatively simple to mitigate.</p><p>In parallel, we continued developing test and benchmarks for the Genesis
prototypes. I particular we tested and implemented a potential fix for
<a href="https://github.com/input-output-hk/ouroboros-network/issues/4037#issuecomment-1439708022" target="_blank" rel="noopener noreferrer">increased ChainDB dequeue timings</a>, which partly
behaved as we expected, but still needs further investigation. Also we obtained
<a href="https://github.com/input-output-hk/ouroboros-network/issues/4037#issuecomment-1434745031" target="_blank" rel="noopener noreferrer">new benchmarking data</a> for the prototype.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>Related to <a href="https://github.com/input-output-hk/ouroboros-network/issues/4183" target="_blank" rel="noopener noreferrer">#4183</a>, we developed a <a href="https://github.com/input-output-hk/ouroboros-network/pull/4379" target="_blank" rel="noopener noreferrer">DSL</a> for specifying
<code>ChainDB</code> unit tests. This will allow us to better understand the
counter-examples returned by QuickCheck tests, and to write <a href="https://github.com/input-output-hk/ouroboros-network/pull/4383" target="_blank" rel="noopener noreferrer">regression
tests</a> for them. Also, we <a href="https://github.com/input-output-hk/ouroboros-network/pull/4358" target="_blank" rel="noopener noreferrer">added a module</a> to enable
QuickCheck counter-examples to be run on the REPL, allowing for faster debugging
feedback. Also, we improved the documentation related to followers
(<a href="https://github.com/input-output-hk/ouroboros-network/pull/4372" target="_blank" rel="noopener noreferrer">#4372</a>).</p><p>We are also working on a design for optimizing the way we handle blocks from the
future.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support">Support<a class="hash-link" href="#support" title="Direct link to heading">​</a></h3><p>We released <code>ouroboros-consensus</code> 0.2.0.0 and <code>ouroboros-consensus-cardano</code>
0.3.0.0 to CHaP. Remember that we decided to split the packages related to
Consensus into two bundles, one with the core functionality, Cardano-agnostic
code, and another bundle with instantiations specific to Cardano.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-02-22-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-22-node-cli-api"/>
        <updated>2023-02-22T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-02-22 - 2023-03-07</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>General bug fixes </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4882" target="_blank" rel="noopener noreferrer">Fix some markdown links</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4881" target="_blank" rel="noopener noreferrer">Update changelog with PR4788 changes</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4761" target="_blank" rel="noopener noreferrer">Fix bug in hash computation in cardano-cli genesis create-cardano</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4636" target="_blank" rel="noopener noreferrer">Cleanup exports of cardano-testnet</a></li><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4625" target="_blank" rel="noopener noreferrer">Handle pipes in cardano-cli</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4753" target="_blank" rel="noopener noreferrer">Export SubmitResult from Cardano.Api</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4901" target="_blank" rel="noopener noreferrer">Remove pattern Tx</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="documentation">Documentation<a class="hash-link" href="#documentation" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4949" target="_blank" rel="noopener noreferrer">Fix path to mkfiles.sh script in documentation</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-mainteance">CI &amp; project mainteance<a class="hash-link" href="#ci--project-mainteance" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4932" target="_blank" rel="noopener noreferrer">New build complete job</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4764" target="_blank" rel="noopener noreferrer">Update ouroboros-network</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4659" target="_blank" rel="noopener noreferrer">Render consistent plutus script failure output</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4666" target="_blank" rel="noopener noreferrer">Read network ID from environment</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4647" target="_blank" rel="noopener noreferrer">CLI option to append additional signatures to a transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">Cardano ping</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4777" target="_blank" rel="noopener noreferrer">Better error message for query utxo on oops</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4910" target="_blank" rel="noopener noreferrer">New --node-socket-path cli option</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4909" target="_blank" rel="noopener noreferrer">Fix qKesKesKeyExpiry to not always be null</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4880" target="_blank" rel="noopener noreferrer">Detect invalid counter and certificate</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4823" target="_blank" rel="noopener noreferrer">Straight line code for tx commands</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">New cardano-cli ping command.</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4655" target="_blank" rel="noopener noreferrer">Move cardano-ping from ouroboros-network to cardano-node project</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4763" target="_blank" rel="noopener noreferrer">Remove simple script distinction</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4941" target="_blank" rel="noopener noreferrer">Combinators for TxBodyConŻtent and related types</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4903" target="_blank" rel="noopener noreferrer">Reduce number of calls to toLedgerPParams</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4825" target="_blank" rel="noopener noreferrer">Better error message for query utxo without oops 2</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4911" target="_blank" rel="noopener noreferrer">Less verbose node-to-client and node-to-node version logging</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet-1">cardano-testnet<a class="hash-link" href="#cardano-testnet-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4845" target="_blank" rel="noopener noreferrer">Use Haskell variables for passing values</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4879" target="_blank" rel="noopener noreferrer">Re-enable kes-period-info test</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3783" target="_blank" rel="noopener noreferrer">Transaction debug script command</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB-sync Team Update]]></title>
        <id>2023-02-21-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-21-db-sync"/>
        <updated>2023-02-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The db-sync team created a new tag <code>13.1.0.2</code> which is ready to release.
We also investigated and had the first working UTxO-HD integration which is one
of the potential future risks for db-sync.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><ul><li>Integrated the UTxO-HD feauture branch in <code>kderme/utxo-hd-1</code>. This doesn't
use the full on disk storage but keeps things in memory and the plan is to keep
it this way for the first iteration. The integration still has some performance
issues which we investigate</li><li>Created tag <code>13.1.0.2</code> which upgrades the dependencies of db-sync</li><li>Fixed an issue related to errors appearing in SMASH
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1353" target="_blank" rel="noopener noreferrer">#1353</a></li><li>Continued with ghc-9.2 integration
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1339" target="_blank" rel="noopener noreferrer">#1339</a></li><li>Worked on an new fixing procedure for
<a href="https://github.com/input-output-hk/cardano-db-sync/issues/1348" target="_blank" rel="noopener noreferrer">#1348</a>.
We try to make these procedures work also on older schema version, without the
need to migrate to newer schema, which can be very useful for fixing existing
snapshots.</li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-02-17-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-17-crypto"/>
        <updated>2023-02-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>Mithril: Helper functions finished. Continue preparing a RFP for an audit of mithril's core library (decided to add audit of KES). Design proposal for viable registration.</li><li>cardano-base: Praos to PraosBatchCompat ready. KES secure forgetting finished, but holding merge for delivery strategy (breaking changes). Tested real world SNARK verification on plutus.</li><li>KES agent: using snockets and making things testable in IOSim</li><li>MuSig2: started implementation in rust.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>Transmute helpers merged <a href="https://github.com/input-output-hk/mithril/pull/722" target="_blank" rel="noopener noreferrer">PR#722</a></li><li>We have progressed with the RFP document for the mithril-stm library. Progressing with description of octopus algorithm. Included KES in scope. </li><li>We are working in a modification of KES to require caller to allocate the secret key buffer.</li><li>Proposed a solution for signer registration of <a href="https://github.com/input-output-hk/mithril/wiki/Mithril-registration-procedure#cost" target="_blank" rel="noopener noreferrer">Mithril</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>Progressing with BLS12-381. Worked with plutus team to have a plutus script verifying a Groth16 <a href="https://github.com/input-output-hk/plutus/tree/kwxm/BLS12_381/prototype/plutus-benchmark/bls-benchmarks" target="_blank" rel="noopener noreferrer">proof</a>.<ul><li>Results are promising, with using only 23% of the execution budget to verify a realistic proof. </li><li>Next step is to build a real world use case (and not use a dummy proof). Projects being considered are Sidechains, Hydra or Mithril.</li></ul></li><li>KES secure forgetting merge is being held off, due to breaking changes. We are considering handling several branches in cardano-base for this.</li><li>Conversion finally merged <a href="https://github.com/input-output-hk/cardano-base/pull/344" target="_blank" rel="noopener noreferrer">PR#344</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>Figuring out how to use sockets to write directly into the file descriptor. Digging into the sockets implementation</li><li>Figuring out how to go from fake file descriptor to write the raw bytes</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="musig2">MuSig2<a class="hash-link" href="#musig2" title="Direct link to heading">​</a></h3><ul><li>Started implementing MuSig2 in Rust using the Ristretto prime order group. Still experimental.</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-02-17-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-17-goedel"/>
        <updated>2023-02-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has been working on drafts of two papers and one
technical report, distributivity properties of deltaQ, and consulting
on performance design with the Marlowe team.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li><p>Processing reviews on performance engineering paper and planning
paper revisions accordingly</p></li><li><p>Investigating distributivity properties of DeltaQ</p></li><li><p>Preparing sections on the thorn calculus and idempotency laws for
draft paper about verifying design refinements for distributed
system design</p></li><li><p>Consulting on performance design with Marlowe team</p></li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-02-17-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-17-hydra"/>
        <updated>2023-02-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team completed work on dealing differently with contests
during the contestation period. These will now always push out the deadline and
hence contestation periods are easier to pick (depending on the network a Head
runs on). Furthermore, they added an important acceptance test and completed
internal refactoring of the protocol logic making future changes easier.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Push contestation deadline on each contest <a href="https://github.com/input-output-hk/hydra/pull/716" target="_blank" rel="noopener noreferrer">#716</a></li><li>Wrote an acceptance (property) test <!-- -->“<!-- -->can always close/fanout when collect is successful<!-- -->”</li><li>Internal refactoring of our <code>HeadLogic</code></li><li>Groomed remaining things from <a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">#452</a> into dedicated features</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Complete full minting policy <a href="https://github.com/input-output-hk/hydra/issues/720" target="_blank" rel="noopener noreferrer">#720</a></li><li>Release 0.9.0 with updated scripts</li><li>Plan mainnet milestone and a 0.10.0 version</li><li>Redraw transaction graphs for specification (upon feedback)</li><li>Have smoke tests fixed and running regularly</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-02-17-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-17-ledger"/>
        <updated>2023-02-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This past two weeks saw many months worth of ledger changes integrated with the <code>cardano-base</code>
and <code>ouroboros-network</code> repositories.
The vast majority of the effort involved all the changes to the ledger serialization libraries
(and the interplay with <code>cardano-base</code>) which now support proper versioning.
Supporting the conway ledger era, and in particular allowing the ledger state to transition
to a whole new system of governance, also played a noticeable part in the integration.</p><p>Besides the integration work, the team continues to address technical debt, improve the
documentation, make our testing infrastructure better (such as experimenting with better
nightly tests), and formally specifying more parts of CIP-1694.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-work">Integration work<a class="hash-link" href="#integration-work" title="Direct link to heading">​</a></h3><p>Below is all the integration work completed, which will enable a release to node from
the current ledger master. Many thanks to
<a href="https://github.com/lehins" target="_blank" rel="noopener noreferrer">Alexey</a> for this colossal undertaking!</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3303" target="_blank" rel="noopener noreferrer">pull-3303</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3302" target="_blank" rel="noopener noreferrer">pull-3302</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3300" target="_blank" rel="noopener noreferrer">pull-3300</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3299" target="_blank" rel="noopener noreferrer">pull-3299</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3298" target="_blank" rel="noopener noreferrer">pull-3298</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3297" target="_blank" rel="noopener noreferrer">pull-3297</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3292" target="_blank" rel="noopener noreferrer">pull-3292</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3289" target="_blank" rel="noopener noreferrer">pull-3289</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3288" target="_blank" rel="noopener noreferrer">pull-3288</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3279" target="_blank" rel="noopener noreferrer">pull-3279</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3282" target="_blank" rel="noopener noreferrer">pull-3282</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4349" target="_blank" rel="noopener noreferrer">pull-4349</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>Starting in major protocol version 9, zero-valued multi-assets will no longer be permitted
in the CBOR specification. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3241" target="_blank" rel="noopener noreferrer">pull-3241</a>.</p><p>We now have our <code>.cabal</code> files being checked for a consistent formatting given by
<code>cabal format</code> in our CI. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3286" target="_blank" rel="noopener noreferrer">pull-3286</a>.</p><p>We are still experimenting with better nightly tests for our long running
property based tests. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3276" target="_blank" rel="noopener noreferrer">pull-3276</a> and <a href="https://github.com/input-output-hk/cardano-ledger/pull/3296" target="_blank" rel="noopener noreferrer">pull-3296</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="small-documentation-improvements">Small documentation improvements<a class="hash-link" href="#small-documentation-improvements" title="Direct link to heading">​</a></h3><p>The hand proofs of the preservation ADA property have been added back to the
Shelley ledger specification. See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3295" target="_blank" rel="noopener noreferrer">pull-3295</a>.</p><p>We have clarified how the script integrity hash is computed in the CDDL description.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3290" target="_blank" rel="noopener noreferrer">pull-3290</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="specifying-cip-1694">Specifying CIP-1694<a class="hash-link" href="#specifying-cip-1694" title="Direct link to heading">​</a></h3><p>Our new formal specifications backed by Agda have seen a lot of progress!
Upgrading to Agda 2.6.3 fixed our main build infrastructure problems,
and we no longer have to rely on our custom fork. See <a href="https://github.com/input-output-hk/formal-ledger-specifications/pull/50" target="_blank" rel="noopener noreferrer">pull-50</a>.</p><p>Our progress on formally specifying CIP-1694 can be followed here:</p><ul><li>in Agda: <a href="https://github.com/input-output-hk/formal-ledger-specifications/pull/40" target="_blank" rel="noopener noreferrer">pull-40</a></li><li>the corresponding Haskell: <a href="https://github.com/input-output-hk/cardano-ledger/pull/3291" target="_blank" rel="noopener noreferrer">pull-3291</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="constraint-based-testing">Constraint based testing<a class="hash-link" href="#constraint-based-testing" title="Direct link to heading">​</a></h3><p>We are still actively working on our new constraint based property testing framework.
We have nearly all of the constraints for an entire ledger state
hooked into generators, and tests that the generators do indeed obey the constraints.
The variable count in the constraints is over 100!
There is still much work to do on shrinking, making the generators faster,
and writing actual property tests for the ledger, but the approach still seems viable and
we are hopeful that it could replace our trace generators.
The WIP can be followed here: <a href="https://github.com/input-output-hk/cardano-ledger/pull/3219" target="_blank" rel="noopener noreferrer">pull-3219</a>.</p>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-02-17-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-17-network"/>
        <updated>2023-02-17T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>Recently QA found a bug in P2P code, which results in busy loops.  We added one
fix to <code>1.35.6</code> release, another one will likely be part of next release.  The
first one is already included in <code>ouroboros-network-0.3.0.1</code> release.  These
bugs could only affect nodes which are out of sync and thus should not impose
risk on well maintained nodes on mainnet.  We also advertise to deploy at most
one of the relays as a P2P node, which shields from possible consequences.</p><p>We recently finished design phase of eclipse evasion and we started
implementing it (see <a href="https://github.com/orgs/input-output-hk/projects/19/views/16?pane=issue&amp;itemId=19819205" target="_blank" rel="noopener noreferrer">issue #3886</a> for progress).</p><p>Galois finished implementing Handshake extension which will allow to query
network protocol versions (see <a href="https://github.com/input-output-hk/ouroboros-network/pull/4256" target="_blank" rel="noopener noreferrer">pr #4256</a>).</p><p>We also recently released a newer set of network packages to be integrated with
<code>cardano-node</code> <code>master</code> branch, this includes:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">* monoidal-synchronisation-0.1.0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* cardano-client-0.1.0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* network-mux-0.3.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ouroboros-network-api-0.1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ouroboros-network-protocols-0.2.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ouroboros-network-testing-0.2.0.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ouroboros-network-mock-0.1.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ouroboros-network-framework-0.3.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* ouroboros-network-0.4.0.0 (it doesn't not yet include the fix we included</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  in `0.3.0.1`)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-02-10-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-10-hydra"/>
        <updated>2023-02-10T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team closed several gaps to align the Hydra scripts
implementation further with the specification. This also resulted in a slight
improvement on Hydra script size and costs. They consequently analysed the
asymptotic complexity of collect and fanout and how they relate. Also plutus-tx
profiling toolchain was evaluated and set up for future improvements on Hydra
on-chain performance. In discussions with researchers and internal auditors,
they also uncovered next steps on further securing the Head protocl using a
"full" minting policy.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Closed several gaps to align script implementation with specification <a href="https://github.com/input-output-hk/hydra/issues/452" target="_blank" rel="noopener noreferrer">#452</a><ul><li>Allow contest only once <a href="https://github.com/input-output-hk/hydra/pull/680" target="_blank" rel="noopener noreferrer">#680</a></li><li>Optimization through head output at index 0 <a href="https://github.com/input-output-hk/hydra/pull/700" target="_blank" rel="noopener noreferrer">#700</a></li><li>Value is preserved <a href="https://github.com/input-output-hk/hydra/pull/702" target="_blank" rel="noopener noreferrer">#702</a> + optimized exact value equality <a href="https://github.com/input-output-hk/hydra/pull/709" target="_blank" rel="noopener noreferrer">#709</a></li></ul></li><li>Analysed asymptotic complexity of some of our scripts and set up profiling toolchain to <a href="https://github.com/input-output-hk/hydra/pull/721" target="_blank" rel="noopener noreferrer">#721</a><img loading="lazy" src="https://user-images.githubusercontent.com/2621189/218124686-7a85b40d-12f7-4b00-ad16-128c99f5b707.png" class="img_ev3q"></li><li>Fixed our tooling around the Haskell language server</li><li>Discussed full minting policy with researchers</li><li>Started grooming “what we need for mainnet” on <a href="https://github.com/input-output-hk/hydra/issues/713" target="_blank" rel="noopener noreferrer">this</a> idea ticket and <a href="https://github.com/input-output-hk/hydra/milestone/8" target="_blank" rel="noopener noreferrer">milestone</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Implement full minting policy</li><li>All remaining protocol discrepancies are implemented or groomed as individual features</li><li>Ideally release 0.9.0 with updated scripts</li><li>Discuss what we need for mainnet (milestone planning)</li><li>Redraw transaction graphs for specification (upon feedback)</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-02-09-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-09-mithril"/>
        <updated>2023-02-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2304.1" target="_blank" rel="noopener noreferrer"><code>2304.1</code></a> distribution that enables the backward/forward compatibility mechanism implemented for seamlessly rolling out soft updates to  Mithril networks. They completed the implementation of the era reader trait that powers the era switch behavior. The team finalized the development of the era reader adapter that retrieves era activation markers from transactions on the Cardano chain. They also completed the relational design of the aggregator store.</p><p>Finally, they created new SPO nodes on the Mithril networks and upgraded the Cardano node to version <code>1.35.5</code> on their <code>devnet</code> and infrastructure.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Released the new distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2304.1" target="_blank" rel="noopener noreferrer"><code>2304.1</code></a></li><li>Fixed a bug that prevented some signers to sign with <code>2304.0-prerelease</code> <a href="https://github.com/input-output-hk/mithril/issues/716" target="_blank" rel="noopener noreferrer">#716</a></li><li>Completed the implementation of an <code>EraChecker</code> that checks if an era is active <a href="https://github.com/input-output-hk/mithril/issues/708" target="_blank" rel="noopener noreferrer">#708</a></li><li>Completed the implementation of an <code>EraReader</code> that gathers era activation data <a href="https://github.com/input-output-hk/mithril/issues/709" target="_blank" rel="noopener noreferrer">#709</a></li><li>Completed the implementation of an <code>EraReader</code> adapter with on chain transaction as source <a href="https://github.com/input-output-hk/mithril/issues/710" target="_blank" rel="noopener noreferrer">#710</a></li><li>Completed the relational design of the aggregator store <a href="https://github.com/input-output-hk/mithril/issues/476" target="_blank" rel="noopener noreferrer">#476</a></li><li>Completed adding a new SPO on the <code>testing-preview</code> network <a href="https://github.com/input-output-hk/mithril/issues/729" target="_blank" rel="noopener noreferrer">#729</a></li><li>Completed the upgrade of the Cardano node to <code>1.35.5</code> <a href="https://github.com/input-output-hk/mithril/issues/725" target="_blank" rel="noopener noreferrer">#725</a></li><li>Fixed flakiness in the CI <a href="https://github.com/input-output-hk/mithril/issues/734" target="_blank" rel="noopener noreferrer">#734</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-02-08-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-08-consensus"/>
        <updated>2023-02-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We continue refactoring the UTxO HD prototype while we wait for the system level
benchmarks. We have created a new repository that contains the <code>anti-diff</code>
packages used in this prototype.</p><p>On the Genesis front, we are preparing another meeting with the researchers to
audit the implementation design, and we continued working on basic tests and
simplifications.</p><p>During the past two weeks we also introduced two new tools. One for dumping CBOR
encoded blocks to JSON, and another to serve a local immutable DB.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd-prototype">UTxO HD Prototype<a class="hash-link" href="#utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We are in the process of refactoring the UTxO HD prototype, while we wait for
the system level benchmarks to confirm if the performance of the prototype is
satisfactory.</p><p>We also set up a repository for the <a href="https://github.com/input-output-hk/anti-diffs" target="_blank" rel="noopener noreferrer"><code>anti-diff</code></a> package, which
required us to refactor the code, write documentation, and prepare a release to
<a href="https://github.com/input-output-hk/cardano-haskell-packages" target="_blank" rel="noopener noreferrer">CHaP</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><p>We worked on <a href="https://github.com/input-output-hk/ouroboros-network/issues/4347" target="_blank" rel="noopener noreferrer">basic tests</a> for the <em>Limit on Eagerness</em> property of
Genesis. We also introduced further robustness and simplifications in the
Genesis Density governor. Finally, we developed a presentation to engage again
with the researchers on our Genesis implementation design.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fostering-collaboration">Fostering collaboration<a class="hash-link" href="#fostering-collaboration" title="Direct link to heading">​</a></h3><p>We are in the process of <a href="https://github.com/input-output-hk/ouroboros-consensus/pull/6" target="_blank" rel="noopener noreferrer">polishing</a> the <code>ouroboros-consensus</code>
documentation site, which we will use a the entry point for Consensus related
documentation. The first version will not be complete, but we plan on
systematically improving it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support">Support<a class="hash-link" href="#support" title="Direct link to heading">​</a></h3><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4335" target="_blank" rel="noopener noreferrer">added a tool</a> to <code>ouroboros-consensus-cardano-tools</code> which allows
to dump the Chain DB blocks or any given CBOR encoded blocks as JSON.</p><p>We also added <a href="https://github.com/input-output-hk/ouroboros-network/pull/4339" target="_blank" rel="noopener noreferrer">another tool</a> that serves an existing immutable DB via
BlockFetch and ChainSync. This tool can help in assisting our local benchmarking
efforts (for instance Genesis' ChainSync jumping prototype).</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-02-08-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-08-node-cli-api"/>
        <updated>2023-02-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-02-08 - 2023-02-21</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>More maintenance and resolving raised issues.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4889" target="_blank" rel="noopener noreferrer">Remove use of multiline literals</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4775" target="_blank" rel="noopener noreferrer">Markdown links CI check</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4755" target="_blank" rel="noopener noreferrer">Date ranges for copyright</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4894" target="_blank" rel="noopener noreferrer">Re-add support for decoding GenesisExtendedKey text envelope</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4885" target="_blank" rel="noopener noreferrer">Disallow empty cost model for create update proposal</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4815" target="_blank" rel="noopener noreferrer">Refactor code using onLeft and onNothing</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4876" target="_blank" rel="noopener noreferrer">Simplify SerialiseAsRawBytes type class</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-mainteance">CI &amp; project mainteance<a class="hash-link" href="#ci--project-mainteance" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4761" target="_blank" rel="noopener noreferrer">Fix bug in hash computation in cardano-cli genesis create-cardano</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4636" target="_blank" rel="noopener noreferrer">Cleanup exports of cardano-testnet</a></li><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4625" target="_blank" rel="noopener noreferrer">Handle pipes in cardano-cli</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4659" target="_blank" rel="noopener noreferrer">Render consistent plutus script failure output</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4666" target="_blank" rel="noopener noreferrer">Read network ID from environment</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4647" target="_blank" rel="noopener noreferrer">CLI option to append additional signatures to a transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">Cardano ping</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4777" target="_blank" rel="noopener noreferrer">Better error message for query utxo on oops</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4763" target="_blank" rel="noopener noreferrer">Remove simple script distinction</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4753" target="_blank" rel="noopener noreferrer">Export SubmitResult from Cardano.Api</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet-1">cardano-testnet<a class="hash-link" href="#cardano-testnet-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4845" target="_blank" rel="noopener noreferrer">Use Haskell variables for passing values</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-02-08-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-08-performance-and-tracing"/>
        <updated>2023-02-08T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ol><li>SECP benchmarking:  we ran several rounds of SECP benchmarks, refining the benchmark setup as we discovered the properties of the system.  After formulating an initial suggested change to the protocol parameters, we're currently running what we consider the final benchmark, to validate the underlying assumptions.</li><li>Release benchmarking:  we've performed a round of benchmarks for the hotfix 1.35 release update and initiated the 1.35.6 benchmarks.</li><li>New tracing:  the improvement in the tracing API, with the underlying restructuring, was completed and merged into the node.</li><li>New tracing:  before going live, we're performing the documentation update, as well as reworking the end user migration guide.</li><li>Open sourcing:  the benchmarking data publishing has been completed and deployed.  After populating it with relevant benchmark data and providing basic user documentation we can go live.</li><li>Infrastructure:  the cloud workbench backend is progressing well, the networking aspects of multi-region deployment are currently being worked on.</li><li>Infrastructure:  the NixOps workbench backend is still being worked on, as part of migration from cardano-ops and benchmarking infrastructure unification.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h2><p>We are approaching the end of a chain of SECP benchmarks, as we gradually eliminated deficiencies in the setup as we were discovering them and answering newly appearing questions:</p><ul><li>we improved the tx/block filling strategy in the generator, to maximise the per-block utilisation of resources and so better approximate the worst-case,</li><li>after a discovery of what looked like significant per-SC-call overhead, we again tweaked the the tx/block filling strategy,</li><li>finally, we're redoing all benchmarks together with a value-only run against the backdrop of Mainnet-sized datasets, to balance the suggested adjustment.  That also ran into difficulties wrt. limitations of our benchmarking hardware.</li></ul><p>In addition, we started benchmarks of the 1.35.6 release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h2><p>A rework of the new tracing system's internals and API was merged.  It extended the system with introspection, which enabled a range of improvements, some of which were implemented along the way.</p><p>Specifically, we were able to completely short-cut processing of messages generated by the tracers that were made provably ineffective by current tracing configuration.  Further, now ongoing work enabled by the introspection facilities, includes static validation of documentation and enhanced node state reporting.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">​</a></h2><p>On the opensourcing/transparency front, the benchmark data publishing machinery was finally fully assembled and put online.  As resources permit, we'll work on populating it with benchmarking data, preparing basic documentation and engaging the stakeholders.</p><p>The work on the cloud deployment capability of the Nomad workbench backend continued with focus on setting up inter-node networking and removal of locality assumptions.  A major step besides those, was completion of a switch-over to the directly-executable derivations, which eliminate the need for creation and distribution of images -- thereby increasing the speed of deployment.</p><p>The Nixops workbench backend progressed steadily, reaching minimal deployment capability.  The remaining parts are proper shared configuration generation, and porting of the run control functionality from cardano-ops.</p>]]></content>
        <author>
            <name>Serge Kosyrev</name>
            <uri>https://github.com/deepfire</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-02-03-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-03-crypto"/>
        <updated>2023-02-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>Mithril: We are creating helper functions to single out the usage of unsafe to facilitate auditing. We are also preparing a RFP for an audit of mithril's core library. Exploring future paths of mithril. </li><li>cardano-base: Decision of whether to continue with BLS12-381 or switch curves. Conversion Praos to PraosBatchCompat ready, as well as KES secure forgetting.  </li><li>KES agent: using snockets and making things testable in IOSim </li><li>MuSig2: GH actions updated for checking the files whether they end with an empty line. Also, we reorganized the library.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>Given that removing the usage of transmute really affects the benchmarks, we decided to group all unsafe functions to facilitate auditing <a href="https://github.com/input-output-hk/mithril/pull/722" target="_blank" rel="noopener noreferrer">PR#722</a></li><li>We have progressed with the RFP document for the mithril-stm library. We are documenting the differences with respect with the original paper.</li><li>We are exploring possible paths of how mithril could be used 'as-a-service'. Other projects such as sidechains or Catalyst would benefit of such a service. We are at a very early stage of brainstorming how it could work.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>There has been a very thorough discussion with potential users of the BLS12-381 bindings if that is the best curve. We have considered alternatives such as Pasta curves, Pluto-Eris or BLS12-377, and considering it's trade-offs. Seems that the most interesting curve to have on main-net is still 381. </li><li>The team is gaining expertise in SNARKs to be able to experiment with them, and conclude whether the bindings will allow for SNARK verification on main-net in a timely manner.</li><li>The update VRF <a href="https://github.com/input-output-hk/cardano-base/pull/341" target="_blank" rel="noopener noreferrer">PR#341</a> is finally merged, and we are ready to merge <a href="https://github.com/input-output-hk/cardano-base/pull/344" target="_blank" rel="noopener noreferrer">PR#344</a>, which implements conversion functions from the compatible types between Praos and PraosBatchCompat.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>Use of snockets to send the data directly from the socket to secure memory. </li><li>We realized that in order for the DirectSerialise / DirectDeserialise classes to work against IOSim, we have to generalize a bunch of additional primitives</li><li>Our plans are to: (1) Split up MonadSodium into separate typeclasses, each capturing a more sensible concern; (2) Rename those typeclasses to something that reflects their nature better.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="musig2">MuSig2<a class="hash-link" href="#musig2" title="Direct link to heading">​</a></h3><p>The GitHub Action <a href="https://github.com/fernandrone/linelint" target="_blank" rel="noopener noreferrer">linelint</a> is used to check the files.</p><ul><li>A new job for linting is added to the file <code>/.github/workflows/ci.yml</code>. The rules are configured in the file <code>/.github/workflows/.linelint.yml</code>. Some files from the configuration of <code>libsecp</code> were failing, so in the rules in <code>.linelint.yml</code> the failing files are denoted to be ignored by the linter.</li><li>Folders are reorganized. We created a folder to handle the example. This folder includes the <code>examplemusig2.c</code>, a distinct <code>config.h</code>, and <code>helper.c</code>. The example is enhanced by implementing the functions in the helper for the configuration given in <code>config.h</code>.  The number of messages is different than the tests. The example is made more generic to run with a loop.</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Goedel Team Update]]></title>
        <id>2023-02-03-goedel</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-03-goedel"/>
        <updated>2023-02-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The team works on applied research and consulting in formal methods]]></summary>
        <content type="html"><![CDATA[<p>The team works on applied research and consulting in formal methods
that is directly applicable to evidence based engineering in Core Tech
and beyond.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint the team has been preparing several papers for peer review
and knowledge sharing and consulting within IO and the community.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="details">Details<a class="hash-link" href="#details" title="Direct link to heading">​</a></h2><ul><li>R&amp;D Seminar on experience participating in a member based organisation</li><li>Full day tutorial on performance engineering presented at HiPEAC
2023 conference</li><li>Finished preparing and submitted a paper on performance engineering
to an ACM workshop</li><li>Preparing a draft paper for future submission about verifying design
refinements for distributed system design</li><li>Consulting on performance design of other IO projects</li></ul>]]></content>
        <author>
            <name>James Chapman</name>
            <uri>https://github.com/jmchapman</uri>
        </author>
        <category label="goedel" term="goedel"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-02-03-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-03-hydra"/>
        <updated>2023-02-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team completed the Hydra specification with a section about
rollbacks and updated graphs
(<a href="https://github.com/input-output-hk/hydra/issues/448" target="_blank" rel="noopener noreferrer">#448</a>). In a next step,
the specification will be made more approachable and an open standard. They
improved their <code>hydra-cluster</code> tool to launch a local <code>--devnet</code> sandbox
environment and continued aligning the <code>hydra-plutus</code> scripts with the
specification by hardening the checks on <code>close</code> and <code>contest</code> transactions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Completed the specification with a section about rollbacks and updated graphs
<a href="https://github.com/input-output-hk/hydra/issues/448" target="_blank" rel="noopener noreferrer">#448</a>, with a follow-up on making it more approachable and an open standard.</li><li>Continued spec review with internal auditor and incorporated changes.</li><li>Talked to TxPipe about how Demeter and Hydra could work together</li><li>The <code>hydra-cluster</code> executable can be used to launch a local <code>--devnet</code> sandbox environment.</li><li>Reproduced the “head being stuck on network outage” bug<ul><li>relates to what liveness guarantees we can / want to give on the protocol level and needs to be discussed.</li></ul></li><li>Progressed with higher velocity by addressing more and more gaps <a href="https://github.com/input-output-hk/hydra/pull/677" target="_blank" rel="noopener noreferrer">#677</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Upstream our JSON instances to the ledger</li><li>Close all transaction security related on-chain gaps</li><li>Ideally release 0.9.0 with updated scripts</li><li>Groom &amp; plan (or not) protocol changes yielded from specification discussions -&gt; updated roadmap</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-02-02-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-02-02-ledger"/>
        <updated>2023-02-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>Much of the work the past two weeks involved integration efforts,
cleaning up and debugging some serialization issues,
adding tests, and work on large projects that are still ongoing.
We also released a CIP this week that aims to make the ledger
a registered CIP category.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ledger-evolution-cip">Ledger evolution CIP<a class="hash-link" href="#ledger-evolution-cip" title="Direct link to heading">​</a></h3><p>We published a
<a href="https://github.com/cardano-foundation/CIPs/pull/456" target="_blank" rel="noopener noreferrer">CIP</a>
that will make the Cardano ledger a registered category of the CIP process.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="serialization-issues">Serialization issues<a class="hash-link" href="#serialization-issues" title="Direct link to heading">​</a></h3><p>We had previously thought that we had found a serialization problem with the redeemers,
but it turned out to just be particularly confusing code.
We have now clarified the issue for the future.</p><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3263" target="_blank" rel="noopener noreferrer">pull-3263</a>, <a href="https://github.com/input-output-hk/cardano-ledger/pull/3269" target="_blank" rel="noopener noreferrer">pull-3269</a>, and <a href="https://github.com/input-output-hk/cardano-ledger/pull/3268" target="_blank" rel="noopener noreferrer">pull-3268</a>.</p><p>Starting in protocol version 9, we will no longer accept duplicate keys in CBOR maps.</p><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3277" target="_blank" rel="noopener noreferrer">pull-3277</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-tests">New tests<a class="hash-link" href="#new-tests" title="Direct link to heading">​</a></h3><p>We added a new property test suite for some of our custom containers.</p><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3270" target="_blank" rel="noopener noreferrer">pull-3270</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="progress-on-a-better-cost-model-serialization-situation">Progress on a better cost model serialization situation.<a class="hash-link" href="#progress-on-a-better-cost-model-serialization-situation" title="Direct link to heading">​</a></h3><p>We are still working our way through <a href="https://github.com/input-output-hk/cardano-ledger/issues/2902" target="_blank" rel="noopener noreferrer">issue-2902</a>.
Towards this end, we are now properly gating the new flexible encoders
until version 9.</p><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3274" target="_blank" rel="noopener noreferrer">pull-3274</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nightly-tests">Nightly tests<a class="hash-link" href="#nightly-tests" title="Direct link to heading">​</a></h3><p>We are still experimenting with moving more CI actions to GitHub actions.</p><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3276" target="_blank" rel="noopener noreferrer">pull-3276</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="constraint-based-generators">Constraint based generators<a class="hash-link" href="#constraint-based-generators" title="Direct link to heading">​</a></h3><p>We continue to add to our proof of concept for constraint based generators.
See the previous ledger update for more information about this project.</p>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-01-27-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-27-hydra"/>
        <updated>2023-01-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team had a monthly review meeting with their stakeholders,
contributors and interested people from the community. The monthly repot for
<a href="https://hydra.family/head-protocol/monthly/2023-01" target="_blank" rel="noopener noreferrer">January 2023</a> is a digest
of the things presented and also includes a summary of the meeting. The Hydra
specification was getting discussed and the team is incorporating suggested
changes of reviewers. Last but not least, they compute and publish script
information on every PR and also on the
<a href="https://hydra.family/head-protocol/benchmarks/transaction-cost/#script-summary" target="_blank" rel="noopener noreferrer">website</a>
now.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Had the monthly review meeting with a broader audience</li><li>Published the monthly report for <a href="https://hydra.family/head-protocol/monthly/2023-01" target="_blank" rel="noopener noreferrer">January 2023</a></li><li>Reviewed the spec and discussed individual aborts with researchers</li><li>Compute and publish script information along benchmarks on every PR and <a href="https://hydra.family/head-protocol/benchmarks/transaction-cost/#script-summary" target="_blank" rel="noopener noreferrer">website</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Add rollback section to Hydra spec, update pictures and publish it as part of repository</li><li>Discuss bigger spec findings (full minting policy, individual aborts, split fanout) as change/pull requests on the spec in the repository.</li><li>Groom &amp; plan actions required for a maintainable Head explorer + break down <!-- -->“<!-- -->align gaps<!-- -->”<!-- --> feature.</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-01-26-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-26-mithril"/>
        <updated>2023-01-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team released a new <a href="https://github.com/input-output-hk/mithril/releases/tag/2302.0" target="_blank" rel="noopener noreferrer"><code>2302.0</code></a> distribution that activates the optimization of the snapshot digest computation on the signer and aggregator nodes. They have implemented a backward/forward compatibility mechanism for handling seamless soft updates of the Mithril networks without using synchronous updates when possible. The team also worked on the proof of concept to rely on an on-chain transaction to synchronously trigger the era switch of all the signer and aggregator nodes.</p><p>Finally, they finished upgrading the devnet, fixed the flakiness issues in the end-to-end tests of the CI, and upgraded the SPO documentation to set up a Mithril signer node.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Released the new distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2302.0" target="_blank" rel="noopener noreferrer"><code>2302.0</code></a></li><li>Implemented a backward/forward compatibility mechanism for API messages <a href="https://github.com/input-output-hk/mithril/issues/688" target="_blank" rel="noopener noreferrer">#688</a>:<ul><li>Implement the mechanism for the signer registration <a href="https://github.com/input-output-hk/mithril/issues/689" target="_blank" rel="noopener noreferrer">#689</a></li><li>Implement the mechanism for the signature registration <a href="https://github.com/input-output-hk/mithril/issues/693" target="_blank" rel="noopener noreferrer">#693</a></li><li>Implement the mechanism for epoch settings <a href="https://github.com/input-output-hk/mithril/issues/695" target="_blank" rel="noopener noreferrer">#695</a></li><li>Implement the mechanism for certificate pending <a href="https://github.com/input-output-hk/mithril/issues/696" target="_blank" rel="noopener noreferrer">#696</a></li><li>Implement the mechanism for certificate <a href="https://github.com/input-output-hk/mithril/issues/697" target="_blank" rel="noopener noreferrer">#697</a></li><li>Implement the mechanism for snapshots list <a href="https://github.com/input-output-hk/mithril/issues/698" target="_blank" rel="noopener noreferrer">#698</a></li><li>Implement the mechanism for snapshot <a href="https://github.com/input-output-hk/mithril/issues/699" target="_blank" rel="noopener noreferrer">#699</a></li><li>Update enforcement of API version with Semver <a href="https://github.com/input-output-hk/mithril/issues/705" target="_blank" rel="noopener noreferrer">#705</a></li></ul></li><li>Completed the PoC implementation of backward compatibility with <code>protobuf</code> <a href="https://github.com/input-output-hk/mithril/issues/677" target="_blank" rel="noopener noreferrer">#677</a></li><li>Completed the PoC implementation of backward compatibility with <code>avro</code> <a href="https://github.com/input-output-hk/mithril/issues/678" target="_blank" rel="noopener noreferrer">#678</a></li><li>Completed the PoC to Read/Write transaction on chain for Era activations <a href="https://github.com/input-output-hk/mithril/issues/672" target="_blank" rel="noopener noreferrer">#672</a></li><li>Completed the upgrade Cardano devnet to 1.35.4 <a href="https://github.com/input-output-hk/mithril/issues/523" target="_blank" rel="noopener noreferrer">#523</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-01-25-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-25-consensus"/>
        <updated>2023-01-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks, the consensus team finished the testing activities
around the UTxO-HD prototype. This is a very important milestone which will
enable us to run system-level tests and benchmarks, as well as start refactoring
and cleaning the prototype. Regarding our Genesis workstream, we elaborated a
roadmap that gives an indication of the remaining work. We also continued our
work on benchmarking chain-sync-jumping. We also continued working on improving
the way we handle blocks from the future, and advancing the integration of the
new VRF and KES crypto.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd-prototype">UTxO HD Prototype<a class="hash-link" href="#utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>As the prototype is nearing its completion, it was important to have enough
confidence that we will be able to move additional parts of the ledger state
onto disk. We worked together with the Ledger team to <a href="https://github.com/input-output-hk/ouroboros-network/pull/4296" target="_blank" rel="noopener noreferrer">elaborate a
sketch</a> on how the UTxO-HD design would accommodate the migration of
additional data from memory to disk. This gave us enough confidence that the
current architecture will be extensible in the future.</p><p>On the testing front, we <a href="https://github.com/input-output-hk/ouroboros-network/pull/4274" target="_blank" rel="noopener noreferrer">added</a> property-based tests for the UTxO-HD
type classes. </p><p>We also <a href="https://github.com/input-output-hk/ouroboros-network/issues/4289" target="_blank" rel="noopener noreferrer">enabled disabled components</a>, and addressed several
technical debt issues:</p><ul><li>Implement <code>splitSized</code> anti-diff split (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4269" target="_blank" rel="noopener noreferrer">#4269</a>), and integrate it
into consensus (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4273" target="_blank" rel="noopener noreferrer">#4273</a>).</li><li>Renaming of <code>peekVal</code> to <code>peekMDBVal</code> (<a href="https://github.com/input-output-hk/lmdb-simple/pull/7" target="_blank" rel="noopener noreferrer">#7</a>).</li></ul><p>We ran ad-hoc benchmarks for syncing a chain from scratch and replaying. We
found a race condition in the LMDB backing store, which <a href="https://github.com/input-output-hk/ouroboros-network/pull/4283" target="_blank" rel="noopener noreferrer">we fixed</a>.
After the fix we were able to successfully run these benchmarks. The results
were published by <a href="https://github.com/input-output-hk/ouroboros-network/pull/4295" target="_blank" rel="noopener noreferrer">this pull request</a>.</p><p>We used our <code>db-analyser</code> tool to benchmark the cost of reading keys and
flushing values to disk. The following plot shows the duration of these disk
operation in relation to the main ledger operations, where we can see that the
cost of the former are comparatively low. The spike at the beginning of the
graph is when, at the start of the Shelley era, the <em>entire</em> UTxO set is flushed
to disk.</p><p><img loading="lazy" alt="UTxO-HD read and flush benchmarks" src="/cardano-updates/assets/images/2023-01-25-consensus-utxo-hd-read-and-flush-benchmarks-6b129a1acaa4bb48443ee81add51fd39.png" width="1600" height="800" class="img_ev3q"></p><p>After months of hard work adding tests for the prototype, we are ready to run
end-to-end tests on the node, and system level benchmarks. This signals a very
important milestone for the UTxO-HD workstream 🎉.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><p>We elaborated a <a href="https://github.com/input-output-hk/ouroboros-network/blob/a626c84f6df585dd27d735eb7eec73904a1f570e/ouroboros-consensus/docs/2023-Jan-Genesis-roadmap.md" target="_blank" rel="noopener noreferrer">high-level decomposition</a> of the remaining
work for Genesis. We also continued benchmarking the chain-sync-jumping
happy-path.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>We continued working on improving the way we handle blocks from the future.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support">Support<a class="hash-link" href="#support" title="Direct link to heading">​</a></h3><p>We completed the mapping of <code>Crypto</code> to <code>HeaderCrypto</code> and body <code>Crypto</code>.
<code>HeaderCrypto</code> is moved to <code>cardano-protocol-tpraos</code>. We created a draft <a href="https://github.com/input-output-hk/cardano-ledger/pull/3262" target="_blank" rel="noopener noreferrer">pull
request</a> to facilitate compiling consensus.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2023-01-25-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-25-node-cli-api"/>
        <updated>2023-01-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2023-01-25 - 2023-02-07</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>General clean up (error message improvement) and focus on CI maintenance. Multiple pools now supported in the <code>cardano-cli query stake-snapshot</code> command. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4853" target="_blank" rel="noopener noreferrer">Fix how changed files are selected in stylish-haskell CI check</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4755" target="_blank" rel="noopener noreferrer">Copyright updates</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4848" target="_blank" rel="noopener noreferrer">Remove hlint from nix required CI</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4838" target="_blank" rel="noopener noreferrer">Remove reconfigure-hlint.sh script</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4837" target="_blank" rel="noopener noreferrer">Fix hlint warnings</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4833" target="_blank" rel="noopener noreferrer">Implement ADR-2: Restructure modules for generators</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4803" target="_blank" rel="noopener noreferrer">Stylish Haskell in CI</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4802" target="_blank" rel="noopener noreferrer">Revert skip doc in ci</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4800" target="_blank" rel="noopener noreferrer">Skip CI on doc only changes</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4792" target="_blank" rel="noopener noreferrer">Skip CI if only changes are documentation</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4776" target="_blank" rel="noopener noreferrer">Build all of cardano-node in CI</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4766" target="_blank" rel="noopener noreferrer">Check cabal files in CI</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4785" target="_blank" rel="noopener noreferrer">Straight line error handling</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4279" target="_blank" rel="noopener noreferrer">Multiple pools support in query stake snapshot</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4787" target="_blank" rel="noopener noreferrer">New NodeToClientVersionOf typeclass</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4832" target="_blank" rel="noopener noreferrer">Remove NoImplicitPrelude from cardano-api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4809" target="_blank" rel="noopener noreferrer">Add ReaderT of NodeToClientVersion to LocalStateQueryExpr</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4808" target="_blank" rel="noopener noreferrer">Use hoistMaybe</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4788" target="_blank" rel="noopener noreferrer">Better error message for query utxo without oops</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4805" target="_blank" rel="noopener noreferrer">New query stake-snapshot integration test</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4671" target="_blank" rel="noopener noreferrer">Make leadership-schedule test less flaky</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-mainteance">CI &amp; project mainteance<a class="hash-link" href="#ci--project-mainteance" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4761" target="_blank" rel="noopener noreferrer">Fix bug in hash computation in cardano-cli genesis create-cardano</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4636" target="_blank" rel="noopener noreferrer">Cleanup exports of cardano-testnet</a></li><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4625" target="_blank" rel="noopener noreferrer">Handle pipes in cardano-cli</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4659" target="_blank" rel="noopener noreferrer">Render consistent plutus script failure output</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4666" target="_blank" rel="noopener noreferrer">Read network ID from environment</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4647" target="_blank" rel="noopener noreferrer">CLI option to append additional signatures to a transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">Cardano ping</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4777" target="_blank" rel="noopener noreferrer">Better error message for query utxo on oops</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4763" target="_blank" rel="noopener noreferrer">Remove simple script distinction</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4753" target="_blank" rel="noopener noreferrer">Export SubmitResult from Cardano.Api</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet-1">cardano-testnet<a class="hash-link" href="#cardano-testnet-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4845" target="_blank" rel="noopener noreferrer">Use Haskell variables for passing values</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-01-20-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-20-crypto"/>
        <updated>2023-01-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The open fronts that the crypto team is working on are:</p><ul><li>Mithril: We explored whether some uses of <code>transmute</code> could be removed, but it resulted in considerable regression.  </li><li>cardano-base: Some issues with Nix are blocking merge of VRF update. BLS12-381 benchmarks where quite satisfactory. Next steps will be defined by cryptography strategic decision. </li><li>KES agent: An inconsistency between <code>contra-tracer</code> available in hackage and the one in cardano-haskell delayed our progress. Now we are adapting PRs to the <code>contra-tracer</code> used by consensus. </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>We removed the usage of transmute in mithril-core (and exchanged it with ser/deser, as unfortunately there is no other way with the library we currently use). However, the benchmarks showed an important regression - ~30% worse on average <a href="https://github.com/input-output-hk/mithril/pull/675" target="_blank" rel="noopener noreferrer">PR#675</a>. We decided to keep transmute, but instead group all its usage in helper functions, to facilitate auditing. </li><li>We are writing a RFP for the audit of the core library. </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>A problem with Nix is blocking merge of <a href="https://github.com/input-output-hk/cardano-base/pull/341" target="_blank" rel="noopener noreferrer">PR#341</a></li><li>Plutus team ran <a href="https://github.com/input-output-hk/plutus/blob/kwxm/BLS12_381/prototype/plutus-benchmark/bls-benchmarks/Main.hs" target="_blank" rel="noopener noreferrer">benchmarks</a> of BLS12-381 built-ins. The results are satisfactory, and while we have yet not implemented SNARK verification in plutus, it all seems to point that we'll be able to verify some proofs in a single script execution.</li><li>Team is fully digesting the Plonk paper. </li><li>There's been a lot of discussions (with internal and external projects) regarding pairings in plutus, and what elliptic curve should be used.  </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>A little unforseen delay has been caused by a mismatch in the use of <code>contra-tracer</code>. The one in hackage and that in cardano-haskell are not compatible. Unfortunately, for secure forgetting we use that of hackage, and now realised. We are <a href="https://github.com/input-output-hk/cardano-base/pull/255/commits/39b2d9473aa296976825248360a73cf066065431" target="_blank" rel="noopener noreferrer">doing the change</a>, but still the CI is not happy.</li><li>The <a href="https://github.com/input-output-hk/cardano-base/pull/317/commits/39b2d9473aa296976825248360a73cf066065431" target="_blank" rel="noopener noreferrer">same</a> was needed for the KES agents prerequisites <a href="https://github.com/input-output-hk/cardano-base/pull/317" target="_blank" rel="noopener noreferrer">PR#317</a>.</li><li>We've started working with the agent itself again, upgrading the cardano-base dependency and adding ouroboros-network-framework dependency</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-01-20-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-20-hydra"/>
        <updated>2023-01-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team has been focusing on the write-up of the Hydra HeadV1
specification. Of which a first version has been aggregated and is currently
under review. They aligned the on-chain scripts of reimbursing funds on abort
like defined in the specification, improved the mutation test framework to have
more control when testing plutus scripts. The added HeadId in the API and the
TUI example client make <code>hydra-node</code> easier to use and a first experiment of a
Hydra Head explorer was showing the utility of this - see what Heads exist on
the <code>preview</code> network <a href="http://explorer.hydra.family" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>HeadId to API and display in the TUI <a href="https://github.com/input-output-hk/hydra/pull/678" target="_blank" rel="noopener noreferrer">#678</a></li><li>Experiment of creating a hydra explorer, first result hosted <a href="http://explorer.hydra.family" target="_blank" rel="noopener noreferrer">here</a></li><li>Improved mutation framework allowing to fail for the right reason <a href="https://github.com/input-output-hk/hydra/pull/679" target="_blank" rel="noopener noreferrer">#679</a></li><li>Correctly reimburse funds in abort (matching the spec) <a href="https://github.com/input-output-hk/hydra/pull/670" target="_blank" rel="noopener noreferrer">#670</a></li><li>Finished a first write-up of the Hydra HeadV1 spec: <a href="https://www.overleaf.com/read/bbqzmptcxryj" target="_blank" rel="noopener noreferrer">Read it on overleaf</a> (<a href="https://github.com/input-output-hk/hydra/blob/master/SUPPORT.md" target="_blank" rel="noopener noreferrer">Communication channels</a> for feedback)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Monthly review meeting with a broader audience</li><li>Groom &amp; plan actions required for a maintainable Head explorer</li><li>Break “align gaps” feature into smaller chunks (at least on- /off-chain) and groom it</li><li>Review the spec &amp; discuss individual aborts with researchers (a bigger open question)</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2023-01-20-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-20-network"/>
        <updated>2023-01-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We have been working towards <code>cardano-node-1.35.5</code> release.  QA &amp; benchmarking
teams gave a green light for the release, and we made decent progress with some
CI problem which we encountered on the way (<a href="https://github.com/input-output-hk/cardano-node/pull/4612" target="_blank" rel="noopener noreferrer">PR #4612</a>). We are also working on
peer sharing, making improvements in our testing infrastructure, reducing
technical debt and making progress towards <code>io-sim-1.0.0.0</code>. Galois is making
progress on Handshake improvements.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><p>Our diffusion simulation network now includes a mixed network of <code>initiator
only</code> and <code>initiator and responder</code> nodes. <a href="https://github.com/input-output-hk/ouroboros-network/issues/4222" target="_blank" rel="noopener noreferrer">issue #4222</a></p><p>We are now reviewing the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4019" target="_blank" rel="noopener noreferrer">peer sharing pull request</a>.</p><p>We are also reviewing pull request which introduces handshake query flag. <a href="https://github.com/input-output-hk/ouroboros-network/pull/4256" target="_blank" rel="noopener noreferrer">PR #4256</a></p><p>We fixed a bug in our network simulator.  The bug was triggered when a node
died when performing a simultaneous TCP open (a corner case of a corner case!). <a href="https://github.com/input-output-hk/ouroboros-network/pull/4265" target="_blank" rel="noopener noreferrer">PR #4265</a></p><p>We also refactored <code>Snocket</code> interface and removed the bearer construction from
its methods. <a href="https://github.com/input-output-hk/ouroboros-network/pull/4260" target="_blank" rel="noopener noreferrer">PR #4260</a></p><p>We are working towards releasing <code>io-sim-1.0.0.0</code> on Hackage, which includes
reviewing two PRs: <a href="https://github.com/input-output-hk/io-sim/pull/57" target="_blank" rel="noopener noreferrer">PR #57</a> and <a href="https://github.com/input-output-hk/io-sim/pull/60" target="_blank" rel="noopener noreferrer">PR #60</a> as well as writing an announcement
blog post.  </p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[SRE Team Update]]></title>
        <id>2023-01-20-sre</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-20-sre"/>
        <updated>2023-01-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The SRE team continues work on Cicero, Tullia, and Bitte, as well as providing
support for cardano-world.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cicero">Cicero<a class="hash-link" href="#cicero" title="Direct link to heading">​</a></h3><ul><li>Fixed various race conditions around transformers.</li><li>Brought our CI up to date.</li><li>Migrated to the Nomad exec driver with Nix support for many actions.</li><li>Moved Nix builds to the Nomad clients for much better cache locality.</li><li>Ongoing work on vastly improving the action matching and evaluation speed.</li><li></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tullia">Tullia<a class="hash-link" href="#tullia" title="Direct link to heading">​</a></h3><ul><li>Made it easier to support cloning from a PR's fork</li><li>Update to latest std</li><li>Add workaround for cgroup issue: <a href="https://github.com/hashicorp/nomad/issues/12877" target="_blank" rel="noopener noreferrer">nomad#12877</a></li><li>github preset: add <code>github.ci.remote</code> and <code>(read|get)Repository</code> functions</li><li>Fix various issues around CUE handling</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bitte">Bitte<a class="hash-link" href="#bitte" title="Direct link to heading">​</a></h3><ul><li>Upgrade to NixOS 22.11</li><li>Prototype usage of <a href="https://colmena.cli.rs" target="_blank" rel="noopener noreferrer">Colmena</a> for deploys instead of <a href="https://github.com/serokell/deploy-rs" target="_blank" rel="noopener noreferrer">deploy-rs</a></li><li>Finalized work on Equinix Metal support</li><li>Prototype better secrets management with <a href="https://github.com/yaxitech/ragenix" target="_blank" rel="noopener noreferrer">ragenix</a> instead of <a href="https://github.com/Mic92/sops-nix" target="_blank" rel="noopener noreferrer">sops-nix</a></li><li>Improve CI and bring it up to date</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-world">cardano-world<a class="hash-link" href="#cardano-world" title="Direct link to heading">​</a></h3><ul><li>Fixd various OOM issues on preview and preprod</li><li>Rotated KES keys on preview and preprod</li><li>Optimize mainnet db-sync to cope with higher load</li><li>Fix an issue where PostgreSQL would fail after a reboot</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bitte-world">bitte-world<a class="hash-link" href="#bitte-world" title="Direct link to heading">​</a></h3><ul><li>Updated to NixOS 22.11</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-world">ci-world<a class="hash-link" href="#ci-world" title="Direct link to heading">​</a></h3><ul><li>Updated to NixOS 22.11</li><li>Added Equnix cluster</li><li>Improve caching of Nix builds</li></ul>]]></content>
        <author>
            <name>Michael Fellinger</name>
            <uri>https://github.com/manveru</uri>
        </author>
        <category label="sre" term="sre"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-01-19-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-19-ledger"/>
        <updated>2023-01-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The ledger team completed some preliminary ground work in preparation for CIP-1694
(restructuring the ledger state),
fixed the PDF hosting problem (mostly the formal specs),
built out more of the new user-friendly ledger API,
finished a proof of concept for constraint-based generators for property tests
(with the hopes of being able to replace our trace generators one day),
and addressed technical debt.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="restructuring-the-ledger-state">Restructuring the ledger state<a class="hash-link" href="#restructuring-the-ledger-state" title="Direct link to heading">​</a></h3><p>The existing governance structures will be replace in the conway ledger era,
as described in CIP-1694.
In particular, the ledger rules will be restructured as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   BBODY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |-------------------------------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    v                               v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   TICK                            LEDGERS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                               |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |---------|                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    v         v                     v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   RUPD     ~NEWEPOCH~            ~LEDGER~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              |                     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              |----------|          |--------|-------------------|-----------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              v          v                   v                   v           v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ~EPOCH~     +ENACTMENT+         DELEGS              UTXOW       +TALLY+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              |                              |                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              |---------|------------|       v                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              v         v            v      DELPL                v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             SNAP      POOLREAP    -UPEC-    |                  UTXO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             |--------|          |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                             v        v          v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                            POOL     DELEG     ~UTXOS~</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-..- Removed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+..+ Added</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~..~ Modified</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Moreover, the ledger state will also be restructured in accordance with the new rules.
In the conway code, we have now removed UPEC, added TALLY, and stubbed ENACTMENT.
We have also adapted all the data structures in the ledger state.</p><p>See:</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3216" target="_blank" rel="noopener noreferrer">pull-3216</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pdf-hosting">PDF hosting<a class="hash-link" href="#pdf-hosting" title="Direct link to heading">​</a></h3><p>We now build all of our PDFs using a GitHub action which is triggered by pushing a tag
with a specific form, <code>cardano-ledger-spec-YYYY-MM-DD</code>.
The action creates a GitHub release containing the PDFs.
The links in the main ledger README now point to the PDFs in the latest release.</p><p>See:</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3245" target="_blank" rel="noopener noreferrer">pull-3245</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3260" target="_blank" rel="noopener noreferrer">pull-3260</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="powering-the-new-ledger-api">Powering the new ledger API<a class="hash-link" href="#powering-the-new-ledger-api" title="Direct link to heading">​</a></h3><p>We have now removed all the <code>HasField</code> instances from the protocol parameter data types,
and replaced them with lenses.
This is probably the last major restructuring that the ledger team will do on the code base
for the API for a while
(the Plutus tools team will be working on it next, see <a href="https://github.com/input-output-hk/cardano-ledger/projects/5" target="_blank" rel="noopener noreferrer">here</a>).
We also added a new helpful function <code>ensureMinCoinTxOut</code>.</p><p>See:</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3242" target="_blank" rel="noopener noreferrer">pull-3242</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3248" target="_blank" rel="noopener noreferrer">pull-3248</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="constraint-based-generators">Constraint-based generators<a class="hash-link" href="#constraint-based-generators" title="Direct link to heading">​</a></h3><p>Our largest scale property tests generate an initial ledger state and a long sequence of valid blocks
which span several epochs, mimicking a real network.
These tests are, in theory, excellent for checking properties.
They are, however, very difficult to maintain and are not as random as we would like
(a lot of bias has to be introduced to keep the ledger state in enough order to keep generating blocks).</p><p>We would like to switch to tests which instead generate a random ledger state representative
of not just an initial state, generate a single random valid block, and then test our properties.
The hope is that these will be much more random and easier to maintain.</p><p>We have finished a proof of concept are encouraged that this approach could work!</p><p>See:</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3219" target="_blank" rel="noopener noreferrer">pull-3219</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3244" target="_blank" rel="noopener noreferrer">pull-3244</a> massive CI speedup</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3249" target="_blank" rel="noopener noreferrer">pull-3249</a> better types for fees in the protocol parameters</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3264" target="_blank" rel="noopener noreferrer">pull-3264</a> move our annotator code to the <code>cardano-ledger-binary</code> package where it belongs</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3239" target="_blank" rel="noopener noreferrer">pull-3239</a> move the <code>Wdrls</code> type to the <code>Core</code> module.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB-sync Team Update]]></title>
        <id>2023-01-14-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-14-db-sync"/>
        <updated>2023-01-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>After spending the last months on improving DBSync and releasing <code>13.1.0.0</code> the DBSync team focused
the last weeks on integrating upstream changes and tech debt. This includes integrating CHaP, the
new leger core and ghc-9.2.4</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><ul><li>Integrate CHaP
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1331" target="_blank" rel="noopener noreferrer">#1331</a></li><li>Integrate new ledger core <code>0.1.1.1</code> and ghc-9.2
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1332" target="_blank" rel="noopener noreferrer">#1332</a></li><li>Technical debt: Add code formatter fourmolu
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1334" target="_blank" rel="noopener noreferrer">#1334</a></li><li>Preparing and tracking Conway and UTxO integration</li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2023-01-13-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-13-hydra"/>
        <updated>2023-01-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>Since last weekly update before christmas, the Hydra team worked on the
technical specification, closed gaps in <code>hydra-plutus</code> scripts, made the unique
<code>headId</code> available to Hydra clients through the API, allow the <code>hydra-node</code> to
explicitly synchronize from genesis (if configured), and fixed smaller log and
build issues reported by new users.</p><p>Besides this, a retrospective <a href="https://cardanofoundation.org/en/news/hydra-head-protocol-an-open-source-solution-for-scalability/" target="_blank" rel="noopener noreferrer">blog
post</a>
was published by Matthias Benkort (CF) on Hydra, summarizing our progress made
in 2022 also an outlook where Hydra is headed for in 2023. Also, the team had
some first sessions on the voting project with Catalyst and the CF.</p><p>A full digest monthly digest for December 2022 can be found on the <a href="https://hydra.family/head-protocol/monthly/2022-12" target="_blank" rel="noopener noreferrer">hydra
website</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Had some first sessions on the voting project with Catalyst and CF</li><li>Published retrospective <a href="https://cardanofoundation.org/en/news/hydra-head-protocol-an-open-source-solution-for-scalability/" target="_blank" rel="noopener noreferrer">blog
post</a>
by Matthias Benkort (CF) on Hydra, summarizing our progress made in 2022 also
an outlook where Hydra is headed for in 2023.</li><li>Worked on the LaTeX spec for HydraHeadV1, not final or published yet - <a href="https://github.com/ch1bo/hydra-spec" target="_blank" rel="noopener noreferrer">latest
version in this repository</a>.</li><li>Add unique <code>headId</code> to API and hence make it available to clients.</li><li>Allow <code>hydra-node</code> to explicitly synchronize from genesis using <code>--start-chain-from 0</code>.</li><li>Closed gaps in <code>hydra-plutus</code> scripts<ul><li>bounded transaction validity (<a href="https://hydra.family/head-protocol/adr/21/" target="_blank" rel="noopener noreferrer">ADR21</a>)</li><li>enforcing contract continuity via state token in output</li></ul></li><li>Fixed JSON for some logs and smaller build issues reported by new users.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Reach out to have <code>hydra-tutorial</code> integrated.</li><li>Plan the next couple of months.</li><li>Complete checking reimbursing of commits in head validator.</li><li>Align plutus scripts to spec and simplify them (identified some simplifications)</li><li>Improve mutation framework to be sure we fail tests for the right reasons</li><li>Complete the spec except the open points (&lt;5) and also discuss them with researchers.</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node Release Team Update]]></title>
        <id>2023-01-13-release</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-13-release"/>
        <updated>2023-01-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Node Reelease Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-reelease-update">Node Reelease Update<a class="hash-link" href="#node-reelease-update" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2022-11-02---2023-01-13">2022-11-02 - 2023-01-13<a class="hash-link" href="#2022-11-02---2023-01-13" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive Summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">​</a></h3><p>A 1.35.5 release for single relay P2P is nearly completed and should be released this month. This release is based on
<code>release/1.35</code> branch and does not bump cardano-ledger.</p><p>The team successfully integrated an interim release bump of ledger and consensus into cardano-node master.
This work will not be released in a node version, but will be continued by the current dependency bump in progress.</p><p>We anticipate once this dependency bump is completed, regular 2 week releases will be feasible again.</p><p>The 1.35.4 release is being ran by more than 70% of stake pools. Planning for the mainnet hard fork date is in progress.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/releases/tag/1.35.4" target="_blank" rel="noopener noreferrer">Release 1.35.4</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h3><ul><li><p><a href="https://github.com/input-output-hk/cardano-node/commits/release/1.35" target="_blank" rel="noopener noreferrer">Release 1.35.5</a></p><ul><li><a href="https://github.com/input-output-hk/cardano-node-tests/blob/tag_test_1.35.5_rc1/src_docs/source/test_results/node/tag_1_35_5_rc1.rst" target="_blank" rel="noopener noreferrer">Test Status</a></li></ul></li></ul>]]></content>
        <author>
            <name>Samuel Leathers</name>
            <uri>https://github.com/disassembler</uri>
        </author>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[System Test Team Update]]></title>
        <id>2023-01-13-system-test</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-13-system-test"/>
        <updated>2023-01-13T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the last 2 weeks we did more improvements on our Test Framework, ran some sanity tests related to the <em>P2P Single
Relay</em> functionality.</p><p>We also update the Node &amp; DB-Sync sync tets to build with Nix as the prebuilt files are no longer available at PR level.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="framework-improvements">Framework improvements:<a class="hash-link" href="#framework-improvements" title="Direct link to heading">​</a></h3><ul><li>extended the <em>cardano-node-tests</em> with the ability for anybody to fork the repo and <a href="https://input-output-hk.github.io/cardano-node-tests/readme.html" target="_blank" rel="noopener noreferrer">run all our System Tests on GitHub Actions</a></li><li>added 2 new nightly pipelines - nightly-mixed and nightly-p2p - <a href="https://input-output-hk.github.io/cardano-node-tests/test_results/nightly_system_tests.html" target="_blank" rel="noopener noreferrer">details here</a></li><li>some optimizations on how our regression tests are scheduled on pytest workers and how cluster instances are assigned to the tests;</li></ul><p><code>  === 743 passed, 67 skipped, 24 xfailed in 9166.64s (2:32:46) ===
  to
  === 753 passed, 67 skipped, 14 xfailed in 4654.80s (1:17:34) ===</code></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node">Node:<a class="hash-link" href="#node" title="Direct link to heading">​</a></h3><ul><li>ran a couple of sanity runs of CLI a&amp; sync tests on a local branch with P2P Single Relay enabled</li><li>started the preparations for testing the next tag - <a href="https://github.com/input-output-hk/cardano-node-tests/blob/tag_test_1.35.5_rc1/src_docs/source/test_results/node/tag_1_35_5_rc1.rst" target="_blank" rel="noopener noreferrer">details here</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="db-sync">DB-Sync:<a class="hash-link" href="#db-sync" title="Direct link to heading">​</a></h3><ul><li>some improvements on db-sync sync tests</li></ul>]]></content>
        <author>
            <name>Dorin Solomon</name>
            <uri>https://github.com/dorin100</uri>
        </author>
        <category label="system-test" term="system-test"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2023-01-12-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-12-mithril"/>
        <updated>2023-01-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team has been designing a mechanism for handling seamless updates of the Mithril networks in case of breaking-changes that require synchronous update of the signer nodes. This design has been formalized in an <a href="https://mithril.network/doc/adr/4" target="_blank" rel="noopener noreferrer">ADR</a>. They have been working on an implementation of a proof of concept to rely on an on-chain transaction to synchronously trigger the version switch of all the signer nodes. They have also worked on implementing prototype solutions to minimize the use of breaking changes where soft updates are possible.</p><p>Finally, they have worked on upgrading the <code>devnet</code> and fixing some flakiness in the end to end tests of the CI.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Implemented the redaction of an ADR for handling graceful updates of the Mithril Network <a href="https://github.com/input-output-hk/mithril/issues/671" target="_blank" rel="noopener noreferrer">#671</a></li><li>Worked on a proof of concept to handle backward compatibilty of exchanged messages with <code>protobuf</code> <a href="https://github.com/input-output-hk/mithril/issues/677" target="_blank" rel="noopener noreferrer">#677</a></li><li>Worked on a proof of concept to handle backward compatibilty of exchanged messages with <code>avro</code> <a href="https://github.com/input-output-hk/mithril/issues/678" target="_blank" rel="noopener noreferrer">#678</a></li><li>Worked on a proof of concept for reading/writing era activation markers with a Cardano chain transaction <a href="https://github.com/input-output-hk/mithril/issues/672" target="_blank" rel="noopener noreferrer">#672</a></li><li>Worked on upgrading the Cardano node of the Mithril <code>devnet</code>, as well as fixing flakiness of the CI <a href="https://github.com/input-output-hk/mithril/issues/523" target="_blank" rel="noopener noreferrer">#523</a></li><li>Prepared and tested the new <code>2302</code> distribution pre-release <a href="https://github.com/input-output-hk/mithril/releases/tag/2302.0-prerelease" target="_blank" rel="noopener noreferrer">2302.0-prerelease</a></li><li>Updated the documentation for SPO to build a signer node in order to better reflect the new release process <a href="https://github.com/input-output-hk/mithril/issues/681" target="_blank" rel="noopener noreferrer">#681</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2023-01-11-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-11-consensus"/>
        <updated>2023-01-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The consensus team is resuming its activities after the Christmas break. During
these weeks we focused on cleaning and benchmarking the UTxO-HD prototype, and
discussing with the Ledger team the changes that might be required for the next
iterations. The pull request that adds the Conway era is waiting for a second
review round and we hope to merge it soon. On the technical debt side we are
looking into a property-test failure found in the iterators. We are
investigating if this is an error in the model or in the implementation. We also
improved the documentation of our testing code.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd-prototype">UTxO HD Prototype<a class="hash-link" href="#utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We worked with the Ledger team to start preparing the next versions of UTxO-HD.
The Ledger team is concerned that for the remaining maps we might need the full
ledger state on epoch boundaries. Since the main consumer of the ledger rules is
Consensus, the code that requires access to a full state could be moved from the
ledger to some Ledger-Consensus bridge. Eg. the traversal of rewards could take
place in such bridge, instead of querying the ledger for the values that are
required in the epoch-transition computations.</p><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4234" target="_blank" rel="noopener noreferrer">relocated</a> some UTxO-HD definitions, in preparation for merging
the prototype into <code>master</code>.</p><p>We also completed updated local benchmarks comparing the replay time and memory
consumption of:</p><ul><li>the baseline node (<code>f2fc76ef45647275c98634da1718290b976ff364</code>) </li><li>the UTxO-HD node with the in-memory backend </li><li>the UTxO-HD node with the LMDB backend</li></ul><p>The following plot shows the results: we can see that the LMDB node barely
reaches 8GB of memory, but it takes 1.78 times longer to replay the chain. The
in-memory backend is about 30 minutes faster, but still slower than the baseline
version. We are aware of this phenomenon and it is inherent to the problem of
maintaining sequences of differences of the last <code>k</code> ledger states that allows
us to perform rollback and roll-forward. We are in the process of measuring
syncing from scratch times.</p><p><img loading="lazy" src="/cardano-updates/assets/images/2023-01-11-utxo-hd-replay-benchmarks-dcf6daaf5460de7591a60db1457d2e58.png" width="2500" height="1700" class="img_ev3q"></p><p>We also <a href="https://github.com/input-output-hk/ouroboros-network/pull/4263" target="_blank" rel="noopener noreferrer">added <code>StaticEither</code> accessors</a> that helped us to simplify
the UTxO-HD prototype.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-conway-era">New Conway era<a class="hash-link" href="#new-conway-era" title="Direct link to heading">​</a></h3><p>We incorporated the feedback of the <a href="https://github.com/input-output-hk/ouroboros-network/pull/3971" target="_blank" rel="noopener noreferrer">pull request</a>, and rebased this
branch on top of <code>master</code>. The PR is pending a second review round and we hope
to merge this soon.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>We are investigating a <a href="https://github.com/input-output-hk/ouroboros-network/issues/4183" target="_blank" rel="noopener noreferrer">property-testing failure</a> involving
iterators. Solving this requires understanding the expected behavior of
iterators in the counterexample found by <code>QuickCheck</code> to determine if the error
is in the model or in the implementation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fostering-collaboration">Fostering collaboration<a class="hash-link" href="#fostering-collaboration" title="Direct link to heading">​</a></h3><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4248" target="_blank" rel="noopener noreferrer">moved</a> the contents of <code>docs/Testing.md</code> closer to the code, so that the
explanations about the tests are easier to find in the relevant modules, and the
documentation is easier to keep up to date.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2023-01-11-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-11-performance-and-tracing"/>
        <updated>2023-01-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>Since our last update, we focused on infrastructure work:  benchmark enablement, tracing system, benchmark environment merge and open source support:</p><ol><li>SECP benchmarking enablement is underway:  enabling SECP runs in our cardano-ops benchmarking environment is still in progress.</li><li>The new tracing system:  the improved API of the new tracing system was implemented, and we're now porting the tracing integration layer over.</li><li>Infrastructure:  the mainnet protocol parameter history is now encoded in the workbench profile machinery at epoch-level granularity, which gives us a systematic approach towards description of past and future benchmarks.</li><li>New benchmark deployment infrastructure:  we've made some progress on Nomad deployment backend, shared by both of the data publishing and benchmarking needs.</li><li>Legacy benchmarking:  we've started merging the legacy benchmark deployment infrastructure into the workbench.</li><li>Open sourcing:  the benchmarking data publishing tool was adapted to the Nomad execution environment provided by SRE, pending final deployment.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h2><p>The AWS cluster infrastructure necessary for SECP benchmarking is still being worked on.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h2><p>The improved tracing internals were implemented, and we're now into the phase of updating the tracing integration, which is also mostly done.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">​</a></h2><p>Thanks to collaboration with the DevX team, we have identified and pursued a design that would enable our Nomad workbench backend to execute deployments of both the benchmarking cluster and our data publishing components.</p><p>On the benchmark parametrisation front, we have eliminated a long-standing weakness in the way we were specifying the protocol parameters.
We now have a very clear and granular method to keep track of protocol parameter evolution -- e.g. the mainnet history changes are now tracked at epoch granularity, while also allowing for systematically described change overlays.  This makes the benchmark profile definition much more clear and robust against mistakes.</p><p>We also started a merge of the legacy benchmarking environment (based on cardano-ops) into the workbench.  The separation between environments was too costly, causing us to reimplement any benchmarking change twice -- first, during development, in the workbench, then in cardano-ops.  In addition, maintenance of compatibility code was incurring additional costs, slowing benchmark data analysis development.
Once this merge is complete, this will allow us to sharply cut the benchmark development cycle and overheads.</p>]]></content>
        <author>
            <name>Serge Kosyrev</name>
            <uri>https://github.com/deepfire</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2023-01-06-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-06-crypto"/>
        <updated>2023-01-06T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The four open fronts that the crypto team is working on are:</p><ul><li>MuSig2: The API features (error handling) has been merged. </li><li>Mithril: We update the KES library and published it in crates.io. Similarly, we merged batch verification of STM signatures.</li><li>cardano-base: VRF and BLS are still waiting to be merged, as we have some problems with the CI. </li><li>KES agent: We keep progressing with KES secure forgetting implementation.</li></ul><p>We also started working in the cryptography engineering handbook, which will be a cross team effort.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="musig2">MuSig2<a class="hash-link" href="#musig2" title="Direct link to heading">​</a></h3><ul><li>Merged the more granular error handling mechanism <a href="https://github.com/input-output-hk/musig2/pull/33" target="_blank" rel="noopener noreferrer">PR#33</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>Adapted KES library so that sk contains its corresponding period, making key handling easier. Avoid making unnecessary copies of the KES key. Expose function to get associated period. All included in <a href="https://github.com/input-output-hk/kes/commit/9de00835ed354cbb8d37838f6cee57930ea9fd3d" target="_blank" rel="noopener noreferrer">Version 0.1.1</a>, which was published in <a href="https://crates.io/crates/kes-summed-ed25519" target="_blank" rel="noopener noreferrer">crates.io</a>. </li><li>Updated new KES format to mithril library <a href="https://github.com/input-output-hk/mithril/pull/674" target="_blank" rel="noopener noreferrer">PR 674</a></li><li>We implemeneted batch verification of stm signatures, which improves the benchmarks for mithril chain-sync <a href="https://github.com/input-output-hk/mithril/pull/531" target="_blank" rel="noopener noreferrer">PR 531</a></li><li>We keep progressing on reducing the use of <code>transmute</code> in <code>mithril-stm</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>Nothing new to report. Still working in merging these PRs. We are only missing nix merge of <a href="https://github.com/input-output-hk/iohk-nix/pull/520" target="_blank" rel="noopener noreferrer">PR#520</a> and the updates on VRF will be merged.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>We keep progressing in the secure forgetting PR. Added NoThunks tests, error hasndling to detect when mlocking fails, resolved bugs due to incorrect usage of mlocked memory and wrote more efficient tests <a href="https://github.com/input-output-hk/cardano-base/pull/255#issuecomment-1362601518" target="_blank" rel="noopener noreferrer">PR#255</a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cryptography-handbook">Cryptography handbook<a class="hash-link" href="#cryptography-handbook" title="Direct link to heading">​</a></h3><p>We have made available the (temporary) cryptography handbook <a href="https://input-output-hk.github.io/cryptography_spec/" target="_blank" rel="noopener noreferrer">https://input-output-hk.github.io/cryptography_spec/</a>, and included the description of some primitives (Ed25519, KES and VRF). This is an ongoing effort, and we plan on further expanding the list of available primitives.</p>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2023-01-05-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2023-01-05-ledger"/>
        <updated>2023-01-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The ledger team finished up the remaining work for tracking individual depots,
built out the new Conway era transaction body (in line with CIP-1694),
greatly reduce some problematically large calculations on the epoch boundary,
and addressed technical debt.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="finishing-the-deposit-tracking">Finishing the deposit tracking<a class="hash-link" href="#finishing-the-deposit-tracking" title="Direct link to heading">​</a></h3><p>The initial work on the individual deposit tracking project focused only on correctness.
As this is a large data structure
(since its size is linear with respect to the number of registered stake credentials),
it is very important that we also reduce the memory overhead as much as possible.
Fortunately, we were able to add very little overhead for the deposits by using existing
efficient data structures. The extra tracking now only incurs one word (8 bytes)
per registered stake credential.</p><p>See:</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3195" target="_blank" rel="noopener noreferrer">pull-3195</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3202" target="_blank" rel="noopener noreferrer">pull-3202</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3217" target="_blank" rel="noopener noreferrer">pull-3217</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-conway-era-transaction">New Conway era transaction<a class="hash-link" href="#new-conway-era-transaction" title="Direct link to heading">​</a></h3><p>We implemented the Conway era transaction body, which is in line with CIP-1694.
Note that the Conway era implements, losing speaking, the parts of CIP-1694 that are not
related to the liquid democracy (the "DReps").
The new transaction body adds the new governance actions and votes,
while also deprecating the old governance structures
(i.e. the old protocol parameter updates and MIR certificates).</p><p>We also now have the wire specification (CDDL file) and serialization code in place.
The wire specification is still subject to change while we work on the Conway era,
but it is now usable and has proper testing support
(so that, for example, the serialization round-trips, etc).</p><p>See:</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3176" target="_blank" rel="noopener noreferrer">pull-3176</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3226" target="_blank" rel="noopener noreferrer">pull-3226</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimizing-the-tickf-transition">Optimizing the <code>TICKF</code> transition<a class="hash-link" href="#optimizing-the-tickf-transition" title="Direct link to heading">​</a></h3><p>Every since the release of the Shelley era, we have been working to reduce the computational load
placed on the node by the ledger at the epoch boundary.
While still not perfect, we believe that we have removed one of the final problematically long
epoch boundary computations that exacerbate situations like
<a href="https://github.com/input-output-hk/cardano-node/issues/4421" target="_blank" rel="noopener noreferrer">this</a>.
In particular, the problem involved the way in which the consensus layer obtains a view of the
ledger for the purposes of checking the leadership schedule in a new epoch.
We implemented a stopgap measure which now only incurs a single multi-second cost once per epoch
instead of potentially several multi-second costs while the networks waits for the first block
of a new epoch to be minted.</p><p>See:</p><ul><li>An <a href="https://github.com/input-output-hk/cardano-ledger/blob/ea48d4815946c4f35239eb41815fe06cd6ffec2e/docs/adr/2022-12-12_007-optimize-ledger-view.md" target="_blank" rel="noopener noreferrer">ADR</a> about the decision.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3209" target="_blank" rel="noopener noreferrer">pull-3209</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>We closed the year out with a lot of reduction to the technical debt!</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-ledger-event">Improved ledger event<a class="hash-link" href="#improved-ledger-event" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3212" target="_blank" rel="noopener noreferrer">pull-3212</a> - The ledger events are not guaranteed to appear in any given order within a block.
For this reason, motivated by the use case in db-sync, the <code>TotalDeposits</code> event now
includes a transaction ID and emits the <em>change</em> in deposits instead of the value.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improved-type-saftey">Improved type saftey<a class="hash-link" href="#improved-type-saftey" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3208" target="_blank" rel="noopener noreferrer">pull-3208</a> - We replaced <code>NominalDiffTime</code> with a newtype wrapper. The problem was that our CBOR
encoders and decoders were using the wrong level of precision, having to due with with
the Shelley genesis file. We removed the potential problem with a newtype wrapper.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3167" target="_blank" rel="noopener noreferrer">pull-3167</a> - We now use a GADT to ensure consistency of the Plutus language in the types
for <code>TransactionScriptFailure</code> and <code>PlutusDebug</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="codemodule-organization">Code/Module organization<a class="hash-link" href="#codemodule-organization" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3175" target="_blank" rel="noopener noreferrer">pull-3175</a> - The Allegra and Mary eras had an unusual relationship in our codebase,
due to the uncertainly of release dates while we were implementing them.
In particular, they were coupled in way that is different from the rest of the code base.
With hindsight on our side, we split the combined <code>shelley-ma</code> Haskell package into two
separate ledger era packages, which is now consistent with the rest of the repository
and module structure.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3184" target="_blank" rel="noopener noreferrer">pull-3184</a> - We created a core test sub-library, cleaning up a lot of our property test
generator code.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3210" target="_blank" rel="noopener noreferrer">pull-3210</a> - We moved the <code>KeyPair</code> type to the test library. Outside of testing,
the ledger does not need to deal with signing keys, and since this is a topic that
deserves the utmost care, it is best to make it clear that our use of signing keys
is only for testing.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3229" target="_blank" rel="noopener noreferrer">pull-3229</a> - We split the <code>Cardano.Ledger.Alonzo.Data</code> module, which is more consistent with the rest
of the codebase.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="revert-pointer-address-deprecation">Revert pointer address deprecation<a class="hash-link" href="#revert-pointer-address-deprecation" title="Direct link to heading">​</a></h4><p>Thanks to one of our excellent internal auditors,
<a href="https://github.com/jmhrpr" target="_blank" rel="noopener noreferrer">@jmhrpr</a>,
we now have a better plan for deprecating pointer addresses.
This meant that we had to revert the previous work to deprecate them.</p><p>See:</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/issues/3161" target="_blank" rel="noopener noreferrer">issue-3161</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3215" target="_blank" rel="noopener noreferrer">pull-3215</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="miscellaneous">Miscellaneous<a class="hash-link" href="#miscellaneous" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3205" target="_blank" rel="noopener noreferrer">pull-3205</a> - We removed deprecated type synonyms.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3218" target="_blank" rel="noopener noreferrer">pull-3218</a> - We cleaned up the address deserialization.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3223" target="_blank" rel="noopener noreferrer">pull-3223</a> - We fixed faulty address deserialization tests.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3222" target="_blank" rel="noopener noreferrer">pull-3222</a> - We switched to a general type family <code>TxOut</code> from concrete ones,
reducing many constraints.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3224" target="_blank" rel="noopener noreferrer">pull-3224</a> - <code>ShelleyGenesis</code> is now parameterized by crypto instead of by era.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3170" target="_blank" rel="noopener noreferrer">pull-3170</a> - We set the cabal-version to 3.0 in our projects.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3172" target="_blank" rel="noopener noreferrer">pull-3172</a> - We removed the now useless <code>EncodeMint</code>/<code>DecodeMint</code> classes.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3225" target="_blank" rel="noopener noreferrer">pull-3225</a> - We switch from <a href="https://hackage.haskell.org/package/ormolu" target="_blank" rel="noopener noreferrer">ormolu</a> to
<a href="https://hackage.haskell.org/package/fourmolu" target="_blank" rel="noopener noreferrer">fourmolu</a>.
The reason was to be able to finally have more diff friendly code!</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2022-12-28-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-28-node-cli-api"/>
        <updated>2022-12-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2022-12-28 - 2023-01-10</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4762" target="_blank" rel="noopener noreferrer">Fix hedgehog-extras sha hash</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4759" target="_blank" rel="noopener noreferrer">Update hegehog-extras bounds</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4751" target="_blank" rel="noopener noreferrer">GitHub token fix</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4743" target="_blank" rel="noopener noreferrer">Use setup-haskell action</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4738" target="_blank" rel="noopener noreferrer">Use Github Action to install libsecp256k1</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4714" target="_blank" rel="noopener noreferrer">Update index state and hedgehog-extras.</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4710" target="_blank" rel="noopener noreferrer">Cleaned cabal files</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4737" target="_blank" rel="noopener noreferrer">Add cache versioning</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4742" target="_blank" rel="noopener noreferrer">Delete obsolete scripts</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4746" target="_blank" rel="noopener noreferrer">Use SECURITY.md published in Cardano Engineering Handbook</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4749" target="_blank" rel="noopener noreferrer">Filter out duplicate collateral inputs in tx build cmds</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4754" target="_blank" rel="noopener noreferrer">Optimise query stake-snapshot command</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-mainteance">CI &amp; project mainteance<a class="hash-link" href="#ci--project-mainteance" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4755" target="_blank" rel="noopener noreferrer">Copyright updates</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4761" target="_blank" rel="noopener noreferrer">Fix bug in hash computation in cardano-cli genesis create-cardano</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4636" target="_blank" rel="noopener noreferrer">Cleanup exports of cardano-testnet</a></li><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4279" target="_blank" rel="noopener noreferrer">Multiple pools support in query stake snapshot</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4625" target="_blank" rel="noopener noreferrer">Handle pipes in cardano-cli</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4659" target="_blank" rel="noopener noreferrer">Render consistent plutus script failure output</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4666" target="_blank" rel="noopener noreferrer">Read network ID from environment</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4647" target="_blank" rel="noopener noreferrer">CLI option to append additional signatures to a transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">Cardano ping</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4777" target="_blank" rel="noopener noreferrer">Better error message for query utxo on oops</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4763" target="_blank" rel="noopener noreferrer">Remove simple script distinction</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4753" target="_blank" rel="noopener noreferrer">Export SubmitResult from Cardano.Api</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet-1">cardano-testnet<a class="hash-link" href="#cardano-testnet-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4845" target="_blank" rel="noopener noreferrer">Use Haskell variables for passing values</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-12-16-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-16-hydra"/>
        <updated>2022-12-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team kicked off a new project together with Catalyst, the Cardano Foundation and researchers from IO: a proof of concept for voting on Hydra. The concluded work on validating the Head protocol using model-based testing and formulated next steps, fixed the transaction cost benchmark reporting on <a href="https://hydra.family/head-protocol/benchmarks/transaction-cost/" target="_blank" rel="noopener noreferrer">the website</a> and reduced the cost for commit transactions by ~30% with the help of reference scripts.</p><p>The year is coming to an end and velocity will slow down a bit while the team focuses on wrapping up loose ends. The updates here will pause until January 2023.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Kicked-off Hydra Voting project with Catalyst, CF, and IO Research.</li><li>Reduce commit transaction costs by ~30% with reference scripts.</li><li>Prepared an RFP for external audit of the Hydra Head solution.</li><li>Fixed transaction cost benchmarks for abort tx <a href="https://github.com/input-output-hk/hydra/issues/631" target="_blank" rel="noopener noreferrer">#631</a>.</li><li>Recorded decision to use model-based testing (<a href="https://hydra.family/head-protocol/adr/22/" target="_blank" rel="noopener noreferrer">ADR22</a>) and improved Model <a href="https://hydra.family/head-protocol/haddock/hydra-node/tests/Hydra-Model.html" target="_blank" rel="noopener noreferrer">documentation</a>.<ul><li>Concluding the first increment on <!-- -->“<!-- -->Validate coordinated Head protocol<!-- -->”<!-- --> <a href="https://github.com/input-output-hk/hydra/issues/194" target="_blank" rel="noopener noreferrer">#194</a>.</li><li>Formulated next step / follow-up on testing the Soundness property of our protocol <a href="https://github.com/input-output-hk/hydra/issues/656" target="_blank" rel="noopener noreferrer">#656</a>.</li></ul></li><li>Switched to using nix flakes for development setup and CI build <a href="https://github.com/input-output-hk/hydra/pull/646" target="_blank" rel="noopener noreferrer">#646</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Push <a href="https://github.com/input-output-hk/hydra/blob/7e532bd1c8a840a8155cf4b0858b982308dfc3f0/docs/adr/CloseTx-validity-bounds-and-deadline-calculation-DoS.md" target="_blank" rel="noopener noreferrer">ADR21</a> &amp; tx validity gap over the finish line (smoke tests missing).</li><li>Integrate the <code>hydra-tutorial</code>.</li><li>Have a LaTeX write-up of the HeadV1 (Coordinated Hydra Head) spec.</li><li>Close &amp; recap on the year with another monthly report (+ blog post).</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2022-12-15-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-15-mithril"/>
        <updated>2022-12-15T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team has released the new distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2248.1" target="_blank" rel="noopener noreferrer"><code>2248.1</code></a> of their nodes. They have published the first version of the Mithril cryptographic library on <a href="https://crates.io/crates/mithril-stm" target="_blank" rel="noopener noreferrer"><code>crates.io</code></a>, the Rust community’s crate registry. They have implemented an optimization on the individual signatures that no longer embed the verification key and stake. They have also enhanced their testing strategy by implementing a workflow that tests that the client binaries produced for multiple platforms (Linux, MacOS and Windows) are able to verify and restore snapshots.</p><p>Finally, they have kept on simplifying the aggregator node's multi-signer by removing the signer registration and the certificate creation from its responsibilities.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Implemented removing verification key and stake from single signatures <a href="https://github.com/input-output-hk/mithril/issues/619" target="_blank" rel="noopener noreferrer">#619</a></li><li>Completed the extraction of the signer registration from the multi-signer <a href="https://github.com/input-output-hk/mithril/issues/642" target="_blank" rel="noopener noreferrer">#642</a></li><li>Completed the extraction of the certificate creation from the multi-signer <a href="https://github.com/input-output-hk/mithril/issues/638" target="_blank" rel="noopener noreferrer">#638</a></li><li>Implemented a workflow to test client binaries (Linux / MacOS / Windows) <a href="https://github.com/input-output-hk/mithril/issues/601" target="_blank" rel="noopener noreferrer">#601</a></li><li>Completed the signature of the artifacts produced by the CI <a href="https://github.com/input-output-hk/mithril/issues/587" target="_blank" rel="noopener noreferrer">#587</a></li><li>Fixed the protocol parameters transition <a href="https://github.com/input-output-hk/mithril/issues/627" target="_blank" rel="noopener noreferrer">#627</a></li><li>Worked on optimizing the snapshot digest computation <a href="https://github.com/input-output-hk/mithril/issues/510" target="_blank" rel="noopener noreferrer">#510</a></li><li>Worked on enforcing the API protocol versions in the client and signer <a href="https://github.com/input-output-hk/mithril/issues/633" target="_blank" rel="noopener noreferrer">#633</a></li><li>Worked on deactivating the non certified signer registration mode <a href="https://github.com/input-output-hk/mithril/issues/621" target="_blank" rel="noopener noreferrer">#621</a></li><li>Worked on the re-genesis of the test networks <a href="https://github.com/input-output-hk/mithril/issues/651" target="_blank" rel="noopener noreferrer">#651</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-12-14-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-14-consensus"/>
        <updated>2022-12-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks, the Consensus team finalized the QSM tests for the
backing store and Mempool on the UTxO-HD branch with important discoveries
regarding parallel QSM testing. We also worked with the Ledger team to envisage
the modifications that are required in Ledger and Consensus to accommodate the
changes in the crypto VRF and KES. The <code>db-analyser</code> now supports bechmarking
the ledger operations, which will allow us to identify, debug, and profile
potential performance problems. We drafted a document that defines how to manage
the versions of Consensus-related packages. The top level documentation of
<code>ouroboros-network</code> now features a description of the consensus components and
provides a hyperlinked map to the modules documentation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd-prototype">UTxO HD prototype<a class="hash-link" href="#utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>Whereas we had passing sequential state-machine tests for the mempool, the
parallel case proved to be more challenging than we thought. The operation of
adding a list of transactions to the mempool is not atomic and, as a result,
when adding a list of transactions, transactions from other processes can be
added in between. The mempool implementation handles this correctly, however
this required us to <a href="https://github.com/input-output-hk/ouroboros-network/pull/4076" target="_blank" rel="noopener noreferrer">redesign</a> the parallel model we had to take
the lack of atomicity into account.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="backing-store-property-tests">Backing store property tests<a class="hash-link" href="#backing-store-property-tests" title="Direct link to heading">​</a></h4><p>We finished refactoring the backing store property tests. The second review
round is ongoing.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsm-tree-implementation">LSM tree implementation<a class="hash-link" href="#lsm-tree-implementation" title="Direct link to heading">​</a></h3><p>We are working on benchmarking (in terms of time and number of IO operations)
fetching/looking up data from disk.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><p>We worked on the design of a mechanism to prevent a DoS attack on our Genesis
design related to rollbacks. This was arguably the biggest outstanding question.</p><p>During the discussions around Genesis, we noticed a design boundary that nicely
delineates a fundamental component. We almost have a full Haskell prototype of
it. It will be very nicely self-contained, perhaps even usable in the ultimate
implementation!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-vrf-and-kes-crypto-integration">New VRF and KES crypto integration<a class="hash-link" href="#new-vrf-and-kes-crypto-integration" title="Direct link to heading">​</a></h3><p>We collaborated with the Ledger team on preparing the ledger state and crypto
types to avoid huge allocation on the epoch boundary when changing aspects of
the crypto that will only manifest in headers, not in the ledger states.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>We merged the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4014" target="_blank" rel="noopener noreferrer">pull-request</a> that adds a support to <code>db-analyser</code> for
benchmarking ledger operations. This will allow us to identify, debug, and
profile potential performance problems. The benchmark focus on the main 5 ledger
operations that are involved in chain syncing, block forging, and block
validation, namely:</p><ol start="0"><li>Forecast.</li><li>Header tick.</li><li>Header application.</li><li>Block tick.</li><li>Block application.</li></ol><p>The following figure shows a plot of the benchmarking results for the first 65
million blocks (approximately) of the Cardano chain. The thin yellow lines under
the x-axis show the epoch boundaries, whereas the thick yellow lines correspond
to the era transitions.</p><p><img loading="lazy" src="/cardano-updates/assets/images/2022-12-14-ledger-ops-benchmark-c46be3db45ff5480ed104e0d520711a6.png" width="1600" height="800" class="img_ev3q"></p><p>As we can see in this figure, era and epoch boundaries require more computation
time. The ledger team are aware of this problem, and we are working to improve
this situation.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fostering-collaboration">Fostering collaboration<a class="hash-link" href="#fostering-collaboration" title="Direct link to heading">​</a></h3><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4207" target="_blank" rel="noopener noreferrer">drafted a document</a> motivating and defining how Consensus (and
possibly other core teams) will/should manage our package versions. This
pull-request garnered many great discussions from our team members and other
teams too: Sebastian Nagel, Arnaud Bailly, Michael Peyton-Jones, Ziyang Liu, et
al. We want to thank you all for your input, and we found this discussion very
enlightening!</p><p>We merged the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4197" target="_blank" rel="noopener noreferrer">pull request</a> that adds an overview of consensus to
the <a href="https://input-output-hk.github.io/ouroboros-network/" target="_blank" rel="noopener noreferrer">top level
documentation</a> of
ouroboros-network. This overview describes the consensus components and adds a
hyperlinked map to the modules documentation.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB-sync Team Update]]></title>
        <id>2022-12-14-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-14-db-sync"/>
        <updated>2022-12-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The DBSync team continued testing release <code>13.1.0.0</code>. The QA team has reported that no issues have
been found. The DBSync team also worked on cherry-picks back to master and on fixing bugs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><ul><li>Release is cherry-picked back to master, which uses the new rollback mechanism which uses
reverse indexes, same as the release
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1320" target="_blank" rel="noopener noreferrer">#1320</a>
This also fixes a bug number of issues on master.</li><li>Depenencies upgrade and CHaP integration
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1324" target="_blank" rel="noopener noreferrer">#1324</a></li><li>AdaPots fix <a href="https://github.com/input-output-hk/cardano-db-sync/pull/1323" target="_blank" rel="noopener noreferrer">#1323</a>. This
fixes an issue where the per epoch AdaPots didn't match the epoch boundary, but
they also included changes from the first block of the epoch.</li><li>Deposits Event fix <a href="https://github.com/input-output-hk/cardano-ledger/pull/3212" target="_blank" rel="noopener noreferrer">#3212</a>. This pr
adjusts the Deposits ledger events, so that it can be better used by db-sync. This can reduce the
number of queries that db-sync does during syncing an make syncing faster.</li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2022-12-14-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-14-node-cli-api"/>
        <updated>2022-12-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2022-12-14 - 2022-12-27</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>PRs merged in this sprint focused on clean up and resolving existing issues. The majority of the time during this sprint was spent on the In Progress PRs which have dependencies on consensus. This has been since rectified i.e cardano-node dependencies have been bumped. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4703" target="_blank" rel="noopener noreferrer">Move style guide to wiki</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-maintenance">CI &amp; project maintenance<a class="hash-link" href="#ci--project-maintenance" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4734" target="_blank" rel="noopener noreferrer">Cache secp256k1</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4717" target="_blank" rel="noopener noreferrer">Use cabal-cache</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4699" target="_blank" rel="noopener noreferrer">build(deps): bump certifi from 2020.4.5.2 to 2022.12.7 in /doc/.sphinx</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4724" target="_blank" rel="noopener noreferrer">Update cabal.project</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer experience<a class="hash-link" href="#developer-experience" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4125" target="_blank" rel="noopener noreferrer">Add aarch64-darwin to nix-shell</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4626" target="_blank" rel="noopener noreferrer">Improved error message for failed asset name decode</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4250" target="_blank" rel="noopener noreferrer">Optimise query leadership schedule command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4700" target="_blank" rel="noopener noreferrer">Remove cardano-cli address build-script</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4698" target="_blank" rel="noopener noreferrer">Move signing key reading to cardano-api</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4712" target="_blank" rel="noopener noreferrer">Only run chairman test on latest era</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4679" target="_blank" rel="noopener noreferrer">Add fix and test for <code>foldBlocks</code></a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ci--project-mainteance">CI &amp; project mainteance<a class="hash-link" href="#ci--project-mainteance" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4755" target="_blank" rel="noopener noreferrer">Copyright updates</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4279" target="_blank" rel="noopener noreferrer">Multiple pools support in query stake snapshot</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4250" target="_blank" rel="noopener noreferrer">Optimise query leadership schedule command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4179" target="_blank" rel="noopener noreferrer">Optimise query stake snapshot command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4625" target="_blank" rel="noopener noreferrer">Handle pipes in cardano-cli</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4659" target="_blank" rel="noopener noreferrer">Render consistent plutus script failure output</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4666" target="_blank" rel="noopener noreferrer">Read network ID from environment</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4647" target="_blank" rel="noopener noreferrer">CLI option to append additional signatures to a transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4664" target="_blank" rel="noopener noreferrer">Cardano ping</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet-1">cardano-testnet<a class="hash-link" href="#cardano-testnet-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4636" target="_blank" rel="noopener noreferrer">Cleanup exports of cardano-testnet</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2022-12-14-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-14-performance-and-tracing"/>
        <updated>2022-12-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ol><li>SECP benchmarking enablement was completed:  we are now able to do local runs of the SECP workloads.  The next step is to port this to the AWS environment.</li><li>A new workstream for Plutus cost modeling improvement:  we've planned and started implementing the smart contract call overhead measurement machinery.</li><li>The new tracing system:  after doing more benchmarking to address inter-run variance, we discovered that the regression, while still there, is small enough not to be release critical.  Nevertheless, we're continuing with the further performance-oriented rework of the internals.</li><li>Infrastructure:  a significant refactoring of the workbench internals was merged.  We also started improving the denotation for ever-evolving protocol parameters.  Comparative analysis of multi-run batches implementation started.</li><li>Open sourcing:  our plans matured sufficiently so that we now expect actual deployment work to start this week.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h2><p>The SECP benchmarking workload has been fully implemented in the workbench.  We are now porting it over to AWS, and after that we'll be running the model cluster workload.</p><p>We've also started implementing mechanics for the upcoming investigation of the Plutus smart contract call overhead, which is expected to lead us to improved Plutus cost modeling.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h2><p>After the initial model-scale performance data caused us to panic, among other things we've done more benchmarks, and it turned out that inter-run variance increase was the culprit.  The actual regression averages to barely noticeable 1-2% in key metrics -- which is certainly not release critical.</p><p>To understand the impact of the new tracing system, we have to bear in mind the extra functionality it provides:</p><ol><li>We are now processing all messages generated by the system, without making any shortcuts that the old system had to resort to.  That causes the new tracing to do more work, but is more useful for all users and developers involved -- since it leads to a simple, non-confusing configuration.  Incidentally, that's also the area where we are reworking the internals, to deduce and enable the optimisations that are implied by the particular configuration.</li><li>The new tracing system is benchmarked with remote tracing as the default backend (whereas the old one was using local, builtin log storage mechanism).  In some sense it's the fair benchmark, because that's the way we expect SPO's to set up tracing.  That, however also causes it to do more work.</li></ol><p>All that said, since we've established the performance of the new system to be adequate for the release, we won't be delaying it much further.</p><p>In addition, we're still pursuing our performance-enhancing rework of the new tracing internals.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">​</a></h2><p>After implementing the multi-backend capability in the workbench, we got the opportunity to reassess the generic/backend boundaries and perform some long-awaited cleanups and simplifications in that area.  The results of this work have been merged and will serve as a solid foundation for the CI and cloud backends.</p><p>Moving to analysis, we've also improved provenance of the raw data, by collecting more identification information and statistics about it.
This means, e.g. that we now record checksums, message frequencies and timestamps from the log files coming into analysis.
This will be used to enable us to see more data anomalies earlier, and lift that information directly into the generated reports.</p><p>A new feature is now under implementation -- the ability to provide comparative analysis of multi-run batches.
Previously we only had automation for two aspects separately, so we only could either:</p><ul><li>compare individual runs (used for different node configurations / versions)</li><li>collect variance statistics from a batch of runs (used to enhance statistical confidence for a single node configuration / version)
Naturally, combining these two capabilities was a long-desired feature of our analysis pipeline.</li></ul>]]></content>
        <author>
            <name>Serge Kosyrev</name>
            <uri>https://github.com/deepfire</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2022-12-12-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-12-network"/>
        <updated>2022-12-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>In last sprint the team focused on preparations for the conference talk at
<a href="https://sites.uclouvain.be/OPODIS2022/" target="_blank" rel="noopener noreferrer">OPODIS 2022</a>.  We also worked on preparations to publish <code>io-sim</code> and related
packages on Hackage (<a href="https://github.com/input-output-hk/io-sim/pull/57" target="_blank" rel="noopener noreferrer">PR #57</a>, <a href="https://github.com/input-output-hk/io-sim/pull/60" target="_blank" rel="noopener noreferrer">PR #60</a>).</p><p>We also started reviewing:</p><ul><li><code>ouroboros-network</code></li><li><code>cardano-node</code></li><li><code>cardano-ledger</code>
repositories for open-source readiness (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4218" target="_blank" rel="noopener noreferrer">PR #4128</a>).</li></ul><p>We prepared a PR which changes how <code>node-to-node</code> and <code>node-to-client</code> protocol
versiones are serialised in <code>cardano-node</code> log (<a href="https://github.com/input-output-hk/cardano-node/pull/4691" target="_blank" rel="noopener noreferrer">PR #4691</a>).</p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2022-12-09-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-09-crypto"/>
        <updated>2022-12-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The four open fronts that the crypto team is working on are:</p><ul><li>MuSig2: We were blocked with a CI issue, that we finally resolved. Similarly, we merged the redesig of the API to mantain consistency. </li><li>Mithril: Merged the reformat of the signle signature. Similarly, we started working in ensuring KES implementation in rust is safe. </li><li>cardano-base: VRF and BLS are still waiting to be merged, as we have some problems with the CI. Moreover, we started experimenting how rust can be included in the cardano-base code-stack. </li><li>KES agent: We keep progressing with KES secure forgetting implementation as well as the KES agent.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="musig2">MuSig2<a class="hash-link" href="#musig2" title="Direct link to heading">​</a></h3><ul><li>[Still in progress]<!-- --> We are introducing a more granular error handling mechanism <a href="https://github.com/input-output-hk/musig2/pull/33" target="_blank" rel="noopener noreferrer">PR#33</a></li><li>We merged the API redesig <a href="https://github.com/input-output-hk/musig2/pull/35" target="_blank" rel="noopener noreferrer">PR#35</a></li><li>We were blocked for a while with a CI issue, for which we are currently simply using a simpler version of Ubuntu. We'll probably circle back to this in the future <a href="https://github.com/input-output-hk/musig2/pull/36" target="_blank" rel="noopener noreferrer">PR#36</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>We merged the individual signature <a href="https://github.com/input-output-hk/mithril/pull/620" target="_blank" rel="noopener noreferrer">PR#620</a></li><li>We are modifying important parts of the KES mplementation to guarantee there are no unnecessary copies during Ser/Deser (<a href="https://github.com/input-output-hk/kes/commits/master" target="_blank" rel="noopener noreferrer">kes repo</a>) </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>Nothing new to report. Still working in merging these PRs. </li><li>We started experimenting on how we can use cabal-pack to create haskell libraries out of rust libraries, and how this would affect the cardano-base fork. We encountered what seems to be a <a href="https://gitlab.haskell.org/ghc/ghc/-/issues/22564" target="_blank" rel="noopener noreferrer">bug in GHC</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h2><ul><li>We keep progressing in the secure forgetting PR and resolving some bugs on memory handling <a href="https://github.com/input-output-hk/cardano-base/pull/255" target="_blank" rel="noopener noreferrer">PR#255</a></li><li>Fixed a 'use-after-free' bug in the KES agent.</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-12-09-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-09-hydra"/>
        <updated>2022-12-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team has worked on completing to "Validate coordinated head protocol against formal model", this is a huge step to verify the implementation is secure. They also worked on implementing <a href="https://github.com/input-output-hk/hydra/blob/7e532bd1c8a840a8155cf4b0858b982308dfc3f0/docs/adr/CloseTx-validity-bounds-and-deadline-calculation-DoS.md" target="_blank" rel="noopener noreferrer">ADR21</a> related to bounded tx validity which is now under review. <a href="https://github.com/obsidiansystems/hydra-pay" target="_blank" rel="noopener noreferrer">HydraPay</a> project, from Obsidian Systems, is coming to an end of the first phase at least, so team did a review and submitted couple of <a href="https://github.com/obsidiansystems/hydra-pay/issues?q=is%3Aissue" target="_blank" rel="noopener noreferrer">issues</a> they found in the process. The team had a meeting with the Director of CyberSecurity - topic was the RFP that is currently in flight that should scope the work of future auditors. Also, the team completed the hydra-tutorial review created by our colleague Thomas Vellecoop from the education team, and we are close to integrate it to our official site. From the development side, they have fixed a bug on the CI when running the benchmark jobs to calculate the cost of abortTx and a flaky spec which checks a plutus merkle-tree is always balanced.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Document model based testing <a href="https://github.com/input-output-hk/hydra/issues/194" target="_blank" rel="noopener noreferrer">#194</a> &amp; <a href="https://github.com/input-output-hk/hydra/issues/641" target="_blank" rel="noopener noreferrer">#641</a></li><li>Got <a href="https://github.com/input-output-hk/hydra/blob/7e532bd1c8a840a8155cf4b0858b982308dfc3f0/docs/adr/CloseTx-validity-bounds-and-deadline-calculation-DoS.md" target="_blank" rel="noopener noreferrer">ADR21</a>, reducing gaps between implementation and specification, under review.</li><li>Complete review on <code>hydra-tutorial</code>.</li><li>Complete first round of review on <code>HydraPay</code> work <a href="https://github.com/input-output-hk/hydra/issues/634" target="_blank" rel="noopener noreferrer">#634</a></li><li>Meeting with <code>Director of CyberSecurity</code> frio <code>IOG</code> to unblock "the RFP prepared for the external audit" <a href="https://github.com/input-output-hk/hydra/issues/606" target="_blank" rel="noopener noreferrer">#606</a></li><li>Remove <code>vasil-dev</code> and <code>testnet</code> from <code>smoke-test</code> because they were not working <a href="https://github.com/input-output-hk/hydra/issues/630" target="_blank" rel="noopener noreferrer">#630</a></li><li>Fix flaky <code>plutus-merkle-tree</code> test <a href="https://github.com/input-output-hk/hydra/issues/642" target="_blank" rel="noopener noreferrer">#642</a></li><li>Refactor <code>NetworkSpec</code> to improve legilibility.</li><li>Fix benchmark cost for <code>abortTx</code> <a href="https://github.com/input-output-hk/hydra/issues/631" target="_blank" rel="noopener noreferrer">#631</a></li><li>Adapt <code>nix.conf</code> to the recent hydra-ci nix cache migration.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Get <a href="https://github.com/input-output-hk/hydra/blob/7e532bd1c8a840a8155cf4b0858b982308dfc3f0/docs/adr/CloseTx-validity-bounds-and-deadline-calculation-DoS.md" target="_blank" rel="noopener noreferrer">ADR21</a> accepted &amp; close tx validity gap in our implementation.</li><li>Integrate the <code>hydra-tutorial</code>.</li><li>Have a LaTeX write-up of the HeadV1 (Coordinated Hydra Head) spec.</li><li>Get Cicero (new CI) working.</li><li>Use reference inputs to reduce the cost of the <code>commitTx</code>.</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-12-09-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-09-ledger"/>
        <updated>2022-12-09T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The Plutus tools team at IOG has started helping the ledger team to build out a user friendly
<code>cardano-ledger-api</code> package!
A <a href="https://github.com/input-output-hk/cardano-ledger/projects/5" target="_blank" rel="noopener noreferrer">GitHub project</a>
will be filled out in the days ahead,
people interested in the API can use it to follow along and join in on the conversations.</p><p>The ledger team has started using
<a href="https://github.com/input-output-hk/cardano-ledger/blob/6fc0e198560fb4169d435da882394930789a8af8/docs/adr/2022-12-01_001-record-architectural-decisions.md" target="_blank" rel="noopener noreferrer">architectural decision records</a>
to leave a record of important decisions that the team makes.
We will retroactively go back through past decisions and make ADRs for them.</p><p>The logic to track individual deposits is now nearly in place.
We are prioritizing correctness with our first pull request, and will follow up with
performance optimizations and general cleanup next.</p><p>Pointer addresses are being deprecated with the Cardano major protocol version 8.
See <a href="https://github.com/cardano-foundation/CIPs/pull/374" target="_blank" rel="noopener noreferrer">CPS-0002</a>
for more context.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-ledger-api">Cardano ledger API<a class="hash-link" href="#cardano-ledger-api" title="Direct link to heading">​</a></h4><p>The <strong>Plutus tools team</strong> has taken our minimal <code>cardano-ledger-api</code> package and started filling it
out and adding much needed documentation.
They have also added doctests!
In the days to come, the Plutus tools team will map out a lot more work for the API and record
it in this
<a href="https://github.com/input-output-hk/cardano-ledger/projects/5" target="_blank" rel="noopener noreferrer">GitHub project</a>.</p><p>See</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3182" target="_blank" rel="noopener noreferrer">pull-3182</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3188" target="_blank" rel="noopener noreferrer">pull-3188</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="architectural-decision-records-adrs">Architectural Decision Records (ADRs)<a class="hash-link" href="#architectural-decision-records-adrs" title="Direct link to heading">​</a></h4><p>We are now providing more context and leaving a record of important decisions that are made
in the ledger. The first ADR explains the very lightweight process.</p><p>See</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3177" target="_blank" rel="noopener noreferrer">pull-3177</a> (rendered <a href="https://github.com/input-output-hk/cardano-ledger/blob/6fc0e198560fb4169d435da882394930789a8af8/docs/adr/2022-12-01_001-record-architectural-decisions.md" target="_blank" rel="noopener noreferrer">here</a>)</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="tracking-individual-deposits">Tracking individual deposits<a class="hash-link" href="#tracking-individual-deposits" title="Direct link to heading">​</a></h4><p>See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3190/files" target="_blank" rel="noopener noreferrer">ADR-3</a>
for background.
We now have the logic in place to track individual deposits, and a host of property tests
to make sure that the logic is correct.
The current implementation uses more memory than it needs to, and we will address that next,
with our hope being to only use one word (8 bytes) per registered stake credential.
There is a fair amount of other cleanup needed for general maintainability.</p><p>See</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3127" target="_blank" rel="noopener noreferrer">pull-3127</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3195" target="_blank" rel="noopener noreferrer">pull-3195</a></li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3202" target="_blank" rel="noopener noreferrer">pull-3202</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="removing-pointer-addresses">Removing pointer addresses<a class="hash-link" href="#removing-pointer-addresses" title="Direct link to heading">​</a></h4><p>Pointer addresses, which have never seen any real use
(there are something like eleven on mainnet), are being deprecated starting at Cardano major
version 9.
<a href="https://github.com/cardano-foundation/CIPs/pull/374" target="_blank" rel="noopener noreferrer">CPS-0002</a> gives the context.
We are disabling them by first preventing transaction outputs containing them
from being serialized by the node at the moment we switch to version 9.
At the hard fork after that, we will translate the existing few pointer addresses
to enterprise addresses.</p><p>See</p><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3174" target="_blank" rel="noopener noreferrer">pull-3174</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3162" target="_blank" rel="noopener noreferrer">pull-3162</a> - Sometimes we have to put safeguards in place for hard forks which may never
be exercised. After we have passed the given hardfork, we are able to clean up the code
and simplify our logic. We removed all of the ones that we are currently easily able to.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3165" target="_blank" rel="noopener noreferrer">pull-3165</a> - We improved the type safety of our code while also discovering and fixing
a serialization bug.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3172" target="_blank" rel="noopener noreferrer">pull-3172</a> - We removed dead code.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3175" target="_blank" rel="noopener noreferrer">pull-3175</a> - The Allegra and the Mary code used to be coupled in a particular way the we grew to
dislike. We made these two ledger eras now uniform with the rest of our code base.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3184" target="_blank" rel="noopener noreferrer">pull-3184</a> - We organized our property testing code.</li><li><a href="https://github.com/input-output-hk/cardano-ledger/pull/3200" target="_blank" rel="noopener noreferrer">pull-3200</a> - The Plutus tools teams fixed an outstanding bug in the translation from the
ledger state to the Plutus script context.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-12-02-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-02-hydra"/>
        <updated>2022-12-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team has worked on cleaning up several things in progress
after last week's summit. They have extended their model-based testing (MBT)
approach with transaction creation &amp; observation
<a href="https://github.com/input-output-hk/hydra/issues/410" target="_blank" rel="noopener noreferrer">#410</a>, solved
<code>AcquirePointTooOld</code> problems of the <code>hydra-node</code> with by changing the wallet
initialization <a href="https://github.com/input-output-hk/hydra/issues/439" target="_blank" rel="noopener noreferrer">#439</a>.
Also, the Hydra researchers updated the security proofs of the Coordinated Hydra
Head, which are bound to be included in the Hydra HeadV1 specification.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Monthly review &amp; report - will also be published on our website <a href="https://github.com/input-output-hk/hydra/pull/644" target="_blank" rel="noopener noreferrer">#644</a></li><li>Extended the model-based testing (MBT) with transaction creation/observation <a href="https://github.com/input-output-hk/hydra/issues/410" target="_blank" rel="noopener noreferrer">#410</a></li><li>Solve <code>AcquirePointTooOld</code> problems with new wallet initialization <a href="https://github.com/input-output-hk/hydra/issues/439" target="_blank" rel="noopener noreferrer">#439</a></li><li>Fixed our hydraw deployments (EC2 instances)</li><li>Created &amp; discussed <a href="https://github.com/input-output-hk/hydra/blob/7e532bd1c8a840a8155cf4b0858b982308dfc3f0/docs/adr/CloseTx-validity-bounds-and-deadline-calculation-DoS.md" target="_blank" rel="noopener noreferrer">ADR21</a> within tx validity work</li><li>Received &amp; discussed security proofs of Coordinated Hydra Head (requires more work)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Get ADR21 accepted &amp; close tx validity gap in our implementation</li><li>Complete review &amp; integrate the Hydra tutorial</li><li>Review latest hydra-pay work</li><li>Have a LaTeX write-up of the HeadV1 (Coordinated Hydra Head) spec</li><li>Get Cicero (new CI) working</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB sync Team Update]]></title>
        <id>2022-12-01-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-01-db-sync"/>
        <updated>2022-12-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The DB Sync team prepared a release <code>13.1.0.0-rc2</code> which includes many improvements for db-sync,
it makes rollbacks and syncing much faster, simplifies the schema, fixes bugs and introduces
migrations. This release finalises the objectives that were set for db-sync for the previous
3 months period and part of the syncing speed objective set for the next period
<a href="https://github.com/input-output-hk/cardano-db-sync/blob/3640e5aa00b8bada61e5d4b6eee063749866711b/cardano-db-sync/CHANGELOG.md#13100" target="_blank" rel="noopener noreferrer">Changelog</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><ul><li><p>Branch <a href="https://github.com/input-output-hk/cardano-db-sync/compare/release/13.0.x..3640e5aa00b8bada61e5d4b6eee063749866711b" target="_blank" rel="noopener noreferrer">release/13.1.0.x</a>
includes all the improvements related to the release. The release is passing through the testing
phase and a number of bugs and issues have been fixed, like
<a href="https://github.com/input-output-hk/cardano-db-sync/issues/1312" target="_blank" rel="noopener noreferrer">#1312</a>
<a href="https://github.com/input-output-hk/cardano-db-sync/issues/1311" target="_blank" rel="noopener noreferrer">#1311</a>.
Also many new unit tests have been added.</p></li><li><p>Part of the release branch is cherry-picked back into master, in a way that it respects the new
release and development process, so that it takes into account migrations
<a href="https://github.com/input-output-hk/cardano-db-sync/issues/1305" target="_blank" rel="noopener noreferrer">release process</a></p></li><li><p>The DB Sync team has also tagged release <code>13.0.6</code> which better supports preview and preprod for
docker.</p></li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2022-12-01-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-01-mithril"/>
        <updated>2022-12-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team worked on finalizing their release process by adding new features: publishing their cryptographic library to the Rust community, adding node versions manifest in the release notes, and signing the binaries embedded in the distributions. They deprecated the declarative signer node registration that will be decommissioned in a few weeks. The team also completed the automatic store upgrade process for the signer and aggregator nodes. </p><p>Finally, the team continued working on the redaction of the CIP that will allow the decentralization of Mithril by using the Cardano networking layer.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Implemented custom Mithril SPOs on testing/pre-release networks <a href="https://github.com/input-output-hk/mithril/issues/563" target="_blank" rel="noopener noreferrer">#563</a></li><li>Deprecated Signer Declarative Pool Id registration mode <a href="https://github.com/input-output-hk/mithril/issues/585" target="_blank" rel="noopener noreferrer">#585</a></li><li>Completed the second stage of the store automatic migration process <a href="https://github.com/input-output-hk/mithril/issues/600" target="_blank" rel="noopener noreferrer">#600</a></li><li>Completed the deployment pipelines to crates.io registry <a href="https://github.com/input-output-hk/mithril/issues/588" target="_blank" rel="noopener noreferrer">#588</a></li><li>Completed automatic generation of nodes/libraries versions manifest in releases notes <a href="https://github.com/input-output-hk/mithril/issues/599" target="_blank" rel="noopener noreferrer">#599</a></li><li>Completed CI/CD handling of PR from forks <a href="https://github.com/input-output-hk/mithril/issues/597" target="_blank" rel="noopener noreferrer">#597</a></li><li>Worked on the CIP design for Mithril piggybacked on the Cardano network layer <a href="https://github.com/input-output-hk/mithril/issues/586" target="_blank" rel="noopener noreferrer">#586</a></li><li>Worked on signing the artifacts released in the distributions by the CI/CD <a href="https://github.com/input-output-hk/mithril/issues/587" target="_blank" rel="noopener noreferrer">#587</a></li><li>Worked on multi-platforms end to end test <a href="https://github.com/input-output-hk/mithril/issues/601" target="_blank" rel="noopener noreferrer">#601</a></li><li>Worked on the refactorizaton of the aggregator multi-signer engine <a href="https://github.com/input-output-hk/mithril/issues/398" target="_blank" rel="noopener noreferrer">#398</a></li></ul>]]></content>
        <author>
            <name>Jean-Philippe Raynaud</name>
            <uri>https://github.com/jpraynaud</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[System Test Team Update]]></title>
        <id>2022-12-01-system-test</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-12-01-system-test"/>
        <updated>2022-12-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the last 2 weeks we did more improvements on our Test Framework, planned the testing of the <em>P2P Single
Relay</em> functionality, and also tested some DB-Sync tags.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="framework-improvements">Framework improvements:<a class="hash-link" href="#framework-improvements" title="Direct link to heading">​</a></h3><ul><li>moved the System Test CLI Pipelines from BuildKite to Github Actions</li><li>improved the reporting tools to support the rerun of the failled tests and update of the reports </li><li>added support for Github API in <a href="https://github.com/mkoura/report-aggregator" target="_blank" rel="noopener noreferrer">report-aggregator</a>, so reports will be generated from the GitHub nightly jobs from now on</li><li>added support for mixed topology - P2P, legacy, mixed topologies</li><li>planned the P2P Single Relay system test activities </li><li>added support to start regression tests with PV8 + better selection of tests</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="db-sync">DB-Sync:<a class="hash-link" href="#db-sync" title="Direct link to heading">​</a></h3><ul><li>confirmed that DB-Sync release 13.0.5 is compatible with Node release 1.35.4 + Protocol Version 8 (on the Preview environment)</li><li>tested a couple db-sync tags - 13.1.0.0-rc1, 13.1.0.0-rc2</li></ul>]]></content>
        <author>
            <name>Dorin Solomon</name>
            <uri>https://github.com/dorin100</uri>
        </author>
        <category label="system-test" term="system-test"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-11-30-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-30-consensus"/>
        <updated>2022-11-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks, the consensus team merged improvements to the monadic
cursor API that was needed to implement LMDB range reads, which is in turn
required for the implementation of the UTxO HD feature. We added tables to
several tests in for the UTxO HD feature, which increases our confidence in the
correctness of the prototype. The mempool property tests are close to being
completed. Also, we finished the LSM tree tuning algorithm.</p><p>On the Genesis front we started simplifying the BlockFetch logic with
CSJ-specific workloads in mind. </p><p>We are also documenting the Block Diffusion Pipelining feature, and added a
high-level overview of consensus to the top level documentation of
<code>ouroboros-network</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd-prototype">UTxO HD prototype<a class="hash-link" href="#utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We merged the implementation of a monadic cursor API (<a href="https://github.com/input-output-hk/lmdb-simple/pull/1" target="_blank" rel="noopener noreferrer">#1</a>)) which was
needed to solve a bug with LMDB range-reads. After this PR was merged, we focused on
bridging the gap between the <code>lmdb-simple</code> interface and consensus by facilitating
using <code>lmdb-simple</code>'s cursor API without <code>Serialise</code> constraints (<a href="https://github.com/input-output-hk/lmdb-simple/pull/3" target="_blank" rel="noopener noreferrer">#3</a>).</p><p>We refactored the backing store property tests to use <code>quickcheck-lockstep</code>
(<a href="https://github.com/input-output-hk/ouroboros-network/pull/4081" target="_blank" rel="noopener noreferrer">#4081</a>).</p><p>We added tables to the mock ledger in the UTxO-HD feature branch
(<a href="https://github.com/input-output-hk/ouroboros-network/pull/4184" target="_blank" rel="noopener noreferrer">#4184</a>). Every test that used to run with <code>SimpleBlocks</code> now uses
tables. This will enable us to exercise the UTxO HD mempool integration by
leveraging the existing mempool property-tests. The new state-machine
property-tests are still needed for testing the parallel behaviour of the
mempool.</p><p>Our work on the mempool state-machine tests revealed the need for improvements
in the <code>quickcheck-state-machine</code> library. Parallel testing assumed that the
state machine did not have access to mutable references. However, the mempool
tests require the use of such mutable references for mocking the ledger
interface. As a result, our parallel tests were failing with rather obscure
messages. @Jasagredo submitted a pull request (<a href="https://github.com/stevana/quickcheck-state-machine/pull/12" target="_blank" rel="noopener noreferrer">#12</a>) that allows for
new mutable references to be created at each run of the state machine.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="backing-store-property-tests">Backing store property tests<a class="hash-link" href="#backing-store-property-tests" title="Direct link to heading">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsm-tree-implementation">LSM tree implementation<a class="hash-link" href="#lsm-tree-implementation" title="Direct link to heading">​</a></h3><p>We finished the LSM Tree tuning algorithm. We are currently tidying up the code
and gathering results (i.e., plots and their interpretation).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="csj-prototype">CSJ prototype<a class="hash-link" href="#csj-prototype" title="Direct link to heading">​</a></h3><p>We started simplifying the BlockFetch logic with CSJ-specific workloads in mind.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-vrf-and-kes-crypto-integration">New VRF and KES crypto integration<a class="hash-link" href="#new-vrf-and-kes-crypto-integration" title="Direct link to heading">​</a></h3><p>Started working on supporting new version of <code>StandardCrypto</code> which uses compact
KES and batched VRF (<a href="https://github.com/input-output-hk/ouroboros-network/issues/4151" target="_blank" rel="noopener noreferrer">#4151</a>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>We reviewed the existing state of the Block Diffusion Pipelining document. We
are now working on the "Implementation" section (<a href="https://github.com/input-output-hk/ouroboros-network/issues/4020" target="_blank" rel="noopener noreferrer">#4020</a>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fostering-collaboration">Fostering collaboration<a class="hash-link" href="#fostering-collaboration" title="Direct link to heading">​</a></h3><p>We cleared up our understanding of the error dynamics of forecasting
(<a href="https://github.com/input-output-hk/ouroboros-network/pull/4146" target="_blank" rel="noopener noreferrer">#4146</a> and <a href="https://github.com/input-output-hk/ouroboros-network/pull/4174" target="_blank" rel="noopener noreferrer">#4174</a>).</p><p>We submitted a pull request that adds an overview of consensus to the <a href="https://input-output-hk.github.io/ouroboros-network/" target="_blank" rel="noopener noreferrer">top level
documentation</a> of
ouroboros-network (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4197" target="_blank" rel="noopener noreferrer">#4197</a>). This overview describes the consensus components and adds a
hyperlinked map to the modules documentation.</p><p><a href="https://github.com/input-output-hk/ouroboros-network/pull/4197" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/ouroboros-network/pull/4197</a></p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2022-11-30-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-30-node-cli-api"/>
        <updated>2022-11-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2022-11-30 - 2022-12-13</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>PRs merged in this sprint focused on clean up and resolving existing issues. The majority of the time during this sprint was spent on the In Progress PRs which have dependencies on consensus. This has been since rectified i.e cardano-node dependencies have been bumped. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4675" target="_blank" rel="noopener noreferrer">Append tx output in cli transaction build command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4592" target="_blank" rel="noopener noreferrer">Update Error messages in cardano-cli</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4675" target="_blank" rel="noopener noreferrer">Replace Data.Map with Data.Map.Strict</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4708" target="_blank" rel="noopener noreferrer">Update Github actions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4279" target="_blank" rel="noopener noreferrer">Multiple pools support in query stake snapshot</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4250" target="_blank" rel="noopener noreferrer">Optimise query leadership schedule command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4179" target="_blank" rel="noopener noreferrer">Optimise query stake snapshot command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4625" target="_blank" rel="noopener noreferrer">Handle pipes in cardano-cli</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4659" target="_blank" rel="noopener noreferrer">Render consistent plutus script failure output</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4713" target="_blank" rel="noopener noreferrer">Fully remove the cli intermediate TxBody format</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2022-11-30-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-30-performance-and-tracing"/>
        <updated>2022-11-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ol><li>Benchmarks for the 1.36 first pre-release bump of the internal components have been delivered, and data shows the component bump is clear for release.</li><li>SECP benchmarking enablement is underway:  the necessary generator features have been implemented, and are now being integrated into the workbench.</li><li>The new tracing system:  in response to the performance regression we previously discovered we are working on pre-planned implementation improvements, and doing more benchmarks.</li><li>Infrastructure:  the Nomad-based workbench backend has been made closer to a cloud deployment scenario.  Cleanup in preparation for Cicero CI/CD integration started.</li><li>Open sourcing:  ongoing SRE collaboration on production deployment of performance data publishing.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h2><p>We have ran benchmarks for the first component bump of the upcoming 1.36 release, and we don't see any significant performance changes.  The component bumps are therefore clear for release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h2><p>For the tracing system regression that we spotted -- even before, we already had plans for further efficiency improvement, and now we are actively pursuing them.
The idea is to collect more statically-available information to enable shifting of more tracing decisions from message delivery time to configuration time.</p><p>To support this effort, we also started running more benchmarks and enhanced data analysis with relevant metrics.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">​</a></h2><p>Generation support for Plutus V2 has been implemented and so, with the help of the previously made looped signature-verifying script, the generator is now capable of producing two SECP workloads: verifying either ECDSA or Schnorr signatures.  This is now being integrated into the infrastructure -- the generator parametrisation API is being enhanced and the workbench is being extended to handle the new parametrisation.</p><p>In addition the workbench is now being enhanced to handle protocol-version-based choices for the Plutus cost model.</p><p>The intermediate cloud compatibility iteration of the workbench cloud enablement effort was merged.
We are now doing some cleanup work in preparation for starting the Cicero backend, which will bring us nearly completely to the CI/CD integration.</p><p>We continue collaboration with SRE on production deployment of data publishing.  We now have a gradual rollout plan, which respects the plans for SRE infrastructure feature availability.</p><p>We are working on recovering the software dependency manifest feature that was lost with the organisation-wide transition to CHaP.</p><p>As usual, a number of smaller workbench, data analysis &amp; reporting improvements have been made.</p>]]></content>
        <author>
            <name>Serge Kosyrev</name>
            <uri>https://github.com/deepfire</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2022-11-28-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-28-network"/>
        <updated>2022-11-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Stake-Driven Data Diffusion Release for Relays]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stake-driven-data-diffusion-release-for-relays">Stake-Driven Data Diffusion Release for Relays<a class="hash-link" href="#stake-driven-data-diffusion-release-for-relays" title="Direct link to heading">​</a></h2><p>IOG networking team decided to release the <em>Stake-Driven Data Diffusion with
Robust Optimised Peer Selection</em> also more commonly known as <em>P2P</em>.  In the
last update, we informed about a performance regression, but it turns out it
only affects block producers, and thus we highly advise against running it on
such nodes.  Further investigation is required to find the cause of it.</p><p>On IOG's benchmarking cluster we have seen quite a good performance improvement
on block propagation itself.  The cluster is running a static topology with
valency 6 (each node is connected to 6 other nodes).  In which every of the 50
nodes are block producers.  The setup of this network is the same as mainnet.
We've seen 40-50% performance improvement on block propagation comparing to the
same cluster deployed with the same topology but using non-P2P nodes.  We think
this performance improvement is caused by using full duplex connections.  Quite
likely the transaction traffic floating in both directions on the same TCP
connection helps to keep the TCP window open.  Note that in a cluster of 50
nodes with valency 6 the probability of having at least one duplex connection
is more than 50%.  We don't expect the same improvement on mainnet because the
network is much wider and the transaction traffic is not as large.</p><p>Just before the release we squashed two small bugs:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4163" target="_blank" rel="noopener noreferrer">issue #4163</a> - top level integration bug in <code>keep-alive</code>;</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/4177" target="_blank" rel="noopener noreferrer">issue #4177</a> - a bug in <code>outbound-governor</code>;</li><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4165" target="_blank" rel="noopener noreferrer">PR #4165</a> - a fix <code>cardano-ping</code> support of <code>NodeToNodeV_10</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="peer-sharing">Peer Sharing<a class="hash-link" href="#peer-sharing" title="Direct link to heading">​</a></h3><p>We were carrying a review of <a href="https://github.com/input-output-hk/ouroboros-network/pull/4019" target="_blank" rel="noopener noreferrer">peer sharing PR</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deltaq">DeltaQ<a class="hash-link" href="#deltaq" title="Direct link to heading">​</a></h3><p>Neil Davies was invited to give a guest lecture entitled <code>Avoiding System Catastrophes</code> at <a href="https://uclouvain.be/en/index.html" target="_blank" rel="noopener noreferrer">UCLouvain</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-have-we-achieve-last-sprint">What have we achieve last sprint<a class="hash-link" href="#what-have-we-achieve-last-sprint" title="Direct link to heading">​</a></h2><ul><li><p><a href="https://github.com/input-output-hk/ouroboros-network/issues/4163" target="_blank" rel="noopener noreferrer">issue #4163</a>: we found out that a control message is not passed to the
<code>keep-alive</code> mini-protocol, this results in every demotion executing demotion
timeout rather than a graceful termination.  With the fix the node will no longer log:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"kind"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"PeerStatusChangeFailure"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"peerStatusChangeType"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"WarmToCold (ConnectionId {localAddress = 192.168.0.10:7000, remoteAddress = 3.129.186.40:3000})"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token property" style="color:#36acaa">"reason"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"TimeoutError"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><a href="https://github.com/input-output-hk/ouroboros-network/issues/4177" target="_blank" rel="noopener noreferrer">issue #4177</a>: we fixed an assertion failure in the <code>outbound-governor</code>; now
we don't try demoted peers which are being demoted already.</p></li><li><p><a href="https://github.com/input-output-hk/ouroboros-network/pull/4155" target="_blank" rel="noopener noreferrer">PR #4155</a>: we refactored <code>ouroboros-network</code> packages.  There's a top level
<code>ouroboros-consensus-diffusion</code> package which integrates <code>network</code>
&amp; <code>consensus</code> code.  We also introduced:</p><ul><li><code>ouroboros-network-api</code> package which contains the API shared between
<code>network</code> &amp; <code>conensus</code>;</li><li><code>ouroboros-network-mock</code> package which contains mock API used for testing
(e.g. a mock chain &amp; chain producer, etc.)</li><li><code>ouroboros-network-protocols</code> package which contains implementation of all
(but <code>handshake</code>) mini-protocols, exposes a <code>testlib</code> and contains <code>test</code>
and <code>cddl</code> components.</li></ul><p>This made the dependency tree of <code>network</code> &amp; <code>consensus</code> packages much
cleaner.</p></li><li><p><a href="https://github.com/input-output-hk/ouroboros-network/pull/4169" target="_blank" rel="noopener noreferrer">PR #4169</a>: we described the usage of release branches in <code>CONTRIBUTING.md</code>
doc.</p></li><li><p><a href="https://github.com/input-output-hk/ouroboros-network/pull/4165" target="_blank" rel="noopener noreferrer">PR #4165</a>: we fixed <code>cardano-ping</code> support of <code>NodeToNodeV_10</code> protocol.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deltaq-1">DeltaQ<a class="hash-link" href="#deltaq-1" title="Direct link to heading">​</a></h3><p>The abstract of the talk:</p><blockquote><p>An essential step to ensuring that distributed systems are fit for
purpose.</p><p>Distributed systems have become an integral part of our society and
daily lives. We are, both implicitly and explicitly, individually as well as
collectively, placing ever more trust in them.</p><p>Are they worthy of this trust?  Our need for them to be ‘fit-for-purpose’ goes
well beyond notions of functional correctness (i.e. never getting the wrong
answer). We need them to deliver the desired outcomes in a timely, robust,
reliable, resilient fashion, at scale and in a sustainable way (both
economically and environmentally).</p><p>This all sounds like a worthy aspiration, but what would be a practical
approach to capturing and reasoning about these issues? How can we ensure that
systems can meet their fit-for-purpose objectives, not just in their design but
as they are deployed, encounter the imperfect world, are scaled to become
economic, and proceed into ongoing maintenance?</p><p>This talk will illustrate how the notions of Outcomes and Quality Attenuation
(as captured by ‘∆Q’) are being used to both frame the necessary notions and
provide a basis for assuring the refinement and reification of such systems,
from initial concept to operational infrastructure.</p></blockquote><p>You can download the slides from <a target="_blank" href="/cardano-updates/assets/files/2022-11-24-UCL-60c46564c5dee25b0060304c060ab1cf.pdf">here</a>.</p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2022-11-25-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-25-crypto"/>
        <updated>2022-11-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The four open fronts that the crypto team is working on are:</p><ul><li>MuSig2: We are almost ready to reach a point where the MuSig2 library is ready for usage by the Hydra team. </li><li>Mithril: We started to think how Mithril-core can be designed such that it can be leverage by contexts where the verifiers run full nodes</li><li>cardano-base: The VRF and BLS branchs are still open and in progress</li><li>KES agent: We keep progressing with KES secure forgetting implementation as well as the KES agent. </li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-summary">Low level summary<a class="hash-link" href="#low-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="musig2">MuSig2<a class="hash-link" href="#musig2" title="Direct link to heading">​</a></h3><ul><li>We redesigned the library so that MuSig2 lib users don't need to be aware of the underlying secp256k1 library <a href="https://github.com/input-output-hk/musig2/pull/31" target="_blank" rel="noopener noreferrer">PR#31</a></li><li>We are introducing a more granular error handling mechanism <a href="https://github.com/input-output-hk/musig2/pull/33" target="_blank" rel="noopener noreferrer">PR#33</a></li><li>We rethought the API and made it more consistent with the underlying secp256k1 library <a href="https://github.com/input-output-hk/musig2/pull/35" target="_blank" rel="noopener noreferrer">PR#35</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril">Mithril<a class="hash-link" href="#mithril" title="Direct link to heading">​</a></h3><ul><li>The mithril crates in general will be published in crates.io, and we adapted the core library's README <a href="https://github.com/input-output-hk/mithril/pull/616" target="_blank" rel="noopener noreferrer">PR#616</a> </li><li>We are modifying the individual signature to not contain the VK and stake. This was not necessary, as the current design requires the aggregator of Mithril certificates to know this information <a href="https://github.com/input-output-hk/mithril/pull/620" target="_blank" rel="noopener noreferrer">PR#620</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-base">cardano-base<a class="hash-link" href="#cardano-base" title="Direct link to heading">​</a></h3><ul><li>We've been still working in updating to the latest version of the VRF. In particular we modified the cbits to use the latest version of libsodium stable (1.0.18) <a href="https://github.com/input-output-hk/cardano-base/pull/341" target="_blank" rel="noopener noreferrer">PR#341</a></li><li>SKs, VKs and VRF outputs will be compatible across the different versions. We are implementing conversion functions for simple transitions <a href="https://github.com/input-output-hk/cardano-base/pull/344" target="_blank" rel="noopener noreferrer">PR#344</a></li><li>Benchmarks on pairing built-ins have already started, so we were finalising some CI concerns and final remarks on the BLS PR, so that it can be merged as soon as we have green light from plutus <a href="https://github.com/input-output-hk/cardano-base/pull/266" target="_blank" rel="noopener noreferrer">PR#266</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h2><ul><li>We keep progressing in the secure forgetting PR and resolving some bugs on memory handling <a href="https://github.com/input-output-hk/cardano-base/pull/255" target="_blank" rel="noopener noreferrer">PR#255</a></li><li>Increasing the test framework to make sure concurrency is properly treated by the KES Agent, for which we are including refcounted references. General progress in the implementation.</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-11-25-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-25-hydra"/>
        <updated>2022-11-25T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team attended the Cardano Summit in Lausanne, where Sebastian gave a <a href="https://summit.cardano.org/agenda-day-2/cardano-ballot-speaker-winner-presentation-6/" target="_blank" rel="noopener noreferrer">presentation</a> about Hydra and the whole team connected with the Cardano Community. After the public event, th Hydra team also conducted a workshop, which provided room for a retrospective, various planning sessions and they hacked together on different ideas.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Attended the Cardano Summit in Lausanne. Hydra was topic of one talk: <a href="https://summit.cardano.org/agenda-day-2/cardano-ballot-speaker-winner-presentation-6/" target="_blank" rel="noopener noreferrer">https://summit.cardano.org/agenda-day-2/cardano-ballot-speaker-winner-presentation-6/</a></li><li>Had a team workshop / hackathon after the summit:<ul><li>Retrospective</li><li>Impact mapping session</li><li>Hacked on smaller things</li></ul></li><li>Got a PR for tullia/cicero things by @kdermetfan</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Monthly report &amp; review meeting</li><li>Tie up several loose ends / branches.</li><li>Resolve Tx validity discussions &amp; PRs.</li><li>Review cicero PR &amp; try it out.</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-11-23-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-23-ledger"/>
        <updated>2022-11-23T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We released <a href="https://github.com/cardano-foundation/CIPs/pull/380" target="_blank" rel="noopener noreferrer">CIP-1694</a>,
our proposal for entering the <a href="https://roadmap.cardano.org/en/voltaire/" target="_blank" rel="noopener noreferrer">Voltaire phase</a>.
<strong>Please come join the discussion</strong>, this will be an incredibly exciting transition for
Cardano and we want everyone to participate!</p><p>We now have a sensible way to version all of the serialization schemes used in the ledger.
The draft pull request was polished, reviewed, and merged this week.
This solves many problems that have vexed us since the beginning of the Shelley ledger era.</p><p>Everyone working on the Cardano node is working together to improve our release process,
and the ledger team in particular dedicated one engineer to help with these efforts
for the next release.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-conway-ledger-era">The Conway ledger era<a class="hash-link" href="#the-conway-ledger-era" title="Direct link to heading">​</a></h3><p>The current proposal in <a href="https://github.com/cardano-foundation/CIPs/pull/380" target="_blank" rel="noopener noreferrer">CIP-1694</a> encompasses two new ledger eras.
The first era will be called Conway, after the English mathematician John Horton Conway.
The community facing aspects of the Conway ledger era will be very minimal,
but it will pave the way for introducing liquid democracy.
The details can be viewed <a href="https://github.com/input-output-hk/cardano-ledger/projects/4" target="_blank" rel="noopener noreferrer">here</a>.
We do not yet have a formal specification for the Conway era.
Our plan is to debut the
<a href="https://github.com/input-output-hk/formal-ledger-specifications" target="_blank" rel="noopener noreferrer">formal ledger model</a>.
Briefly, the Conway ledger era will:</p><ul><li>introduce SPO voting for hard forks (in the spirit of the now abandoned <a href="https://github.com/cardano-foundation/CIPs/pull/318" target="_blank" rel="noopener noreferrer">CIP-47</a>)</li><li>provide an on-chain mechanism for rotating the governance keys</li><li>re-plumb the ledger rules involving governance to be in line with <a href="https://github.com/cardano-foundation/CIPs/pull/380" target="_blank" rel="noopener noreferrer">CIP-1694</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="versioned-cbor">Versioned CBOR<a class="hash-link" href="#versioned-cbor" title="Direct link to heading">​</a></h3><p>We now have the ability to easily tie our serialization schemes to the Cardano
major protocol version.
We still aim to preserve backwards compatibility as much as possible, but we now have a principled
plan for resolving problems (see <a href="https://github.com/cardano-foundation/CIPs/pull/372" target="_blank" rel="noopener noreferrer">CIP-ledger-cbor</a>).
In particular, we can now address several long standing issues, such as
<a href="https://github.com/input-output-hk/cardano-ledger/issues/2444" target="_blank" rel="noopener noreferrer">issue-2444</a>, <a href="https://github.com/input-output-hk/cardano-ledger/issues/2965" target="_blank" rel="noopener noreferrer">issue-2965</a>, and <a href="https://github.com/input-output-hk/cardano-ledger/issues/3003" target="_blank" rel="noopener noreferrer">issue-3003</a>. </p><p>The final (and massive!) pull request which brought us the versioning is <a href="https://github.com/input-output-hk/cardano-ledger/pull/3138" target="_blank" rel="noopener noreferrer">pull-3138</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deposit-tracking">Deposit tracking<a class="hash-link" href="#deposit-tracking" title="Direct link to heading">​</a></h3><p>The draft pull request which was exploring how best to track individual deposits
is much closer now to being ready to take out of draft (<a href="https://github.com/input-output-hk/cardano-ledger/pull/3127" target="_blank" rel="noopener noreferrer">pull-3127</a>).
For background on the issue, see <a href="https://github.com/input-output-hk/cardano-ledger/issues/3113" target="_blank" rel="noopener noreferrer">issue-3113</a>.
This is quite an invasive change which effects many of our tests, which we are now addressing.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>As always, we keep working on technical debt.
We have deduplicated a some things: <a href="https://github.com/input-output-hk/cardano-ledger/pull/3129" target="_blank" rel="noopener noreferrer">pull-3129</a>, <a href="https://github.com/input-output-hk/cardano-ledger/pull/3162" target="_blank" rel="noopener noreferrer">pull-3162</a>.
We have memoized a problematic computation (though more due diligence is needed before we can
merge): <a href="https://github.com/input-output-hk/cardano-ledger/pull/3141" target="_blank" rel="noopener noreferrer">pull-3141</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-release">Node release<a class="hash-link" href="#node-release" title="Direct link to heading">​</a></h3><p>We have been helping with the node release efforts. See <a href="https://github.com/input-output-hk/cardano-node/pull/4608" target="_blank" rel="noopener noreferrer">pull-4608</a>.</p>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-11-18-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-18-hydra"/>
        <updated>2022-11-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team released version <code>0.8.1</code>, which includes several fixes and a user-wished extension of the persistence introduced by <code>0.8.0</code> of replaying server outputs to make clients like the <code>hydra-tui</code> be aware of the latest <code>hydra-node</code> state. The team also worked on the specification and closing gaps in the on-chain scripts, collaborated with the education team on a Hydra tutorial and also renamed the repository from <code>hydra-poc</code> to <a href="https://github.com/input-output-hk/hydra" target="_blank" rel="noopener noreferrer"><code>hydra</code></a>!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Implemented replaying of server outputs to address <a href="https://github.com/input-output-hk/hydra-poc/issues/580" target="_blank" rel="noopener noreferrer">#580</a></li><li>Released version 0.8.1 containing this and other fixes <a href="https://github.com/input-output-hk/hydra/releases/tag/0.8.1" target="_blank" rel="noopener noreferrer">Release notes</a></li><li>Worked on the bounded tx validity as one of the on-chain script fixes, but couldn<!-- -->’<!-- -->t finish it just yet <a href="https://github.com/input-output-hk/hydra/pull/615" target="_blank" rel="noopener noreferrer">#615</a></li><li>Collaborated with the education team on a Hydra tutorial.</li><li>Discovered and discussed issues with the <!-- -->“<!-- -->seen ledger<!-- -->”<!-- -->.</li><li>Renamed the Hydra repository <code>hydra-poc</code> -&gt; <code>hydra</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Create and discuss an ADR about handling tx validity correctly.</li><li>Attend the Cardano Summit in Lausanne. Hydra will be topic of one talk! Save the date+time: <strong>"Developing Hydra" on Day 2, Nov 21st, 13:50 CET</strong></li><li>Have a team workshop / hackathon after the summit:<ul><li>Retrospective</li><li>Roadmapping session</li><li>Hack on something complex or useful</li></ul></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2022-11-18-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-18-mithril"/>
        <updated>2022-11-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The Mithril team has released their second distribution 2246.1 following the activation of the alpha version of the new release process. They continued refining its implementation and added a new set of artifacts to the distributions, such as Debian packages and macOS/Windows binaries. The team also enhanced the Mithril Explorer, which now provides more detailed information about epoch settings and easier access to multiple aggregators for the users. They have also worked on an enhanced mechanism for node versioning, storage, and communication protocol. They also implemented version detections for the signer and aggregator nodes, designed the automatic store upgrade feature for these nodes, and enhanced the documentation of the configuration parameters of the several Mithril networks. </p><p>Finally, the team continued working on the elaboration of the CIP that will allow the decentralization of Mithril by relying on the Cardano node network layer.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>Released a new Mithril distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2246.1" target="_blank" rel="noopener noreferrer">2246.1</a></li><li>Completed the first stage of the store migrations process <a href="https://github.com/input-output-hk/mithril/issues/562" target="_blank" rel="noopener noreferrer">#562</a></li><li>Added a Mithril API version that is now exposed in the headers of the requests sent and received by the nodes <a href="https://github.com/input-output-hk/mithril/issues/565" target="_blank" rel="noopener noreferrer">#565</a></li><li>Enhanced the explorer UI with epoch settings information and aggregators management on browser local storage <a href="https://github.com/input-output-hk/mithril/issues/576" target="_blank" rel="noopener noreferrer">#576</a></li><li>Prepared a Daedalus synchronization benchmark video with/without Mithril <a href="https://github.com/input-output-hk/mithril/issues/606" target="_blank" rel="noopener noreferrer">#606</a></li><li>Upgraded the Cardano nodes of the testing Mithril networks to <code>1.35.4</code> <a href="https://github.com/input-output-hk/mithril/issues/594" target="_blank" rel="noopener noreferrer">#594</a></li><li>Worked on implementing SPO tests nodes on testing Mithril networks <a href="https://github.com/input-output-hk/mithril/issues/563" target="_blank" rel="noopener noreferrer">#563</a></li><li>Worked on the CIP design for Mithril piggybacked on the Cardano network layer <a href="https://github.com/input-output-hk/mithril/issues/588" target="_blank" rel="noopener noreferrer">#588</a></li><li>Worked on the refactorizaton of the aggregator multi signer engine <a href="https://github.com/input-output-hk/mithril/issues/398" target="_blank" rel="noopener noreferrer">#398</a></li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-11-16-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-16-consensus"/>
        <updated>2022-11-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks, the consensus team started documenting the
implementation of the UTxO HD feature and continued developing tests for it. As
part of our work on UTxO HD, we improved the Haskell support for LMDB. We also
spent time working on the LSM tree prototype, and designed a parameter tuning
algorithm for it. Regarding our work on Genesis, our investigation of the
"plateaus" pointed at the <code>TICKF</code> slowdown on era boundaries as culprit. This
led us to developing a caching strategy that will not only remove the
aforementioned "plateaus", but can help alleviating the growing block production
delay on epoch switch. We also helped reviewing the block forge credential
hotswap feature, which is intended for use in the adoption of P2P.</p><p>We also worked on paying technical debt and fostering collaboration. In
particular, we improved the <code>io-sim</code> framework, which is crucial for testing and
simulating Cardano components. We also removed thunks that appeared on era
translations, and improved our diffusion pipelining feature. We are working on a
presentation for explaining Praos and Genesis.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-status-report">High-level status report<a class="hash-link" href="#high-level-status-report" title="Direct link to heading">​</a></h2><ul><li>Finish the UTxO HD prototype: in progress.<ul><li>We added documentation for this feature.</li><li>We developed the second version of the mempool tests.</li><li>We fixed benchmarks that were inflating the speedup we observed in the
anti-diff implementation of sequences of differences. Speedups are now in the
range of <!-- -->[3.33, 4.75]<!-- -->, which remain significant.</li><li>We continued improving Haskell LMDB support.</li><li>We finished implementing a "parameter tuning algorithm" for the LSM tree
prototype. This enables us to run experiments to check the correctness of
the algorithm.</li></ul></li><li>Genesis: in progress.<ul><li>Work investigating the "plateaus" in the <code>ChainSync</code> jumping prototype
pointed to the <code>TICKF</code> slowdown on era boundaries as culprit.</li></ul></li><li>Tech debt:<ul><li>We improved the capabilities of our <code>io-sim</code> library, which is crucial for
testing and simulating Cardano components.</li><li>We removed thunks from epoch translations in the ledger.</li><li>We added Linux CI support for <code>lmdb-simple</code>.</li><li>We got pending diffusion pipelining improvements merged.</li></ul></li><li>Fostering collaboration:<ul><li>We are working on a explanation of Praos and Genesis protocols.</li></ul></li><li>Support:<ul><li>Investigation of CSJ "plateaus" led us to developing a caching strategy for
<code>TICKF</code> that will not only remove these "plateaus", but can help alleviating
the growing block production delay on epoch switch.</li><li>We reviewed the block forge credential hotswapping feature which is intended
for use in the adoption of P2P.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="finish-the-utxo-hd-prototype">Finish the UTxO HD prototype<a class="hash-link" href="#finish-the-utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We merged PR <a href="https://github.com/input-output-hk/ouroboros-network/pull/4060" target="_blank" rel="noopener noreferrer">#4060</a>, which adds a report documenting the UTxO HD
feature, and puts emphasis in explaining how the mempool works in combination
with UTxO HD.</p><p>We opened a draft PR with the second iteration of the property tests for the
mempool (<a href="https://github.com/input-output-hk/ouroboros-network/pull/4076" target="_blank" rel="noopener noreferrer">#4076</a>).</p><p>We fixed the <code>Arbitrary</code> instances for keys and values in <code>DiffSeq</code> benchmarks
(<a href="https://github.com/input-output-hk/ouroboros-network/pull/4143" target="_blank" rel="noopener noreferrer">#4143</a>). The problem was that we were testing with mostly small
values, which artificially boosted the performance gains we saw on benhcmarks.
Speedups are now in the range of <!-- -->[3.33, 4.75]<!-- --> across the different
configurations.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="backing-store-property-tests">Backing store property tests<a class="hash-link" href="#backing-store-property-tests" title="Direct link to heading">​</a></h4><p>We focused on incorporating feedback on the monadic cursor API PR (<a href="https://github.com/input-output-hk/lmdb-simple/pull/1" target="_blank" rel="noopener noreferrer">#1</a>).
This required us to make small tweaks to <code>quickcheck-lockstep</code> to test the new
API. We also updated the backing store property tests to use the new version of
the monadic cursor API.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsm-tree-implementation">LSM tree implementation<a class="hash-link" href="#lsm-tree-implementation" title="Direct link to heading">​</a></h3><p>We worked on the LSM tree prototype. In particular: finished implementing a
"parameter tuning algorithm" that adapts the LSM tree design based on factors
like:</p><ul><li>workload</li><li>machine specs, </li><li>and characteristics of the data being stored. </li></ul><p>We are now running experiments to gather results and cross-reference them with
existing experimental results from the LSM tree paper to see if the algorithm is
working correctly.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking-the-csj-prototype">Benchmarking the CSJ prototype<a class="hash-link" href="#benchmarking-the-csj-prototype" title="Direct link to heading">​</a></h3><p>We focused on investigating the "plateaus" in the <code>ChainSync</code> tip, which turned
out to be due to the <code>TICKF</code> bug which we previously were only aware of in the
context of the long forging times near epoch boundaries. For the most drastic
patch by @nfrisby to speed up <code>TICKF</code>, full sync is speeding up by 7%.</p><p>The following plot shows that by caching the <code>TICKF</code> the <code>ChainSync</code> tip and the
<code>VolatileDB</code> tip progress at the same rate.</p><p><img loading="lazy" src="/cardano-updates/assets/images/2022-11-16-removed-stuttering-e49aa27a0e549f0195373203da971ba7.png" width="765" height="445" class="img_ev3q"></p><p>The plot below shows the speedup observed by caching the <code>TICKF</code> rule wrt the
baseline.</p><p><img loading="lazy" src="/cardano-updates/assets/images/2022-11-16-comparing-TICKF-batch-c6570a71c4a5d53b10cb7309d2cc742c.png" width="773" height="445" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><p>After addressing the PR comments, we merged PR <a href="https://github.com/input-output-hk/io-sim/pull/16" target="_blank" rel="noopener noreferrer">#16</a>, which implements
the <code>MonadCatch</code> instance for <code>STM</code>. This extends the capability of our <code>io-sim</code>
library, which is crucial for testing and simulating Cardano components PR #16
closed <a href="https://github.com/input-output-hk/ouroboros-network/issues/1461" target="_blank" rel="noopener noreferrer">#1461</a>. This new feature was published as version <code>0.4.0.0</code>
of <code>io-sim</code>.</p><p>We continued with our work fixing the <code>NoThunk</code> errors required for enabling
nightly tests, with the help of <code>TVarInvariant</code> checks in <code>strict-stm</code> and
<code>nothunks</code> libraries. We proposed fixes in <code>cardano-ledger</code> that took care of
thunks that appeared in era translations (<a href="https://github.com/input-output-hk/cardano-ledger/pull/3143" target="_blank" rel="noopener noreferrer">#3143</a>). The fixes will be
integrated back into consensus when <code>cardano-ledger</code> approves and publish the
changes introduced in <code>#3143</code>.</p><p>We added CI support for <code>lmdb-simple</code> (<a href="https://github.com/input-output-hk/lmdb-simple/pull/2" target="_blank" rel="noopener noreferrer">#2</a>). We currently test the build on
a Linux environment only.</p><p>We got pending diffusion pipelining PRs (<a href="https://github.com/input-output-hk/ouroboros-network/pull/3857" target="_blank" rel="noopener noreferrer">#3857</a>, <a href="https://github.com/input-output-hk/ouroboros-network/pull/3860" target="_blank" rel="noopener noreferrer">#3860</a>,
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3856" target="_blank" rel="noopener noreferrer">#3856</a>) merged, after rebasing and addressing feedback.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fostering-collaboration">Fostering collaboration<a class="hash-link" href="#fostering-collaboration" title="Direct link to heading">​</a></h3><p>@nfrisby finished a visualisation tool and outlined scripts for the Praos and
Genesis explanation presentations. The idea is to produce a video that gives an
overview of these protocols.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="support">Support<a class="hash-link" href="#support" title="Direct link to heading">​</a></h3><p>We started working on caching the computation of the <code>TICKF</code> rule
(<a href="https://github.com/input-output-hk/ouroboros-network/issues/4054" target="_blank" rel="noopener noreferrer">#4054</a>), since this was blocking our benchmarking work for
Genesis. In addition, this issue has the Cardano community <a href="https://github.com/input-output-hk/cardano-node/issues/4421" target="_blank" rel="noopener noreferrer">quite
concerned</a>, so we are hoping the work done in caching the
computation of the <code>TICKF</code> rule can help alleviating the growing block
production delay on epoch switch.</p><p>We reviewed the block forge credential hotswapping PR <a href="https://github.com/input-output-hk/ouroboros-network/pull/3800" target="_blank" rel="noopener noreferrer">#3800</a> from the
networking team, which is intended for use in the adoption of P2P.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2022-11-16-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-16-node-cli-api"/>
        <updated>2022-11-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2022-11-16 - 2022-11-29</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">docs<a class="hash-link" href="#docs" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4562" target="_blank" rel="noopener noreferrer">Add a native tokens tutorial and exercises</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4674" target="_blank" rel="noopener noreferrer">Update cardano-cli's help</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4644" target="_blank" rel="noopener noreferrer">Remove error calls in renderShelleyTxCmdError</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4639" target="_blank" rel="noopener noreferrer">Implement Cardano.Api.DeserialiseAnyOf</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4650" target="_blank" rel="noopener noreferrer">Fix windows CI</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4279" target="_blank" rel="noopener noreferrer">Multiple pools support in query stake snapshot</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4250" target="_blank" rel="noopener noreferrer">Optimise query leadership schedule command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4179" target="_blank" rel="noopener noreferrer">Optimise query stake snapshot command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4625" target="_blank" rel="noopener noreferrer">Handle pipes in cardano-cli</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & tracing update]]></title>
        <id>2022-11-16-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-16-performance-and-tracing"/>
        <updated>2022-11-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ol><li>P2P performance investigation is ongoing, in support of the networking team.</li><li>SECP benchmarking enablement is underway: we already have the script and are working on Plutus V2 generation support.</li><li>Unexpected setback in the new tracing system:  full scale benchmarks have shown a performance regression: local chain syncing benchmarks were an improvement over legacy tracing.</li><li>On the open sourcing front we added an integrated data dictionary, which is necessary for explaining ourselves to the world.  SRE collaboration on production deployment of performance data publishing has started.</li><li>We have started bringing the Nomad-based workbench backend closer to a cloud deployment scenario.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h2><p>We are supporting the networking team on P2P performance investigation.  Generation support for Plutus V2 was started.  We have collaborated with the Plutus team to get a SECP benchmark script, which is now ready for use, pending Plutus V2 support.  The transaction generator has also been updated to the cardano-api changes.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracing">Tracing<a class="hash-link" href="#tracing" title="Direct link to heading">​</a></h2><p>We ran an initial round of full-scale benchmarks for the new tracing system -- which uncovered a regression relative to legacy tracing, which is contrary to the local chain syncing benchmarks, that showed improvement instead.  We added tracing to cardano-tracer, fixing some minor bugs on the way.  Network and disk IO metrics are now collected once again and are integrated into analysis.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a class="hash-link" href="#infrastructure" title="Direct link to heading">​</a></h2><p>The first iteration of the Nomad-based local workbench backend was completed -- it has reached feature parity with the existing supervisor backend.  The next iteration started, bringing it closer to the cloud scenario, by deploying to separate Nomad tasks connected by a virtual network.  This will serve as basis for CI and full cloud backends.</p><p>We designed and implemented the authoring pipeline for the performance data dictionary, which will be henceforth embedded in our performance reports.  We are collaborating with SRE on production deployment of data publishing.</p><p>A number of smaller workbench, data analysis &amp; reporting improvements have been made.</p>]]></content>
        <author>
            <name>Serge Kosyrev</name>
            <uri>https://github.com/deepfire</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2022-11-11-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-11-crypto"/>
        <updated>2022-11-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The SECP primitives AC has been met, and the test-vectors <a href="https://github.com/input-output-hk/cardano-base/pull/320" target="_blank" rel="noopener noreferrer">PR</a> has been merged. Another of the main short-term goals is to implement KES secure forgetting. In the past week the mempool <a href="https://github.com/input-output-hk/cardano-base/pull/336" target="_blank" rel="noopener noreferrer">PR</a> has been merged, and we've adapted the KES secure <a href="https://github.com/input-output-hk/cardano-base/pull/255" target="_blank" rel="noopener noreferrer">PR</a> to the new mempool design. On top of this, we are working in updating the VRF batch compat version to use the audited version of the libsodium fork (<a href="https://github.com/input-output-hk/cardano-base/pull/341" target="_blank" rel="noopener noreferrer">PR#</a>). Finally, we've 'cleaned' our libsodium fork, and we directly fork upstream, rather than forking Algorand's fork. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><ul><li>With the AC met, there was no more blockers from crypto to release the node tag with the SECP primitives. We are now working closely with dQuadrant to to implement some E2E tests with an actual bridge implementation.  </li><li>We previously had a C implementation of a memory pool for usage in KES secure forgetting. After a discussion with Alexey, we decided to use his implementation of a mempool in Haskell. We are working in adapting KES Secure forgetting to use this Haskell mempool. </li><li>In parallel, we keep progressing on the <a href="https://github.com/input-output-hk/kes-agent" target="_blank" rel="noopener noreferrer">KES agent</a></li><li>VRFBatchCompat was deactivated due to a lack of an external audit. This audit was finished a few weeks back, and we are updating cardano base to use this new librar. In particular, this library implements the latest changing version of the VRF draft (13, which seems to remain stable), and links to the libsodium fork which implements batch verification. </li><li>Our libsodium fork now links directly to upstream libsodium.</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-11-11-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-11-hydra"/>
        <updated>2022-11-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the Hydra team published together with Obsidian Systems a light paper
on our "Hydra for Payments" project (<a href="https://iohk.io/en/blog/posts/2022/11/10/hydra-for-payments-introducing-developer-tooling-to-unlock-micropayments-on-cardano/" target="_blank" rel="noopener noreferrer">Link</a>). They have created a draft scope RFP for the external audit and worked with the internal audit team to clear up the specification. From the development side, they have fixed a bug with chain-following when using persistence and improved logs for better observability of <code>hydra-node</code> processes. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Published Hydra for Payments light paper (<a href="https://iohk.io/en/blog/posts/2022/11/10/hydra-for-payments-introducing-developer-tooling-to-unlock-micropayments-on-cardano/" target="_blank" rel="noopener noreferrer">Link</a>)</li><li>Have a draft RFP ready for a first review internally</li><li>Answered the internal auditor<!-- -->’<!-- -->s questions</li><li>Fixed a bug with following the chain when starting with persistence (<a href="https://github.com/input-output-hk/hydra-poc/issues/599" target="_blank" rel="noopener noreferrer">#599</a>)</li><li>Minor improvements to logging for better observability (<a href="https://github.com/input-output-hk/hydra-poc/issues/598" target="_blank" rel="noopener noreferrer">#598</a>, <a href="https://github.com/input-output-hk/hydra-poc/issues/600" target="_blank" rel="noopener noreferrer">#600</a>)</li><li>Non-achievement: Needed to work around flaky TUI ci, follow-up issue if anyone wants to have a look (<a href="https://github.com/input-output-hk/hydra-poc/issues/590" target="_blank" rel="noopener noreferrer">#590</a>)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Implement event-sourced persistence <a href="https://github.com/input-output-hk/hydra-poc/issues/580" target="_blank" rel="noopener noreferrer">#580</a></li><li>Close more gaps <a href="https://github.com/input-output-hk/hydra-poc/pull/452" target="_blank" rel="noopener noreferrer">#452</a></li><li>Attend the Cardano Summit in Lausanne. Hydra will be topic of one talk! Save the date+time: <strong>"Developing Hydra" on Day 2, Nov 21st, 13:50 CET</strong></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-11-11-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-11-ledger"/>
        <updated>2022-11-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>I am extremely excited to say that we now have a pull request up which introduces our new versioned
CBOR serialization. This was an enormous effort, but it will solve a host of problems that we have
had since the Shelley phase. It will take time to properly review it, and we will
need to put in a lot of effort to integrate it with the downstream components, but this is  a huge
milestone. Additionally, we have a new CIP proposing a deprecation cycle for the transaction
serialization schemes.</p><p>We also have a draft pull request that reworks how deposits are tracked. Users of the system will
not notice any difference, but it is a necessary change needed to prepare the way for
decentralizing the governance of Cardano.</p><p>Finally, we continued to address technical debt. In particular, we continued to make progress on
bringing coherency and consistency to the code base with a common naming convention, and
improving some error messages.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><ul><li>We have a pull request up for our new versioned CBOR serialization.
When we encounter a problem with our deserializers, it can be very difficult to implement a fix.
It is difficult because we can only fix such issues during a hard fork, and leading up to the
hard fork we must maintain two serializations for the same type in order to not cause unintended
network splitting (the problematic version must be used before the hard fork,
and the fixed version is used afterwards).
This can be especially tricky with the <code>FromCBOR</code> typeclass, since it is not always easy to
search for where all the problematic uses are located.
The new versioned CBOR serialization allows us to gracefully handle this transition.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3138" target="_blank" rel="noopener noreferrer">pull-3138</a>].</li><li>We proposed a CIP for backwards compatibility of the transaction serialization schemes.
See [<a href="https://github.com/cardano-foundation/CIPs/pull/372" target="_blank" rel="noopener noreferrer">pull-372</a>].</li><li>We have draft for the new deposit tracking.
This draft is not as memory efficient as the final version will be,
but it is a sufficient proof of concept that we can write property tests against, ensuring
that we have not changed the semantics.
We will optimize after we are sure of the correctness.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3127" target="_blank" rel="noopener noreferrer">pull-3127</a>].</li><li>We now provide better support for debugging failed Plutus scripts in an important helper
function, named <code>evaluateTransactionExecutionUnits</code>.
In particular, it now returns all the information needed to rerun the script with exactly the
same arguments. This feature will end up appearing in the CLI and other tools from the Plutus
tools team.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3135" target="_blank" rel="noopener noreferrer">pull-3135</a>].</li><li>We did a lot more renaming to bring coherency and consistency to the code base.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3126" target="_blank" rel="noopener noreferrer">pull-3126</a>], [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3120" target="_blank" rel="noopener noreferrer">pull-3120</a>], [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3118" target="_blank" rel="noopener noreferrer">pull-3118</a>], and [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3116" target="_blank" rel="noopener noreferrer">pull-3116</a>].</li><li>We have added a few things to the ledger repository to make it conform to the
<a href="https://input-output-hk.github.io/cardano-engineering-handbook/" target="_blank" rel="noopener noreferrer">Cardano Engineering Handbook</a>
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3139" target="_blank" rel="noopener noreferrer">pull-3139</a>].</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2022-11-11-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-11-network"/>
        <updated>2022-11-11T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>In last sprint we got a performance report of P2P performance testing cluster
(which consists of 50 nodes).  There is a performance regression in the header
notification metric.  The P2P cluster is constructed with the same
topology as the non-p2p reference one this indicates some regression which
needs to be further investigated.  This poses a risk for releasing P2P.</p><p>We also continued to work on peer sharing: <a href="https://github.com/input-output-hk/ouroboros-network/pull/4019" target="_blank" rel="noopener noreferrer">pull #4019</a>.</p><p>We continued working on dynamic block production which is required for P2P
release for BP nodes: <a href="https://github.com/input-output-hk/ouroboros-network/issues/3159" target="_blank" rel="noopener noreferrer">pull #3159</a>.</p><p>We simplified the P2P topology format: <a href="https://github.com/input-output-hk/cardano-node/issues/4559" target="_blank" rel="noopener noreferrer">issue #4559</a>, <a href="https://github.com/input-output-hk/ouroboros-network/issues/3888" target="_blank" rel="noopener noreferrer">pull #3888</a>.</p><p>We added a new trace point for asynchronous demotions of local peers with
<code>Warning</code> severity.  This trace is <strong>important</strong> for SPOs.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detail-description">Detail description<a class="hash-link" href="#detail-description" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-regression">Performance regression<a class="hash-link" href="#performance-regression" title="Direct link to heading">​</a></h3><p>Below we include a graph which shows the performance regression of the P2P code base vs non P2P.</p><img loading="lazy" src="/cardano-updates/assets/images/2022-11-11-noticed-headers-55bb0b4d41e8f0cff0066e1bec91bdd2.png" class="img_ev3q"><p>On the <code>x</code> axis is time in seconds which measures the delay from the start of
the slot to when a header was received. The <code>y</code> axis is the percentile of nodes
that received a header.  We are currently investigating possible causes of the
regression. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-p2p-topology-form">New P2P topology form<a class="hash-link" href="#new-p2p-topology-form" title="Direct link to heading">​</a></h3><p>The new topology file format is described in this <a href="https://github.com/input-output-hk/cardano-node/issues/4559" target="_blank" rel="noopener noreferrer">issue #4559</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tracing-improvements">Tracing improvements<a class="hash-link" href="#tracing-improvements" title="Direct link to heading">​</a></h3><ul><li>We improved a handshake error reporting, <a href="https://github.com/input-output-hk/ouroboros-network/pull/4136" target="_blank" rel="noopener noreferrer">pull #4136</a></li><li>We added <code>TraceDemoteLocalAsynchronous</code> rendered as <code>DemoteLocalAsynchronous</code>
in <code>json</code> format, <a href="https://github.com/input-output-hk/ouroboros-network/pull/4127" target="_blank" rel="noopener noreferrer">pull #4127</a>.  Such demotions should be investigated by the
pool operator.  They can indicate a problem in the deployed system, but also
they could indicate a remote problem in arranged connections with other SPOs.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-source-improvements">Open Source Improvements<a class="hash-link" href="#open-source-improvements" title="Direct link to heading">​</a></h3><p>We improved documentation of <code>io-sim</code> and <code>typed-protocols</code> for open-source
contributors and/or maintenance tasks: <a href="https://github.com/input-output-hk/typed-protocols/pull/22" target="_blank" rel="noopener noreferrer">pull #22</a>, <a href="https://github.com/input-output-hk/io-sim/pull/45" target="_blank" rel="noopener noreferrer">pull #45</a>, <a href="https://github.com/input-output-hk/io-sim/pull/48" target="_blank" rel="noopener noreferrer">pull #48</a>. </p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-11-04-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-04-hydra"/>
        <updated>2022-11-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the hydra team first re-deployed the latest Hydra scripts to the re-spun <code>preview</code> network, see <a href="https://github.com/input-output-hk/hydra-poc/releases/tag/0.8.0" target="_blank" rel="noopener noreferrer">0.8.0 release notes</a>. They also completed implementation of <a href="https://hydra.family/head-protocol/adr/18/" target="_blank" rel="noopener noreferrer">ADR18</a> and worked on the validators, but development got impacted by some CI flakyness. The team also met to discuss hard forks &amp; protocol parameter updates <a href="https://github.com/input-output-hk/hydra-poc/issues/195#issuecomment-1300503557" target="_blank" rel="noopener noreferrer">#195</a> and alignment of the specification document with auditors.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Complete and merge ADR18 <a href="https://github.com/input-output-hk/hydra-poc/pull/579" target="_blank" rel="noopener noreferrer">#579</a></li><li>Re-deploy hydra scripts to respun <code>preview</code> network, see <a href="https://github.com/input-output-hk/hydra-poc/releases/tag/0.8.0" target="_blank" rel="noopener noreferrer">0.8.0 release notes</a> <a href="https://github.com/input-output-hk/hydra-poc/pull/595" target="_blank" rel="noopener noreferrer">#595</a></li><li>Have first gap of <a href="https://github.com/input-output-hk/hydra-poc/pull/452" target="_blank" rel="noopener noreferrer">#452</a> in review.</li><li>Non-achievement: Flaky CI for TUI was impacting us, so we investigated this a lot.</li><li>Engineering meeting to discuss hard forks and protocol parameter updates <a href="https://github.com/input-output-hk/hydra-poc/issues/195#issuecomment-1300503557" target="_blank" rel="noopener noreferrer">#195</a></li><li>Met the internal audit team on the specification to set scope, expectations and collected requirements/open questions.</li><li>Drafted project scope for an external audit RFP.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Implement event-sourced persistence <a href="https://github.com/input-output-hk/hydra-poc/issues/580" target="_blank" rel="noopener noreferrer">#580</a></li><li>Answer the internal auditor<!-- -->’<!-- -->s questions</li><li>Have a draft RFP ready for a first review internally</li><li>Close some gaps <a href="https://github.com/input-output-hk/hydra-poc/pull/452" target="_blank" rel="noopener noreferrer">#452</a></li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Mithril Team Update]]></title>
        <id>2022-11-04-mithril</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-04-mithril"/>
        <updated>2022-11-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[This sprint, the team has been working on the new continuous integration and delivery (CI/CD) pipelines and the automated deployment of environments as part of the new version of the release process. They also coordinated the migration of the pioneer SPO nodes to these new Mithril networks. They have been implementing the automatic data storage upgrade of the signer and the aggregator nodes. Finally, on the crypto side of things, we've implemented an efficiency improvement on the size of the mithril certificates.]]></summary>
        <content type="html"><![CDATA[<p>This sprint, the team has been working on the new continuous integration and delivery (CI/CD) pipelines and the automated deployment of environments as part of the new version of the release process. They also coordinated the migration of the pioneer SPO nodes to these new Mithril networks. They have been implementing the automatic data storage upgrade of the signer and the aggregator nodes. Finally, on the crypto side of things, we've implemented an efficiency improvement on the size of the mithril certificates.</p><h1>Low level overview</h1><ul><li>We have been moving forward on the implementation of the release process <a href="https://github.com/input-output-hk/mithril/issues/500" target="_blank" rel="noopener noreferrer">#500</a>:<ul><li>Setup of the new hosted environments for <code>testing-preview</code>, <code>pre-release-preview</code> and <code>release-preprod</code> with their terraform and GitHub environments <a href="https://github.com/input-output-hk/mithril/issues/542" target="_blank" rel="noopener noreferrer">#542</a></li><li>Adapted the CI workflows to work with the new release process <a href="https://github.com/input-output-hk/mithril/issues/543" target="_blank" rel="noopener noreferrer">#543</a></li><li>Publication of an <a href="https://mithril.network/doc/adr/3" target="_blank" rel="noopener noreferrer">ADR3</a></li><li>Publication of a <a href="https://mithril.network/doc/dev-blog/2022/10/28/updated-environments" target="_blank" rel="noopener noreferrer">dev blog post</a> about Mithril networks evolution </li><li>Releasing our first Mithril distribution <a href="https://github.com/input-output-hk/mithril/releases/tag/2244.0" target="_blank" rel="noopener noreferrer">2244.0</a></li></ul></li><li>Worked on the API versioning mechanism <a href="https://github.com/input-output-hk/mithril/issues/565" target="_blank" rel="noopener noreferrer">#565</a></li><li>Worked on the implementation of the stores migration process for the signer and aggregator nodes <a href="https://github.com/input-output-hk/mithril/issues/562" target="_blank" rel="noopener noreferrer">#562</a></li><li>Prepared a Mithril <code>devnet</code> video demo <a href="https://github.com/input-output-hk/mithril/issues/526" target="_blank" rel="noopener noreferrer">#526</a></li><li>Implemented a batch Merkle Tree proof, which reduces the size of certificates considerably <a href="https://github.com/input-output-hk/mithril/pull/484" target="_blank" rel="noopener noreferrer">#484</a></li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="mithril" term="mithril"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Open-Source Team]]></title>
        <id>2022-10-31-open-source</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-31-open-source"/>
        <updated>2022-11-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High Level Summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High Level Summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>We've been working toward publishing <em>Cardano Backlog</em>, currently its in
review by the IOG communication team.</li><li>We identified a number of libraries which can be published.</li><li>We setup and enhanced <a href="https://input-output-hk.github.io/cardano-updates" target="_blank" rel="noopener noreferrer">cardano-updates</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-description">Detailed description<a class="hash-link" href="#detailed-description" title="Direct link to heading">​</a></h2><p>I am glad to announce that I was given the role of open-source advocate for
cardano project.  In last few weeks we were making steps towards publishing our
backlog.  It's currently under review by the communication team, although most
of the issues are already visible across various repositories.</p><p>The open-source initiatives have their own
<a href="https://github.com/orgs/input-output-hk/projects/60" target="_blank" rel="noopener noreferrer">project</a>.  It is set up
to help us track our major open-source activities.  Right now there are two
work streams:</p><ul><li>the work on <a href="https://input-output-hk.github.io/cardano-engineering-handbook/" target="_blank" rel="noopener noreferrer"><em>Cardano Engineering Handbook</em></a>;</li><li>libraries to be release on <a href="https://hackage.haskell.org/" target="_blank" rel="noopener noreferrer">Hackage</a> or <a href="https://crates.io" target="_blank" rel="noopener noreferrer">crates.io</a>.</li></ul><p>We identifies a number of libraries across all the teams which contribute to
<em>Cardano</em> which we would like publish to publish, see the following
<a href="https://github.com/orgs/input-output-hk/projects/60/views/3" target="_blank" rel="noopener noreferrer">link</a>.  Arnauld Bailly recently published
<a href="https://hackage.haskell.org/package/quickcheck-dynamic" target="_blank" rel="noopener noreferrer"><code>quickcheck-dynamic</code></a>
library on Hackage.  The networking team is slowly progressing towards
publishing <a href="https://github.com/input-output-hk/io-sim" target="_blank" rel="noopener noreferrer">io-sim</a> and related packages, checkout the progress
<a href="https://github.com/orgs/input-output-hk/projects/19/views/24" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Thanks to Arnaud Bailly our <a href="https://input-output-hk.github.io/cardano-updates" target="_blank" rel="noopener noreferrer">Cardano Updates</a> website has
a new look &amp; feel!  It's using <a href="https://docusaurus.io" target="_blank" rel="noopener noreferrer">docusaurus.io</a>.</p><p>Christian Taylor carried recently a detailed analysis of our open-source
repositories.  He collected many interesting metrics, which allows us to see
where we need to improve as an open-source project to make the Cardano project
and many smaller related libraries which we maintain be more open and available
for open-source contributors.</p><p>The graph below shows which documents the 55 most important Cardano
repositories are missing the most:
<img loading="lazy" alt="Documentation Adoption" src="/cardano-updates/assets/images/doc-adoption-cd944582f02809777c58be53e13453c5.png" width="1493" height="716" class="img_ev3q">
You can expect we will improve in these metrics in the coming weeks.</p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="open-source" term="open-source"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Embedding Quality Workstream]]></title>
        <id>2022-11-03-embedding-quality</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-03-embedding-quality"/>
        <updated>2022-11-03T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We made good progress on most of the Action Items we agreed on Lisbon, like:</p><ul><li>Cardano System Tests was fully open to public (tools, tests, results)
See <a href="https://input-output-hk.github.io/cardano-node-tests" target="_blank" rel="noopener noreferrer">cardano-node-tests webpage</a>.</li><li>We defined an <a href="https://github.com/input-output-hk/cardano-node/blob/master/.github/ISSUE_TEMPLATE/user-facing-feature.md" target="_blank" rel="noopener noreferrer">user-facing-functionality template</a> that is used with the cardano-cli team <ul><li>this includes acceptance criteria &amp; user stories, and definition of done</li></ul></li><li>We are in the process of running the cardano-node-tests at commit &amp; PR level in cardano-node (we are affected by the Cicero migration right now but we did most of the work already)</li><li>We started to apply a <em>labelling convention</em> on <a href="https://github.com/input-output-hk/cardano-node/issues" target="_blank" rel="noopener noreferrer">cardano-node issues</a> that will be used to generate some visual dashboards with some metrics <!-- -->[TBD]</li><li>Ziyand Liu started an <em>End-to-End Development and Testing Process for Plutus Features</em></li></ul>]]></content>
        <author>
            <name>Dorin Solomon</name>
            <uri>https://github.com/dorin100</uri>
        </author>
        <category label="embedding-quality" term="embedding-quality"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-10-02-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-02-consensus"/>
        <updated>2022-11-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks, the consensus team continued its work on testing the
UTxO HD prototype. We completed the era-transition and backing store tests, and
the mempool tests are advancing at a steady pace. Regarding our work in the
Genesis design, we continued our collaboration with the research and networking
teams, and we continue investigating strategies for making the chain-sync
jumping prototype faster.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-status-report">High-level status report<a class="hash-link" href="#high-level-status-report" title="Direct link to heading">​</a></h2><ul><li>Finish the UTxO HD prototype: on track.<ul><li>We worked on state-machine tests for the mempool, and spotted potential bugs
in the implementation. Investigation is ongoing.</li><li>We have a set of property tests for the backing store. We still need to
incorporate the improvements to the LMDB cursor API that these tests
made possible.</li><li>We merged the era-transition tests PR.</li></ul></li><li>Genesis: on track.<ul><li>Design work around Genesis continues in collaboration with researchers and
the networking team.</li><li>We continued trying to improve the performance of the chain-sync jumping
prototype. We gained additional insight on which parameters to tweak next.
In spite of the baseline still being faster, the current prototype already
achieves a significant speedup when compared to the naive approach of simply
running full chain-sync with all peers.</li></ul></li><li>Tech debt: on track.<ul><li>We clarified a common source of confusion around VRF tie-breaking and
cross-era chain selection.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="finish-the-utxo-hd-prototype">Finish the UTxO HD prototype<a class="hash-link" href="#finish-the-utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We continued working on property-tests for the UTxO HD prototype. In particular
we merged the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4073" target="_blank" rel="noopener noreferrer">era-transition tests
PR</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="backing-store-property-tests">Backing store property tests<a class="hash-link" href="#backing-store-property-tests" title="Direct link to heading">​</a></h4><p>The <a href="https://github.com/input-output-hk/ouroboros-network/pull/4081" target="_blank" rel="noopener noreferrer">backing store property tests
PR</a> has been
reviewed. The next steps are:</p><ul><li>Improve error handling and command generation.</li><li>Add coverage testing to check that we are not failing to cover interesting
test cases.</li></ul><p>The <a href="https://github.com/input-output-hk/lmdb-simple/pull/1" target="_blank" rel="noopener noreferrer">monadic cursor API</a>
went through its first review round. The API is in a relatively stable state.
This PR also unifies the <code>cborg</code> and <code>serialise</code>-based interfaces to LMDB
operations. The next steps are:</p><ul><li>Write
<a href="https://hackage.haskell.org/package/quickcheck-dynamic" target="_blank" rel="noopener noreferrer"><code>quickcheck-dynamic</code></a>
state-machine tests for this API.</li><li>Adapt the changes in the serialisation interface in the backing store property
tests. This will involve adding boilerplate code in consensus to make up for
the removal of the <code>cborg</code>-based interface.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lsm-tree-implementation">LSM tree implementation<a class="hash-link" href="#lsm-tree-implementation" title="Direct link to heading">​</a></h2><p>We worked on the <a href="https://github.com/input-output-hk/ouroboros-network/issues/4121" target="_blank" rel="noopener noreferrer">LSM tree
prototype</a>. In
particular, we focused on tuning the LSM tree design to the different workloads
that consensus has (eg syncing, normal node operation, etc).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking-the-csj-prototype">Benchmarking the CSJ prototype<a class="hash-link" href="#benchmarking-the-csj-prototype" title="Direct link to heading">​</a></h3><p>Work on improving the chain-sync jumping performance is ongoing. In particular
we compared the performance of different jump intervals, which, somewhat
surprisingly, do not make a significant difference. In particular, we are seeing
periodic "plateaus" where the chain-sync tip does not progress, but they are
much longer for the prototype. Our hypothesis is that this seem to be due to a
combination of the garbage collector (GC) pauses, and the actual time it takes
the non-dynamo chain-sync peers to jump to the tip of the slot of the dynamo
fragment.</p><p>In the coming weeks we will try to shorten these plateaus via a combination of
tweaking GC options and less synchronisation in the CSJ governor.</p><p>The following plot shows the performance of the chain-sync jumping prototype
using different jumping intervals. It compares the syncing progress by plotting
the slots of adopted blocks against time. The baseline is still faster, however
it is worth noting that the current prototype already achieves a significant
speedup when compared to the naive approach of simply running full chain-sync
with all peers.</p><p><img loading="lazy" src="/cardano-updates/assets/images/2022-11-02-csj-vs-baseline-9fd0e0e080975cc6cfbe035731b4f38d.svg" width="998" height="445" class="img_ev3q"></p><p>The second plot shows the syncing progress sliced to a chosen ~5min interval,
and includes, in addition to the slots of adopted blocks, the slots of the tip
of the ChainSync fragment. This allows us to see how far ahead of the selected
tip the CS dynamo is, i.e. how much room we have for BlockFetch not to get
stalled. It shows periodic behaviour (due to the forecasting limit), and shows
that the CS fragment tip is not progressing for significant periods
("plateaus").</p><p><img loading="lazy" src="/cardano-updates/assets/images/2022-11-02-csj-vs-baseline-sliced-77ff018af70191b4122b1e7cf56c79b8.svg" width="998" height="445" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h2><p>We <a href="https://github.com/input-output-hk/ouroboros-network/pull/4098" target="_blank" rel="noopener noreferrer">clarified</a> a
common source of confusion around VRF tie-breaking and cross-era chain
selection. This PR involved correcting potentially misleading names of
VRF-related functions, and providing context for a particular VRF value is
used for tie-breaking.</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-11-02-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-02-ledger"/>
        <updated>2022-11-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We have made the decision to use the
<a href="https://github.com/input-output-hk/formal-ledger-specifications" target="_blank" rel="noopener noreferrer">formal ledger repository</a>
in place of a LaTeX spec for the next ledger era, and have added a lot of basic infrastructure
to the model. In particular, we now have a lot of support for axiomatic set theory.
While the next ledger era is still in the design phase, most of the team remains working
on technical debt.
In particular, we have moved a lot more code out of the Shelley specific modules and into
a ledger core module, we have finished up our benchmarking around the problematic <code>TICKF</code>
ledger transition (while improving the performance), made conveniences to the development
environment, cleaned up all the recent changes to the cost model, added a lot of documentation,
fixed some flaky tests, and deleted some dead code.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="axiomatic-set-theory">Axiomatic Set Theory<a class="hash-link" href="#axiomatic-set-theory" title="Direct link to heading">​</a></h3><p>The formal ledger model now has support for much of the set theory that we make use of in
the formal ledger specifications. See [<a href="https://github.com/input-output-hk/formal-ledger-specifications/pull/20" target="_blank" rel="noopener noreferrer">pull-20</a>].</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="completed-technical-debt">Completed Technical Debt<a class="hash-link" href="#completed-technical-debt" title="Direct link to heading">​</a></h3><ul><li>We have addressed issues with two of our most problematic and flaky tests.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3039" target="_blank" rel="noopener noreferrer">pull-3039</a>] and [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3093" target="_blank" rel="noopener noreferrer">pull-3093</a>].</li><li>We have added more documentation and tests to the Twiddler module. This is a module which
makes our CBOR serialization round-trip tests much more robust, and will also hopefully
help enforce the mandate for downstream libraries to never re-serialize data that needs
to be hashed. See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3073" target="_blank" rel="noopener noreferrer">pull-3073</a>] and [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3095" target="_blank" rel="noopener noreferrer">pull-3095</a>]
(we cannot merge 3095 just yet, due to a preference for merging other features).</li><li>We have finished our long analysis of the problematic <code>TICKF</code> transition.
We now have a lot of benchmarks surrounding this code, and have added performance improvements.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3068" target="_blank" rel="noopener noreferrer">pull-3068</a>] and [<a href="https://github.com/input-output-hk/cardano-ledger/issues/3035" target="_blank" rel="noopener noreferrer">issue-3035</a>].</li><li>We have restored support for
<a href="https://hackage.haskell.org/package/ghcid" target="_blank" rel="noopener noreferrer">ghcid</a>
in our repository. This is a tool for developing with Haskell that many of us find greatly
improves our productivity by providing us with constant feedback from the type checker.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3112" target="_blank" rel="noopener noreferrer">pull-3112</a>].</li><li>After much activity on the cost model, we have done some final clean up of the code.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3075" target="_blank" rel="noopener noreferrer">pull-3075</a>] and [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3101" target="_blank" rel="noopener noreferrer">pull-3101</a>].</li><li>We moved a lot of the existing user facing documentation regarding native tokens into the
ledger repository, and cleaned it up
(most of the heavy lifting was done by our amazing technical writers).
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3091" target="_blank" rel="noopener noreferrer">pull-3091</a>].</li><li>We removed dead code. See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3089" target="_blank" rel="noopener noreferrer">pull-3089</a>].</li><li>We moved a lot of code from the Shelley specific libraries to the ledger core library.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3109" target="_blank" rel="noopener noreferrer">pull-3109</a>] and [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3110" target="_blank" rel="noopener noreferrer">pull-3110</a>].</li><li>We've removed more of the awkward legacy template Haskell names.
See [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3108" target="_blank" rel="noopener noreferrer">pull-3108</a>].</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2022-11-02-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-02-node-cli-api"/>
        <updated>2022-11-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2022-11-02 - 2022-11-15</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><ul><li>Documentation improvments</li><li>Merged community contributions</li><li>Exposing types from cardano-api requested by the community/other teamss</li><li>Test output has been improved so diagnosing failures is now easier</li><li>Enabling stale bot to close stale issues and PRs (reduces clutter on the node repo)</li><li>Refactoring of cardano-testnet making it more useable as a library (ongoing)</li><li>Release 1.35.4 was merged &amp; released</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4567" target="_blank" rel="noopener noreferrer">Community contributions - doc fixes and spelling errors</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4546" target="_blank" rel="noopener noreferrer">Reduce exposed modules in cardano-api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4587" target="_blank" rel="noopener noreferrer">Add Ord instance for AddressInEra</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4496" target="_blank" rel="noopener noreferrer">Export TxTotalAndReturnCollateralSupportedInEra from Cardano.Api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4635" target="_blank" rel="noopener noreferrer">Expose TextEnvelopeCddl from Cardano.Api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4628" target="_blank" rel="noopener noreferrer">Expose txScriptValidityToScriptValidity in Cardano.Api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4599" target="_blank" rel="noopener noreferrer">export RawBytesHexError</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/2883" target="_blank" rel="noopener noreferrer">Add Plutus minting script doc</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4575/files" target="_blank" rel="noopener noreferrer">Improve test output</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4586" target="_blank" rel="noopener noreferrer">Enable stale bot</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4557" target="_blank" rel="noopener noreferrer">Add link to troubleshooting page in the wiki</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4550" target="_blank" rel="noopener noreferrer">Use environment files in Github Actions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4544" target="_blank" rel="noopener noreferrer">Add single entrypoint for starting testnets</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4575" target="_blank" rel="noopener noreferrer">Improve cardano-testnet test output</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4595" target="_blank" rel="noopener noreferrer">Reorder module hierarchy</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4279" target="_blank" rel="noopener noreferrer">Multiple pools support in query stake snapshot</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4250" target="_blank" rel="noopener noreferrer">Optimise query leadership schedule command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4179" target="_blank" rel="noopener noreferrer">Optimise query stake snapshot command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node Release Team Update]]></title>
        <id>2022-11-02-release</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-02-release"/>
        <updated>2022-11-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Node Reelease Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-reelease-update">Node Reelease Update<a class="hash-link" href="#node-reelease-update" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2022-10-19---2022-11-02">2022-10-19 - 2022-11-02<a class="hash-link" href="#2022-10-19---2022-11-02" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive Summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">​</a></h3><p>The team is formalizing the new release process and team structure. Both preview/preprod environments have been reset,
a temporary pv8 environment has been created for testing SECP before preview is updated to protocol version 8.</p><p>1.35.4 release candidates have been created and are being tested internally and externally.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/commits/1.35.4-rc1" target="_blank" rel="noopener noreferrer">1.35.4-rc1 tag</a></li><li><a href="https://github.com/input-output-hk/cardano-node/commits/1.35.4-rc1" target="_blank" rel="noopener noreferrer">1.35.4-rc2 tag (config changes only for preview)</a></li><li>[CHaP Migration]<!-- --> (<a href="https://github.com/input-output-hk/cardano-node/pull/4540" target="_blank" rel="noopener noreferrer">https://github.com/input-output-hk/cardano-node/pull/4540</a>)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h3><ul><li><p><a href="https://github.com/input-output-hk/cardano-node/commits/release/1.35" target="_blank" rel="noopener noreferrer">Release 1.35.4</a></p><ul><li><a href="https://github.com/input-output-hk/cardano-node-tests/blob/tag_test_1.35.4_rc1/src_docs/source/test_results/node/tag_1_35_4_rc1.rst" target="_blank" rel="noopener noreferrer">Test Status</a></li></ul></li><li><p><a href="https://input-output-hk.github.io/cardano-updates/2022-08-12-sre" target="_blank" rel="noopener noreferrer">Cicero CI Migration</a></p></li></ul>]]></content>
        <author>
            <name>Samuel Leathers</name>
            <uri>https://github.com/disassembler</uri>
        </author>
        <category label="release" term="release"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[System Test Team Update]]></title>
        <id>2022-11-02-system-test</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-02-system-test"/>
        <updated>2022-11-02T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>We have been focused on:</p><ul><li>Fully opening our test results (on top of the existing tests &amp; tools):<br>See <a href="https://input-output-hk.github.io/cardano-node-tests/" target="_blank" rel="noopener noreferrer">cardano-node-tests webpage</a>.</li><li>Started to test and automate the new functionalities added in the <code>1.35.4-rc1</code> node tag<br>See <a href="https://github.com/input-output-hk/cardano-node-tests/blob/tag_test_1.35.4_rc1/src_docs/source/test_results/node/tag_1_35_4_rc1.rst" target="_blank" rel="noopener noreferrer">test results tracking page</a>.</li><li>Made some improvements to the automated db-sync sync tests<br>See <a href="https://github.com/input-output-hk/cardano-node-tests/tree/db_sync_tests/db_sync_tests" target="_blank" rel="noopener noreferrer">db-sync tests</a>.</li><li>Multiple cleanups and updates to the cardano-node-tests framework</li><li>Updated the nightly pipelines for the cardano-node-tests after the Babbage HF</li></ul>]]></content>
        <author>
            <name>Dorin Solomon</name>
            <uri>https://github.com/dorin100</uri>
        </author>
        <category label="system-test" term="system-test"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB Sync Team Update]]></title>
        <id>2022-11-01-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-11-01-db-sync"/>
        <updated>2022-11-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The DBSync team is preparing a release which introduces schema simplifications, removes indexes,
unique and foreign keys. It also provides a way to fix older values and migrates without the need to
resync from genesis.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema-simplifications">Schema simplifications<a class="hash-link" href="#schema-simplifications" title="Direct link to heading">​</a></h3><p>Indexes, Unique and Foreign keys are removed in order to speedup syncing
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1295" target="_blank" rel="noopener noreferrer">#1295</a>
The same pr also introduces a different way to rollback, which doesn't rely on foreign keys and
indexes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a class="hash-link" href="#performance" title="Direct link to heading">​</a></h3><p>The DBSync team ran a big number of benchmarks and investigated ways to speedup syncing. A
conservative number of these will be included in the next release and the rest can be found in
<a href="https://github.com/orgs/input-output-hk/projects/52/views/7" target="_blank" rel="noopener noreferrer">performance view</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="migrations-and-resyncing">Migrations and resyncing<a class="hash-link" href="#migrations-and-resyncing" title="Direct link to heading">​</a></h3><p>The next release will be 13.1.0, it will enable a migration without the need to resync. It will also
introduce a procedure that fixes bytes values of Datum and RedeemerData in existing databases
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1294" target="_blank" rel="noopener noreferrer">#1294</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release">Release<a class="hash-link" href="#release" title="Direct link to heading">​</a></h3><p>The release has been mostly cherry-picked from master
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1294" target="_blank" rel="noopener noreferrer">#1294</a> and its scope can be seen
<a href="https://github.com/orgs/input-output-hk/projects/52/views/6" target="_blank" rel="noopener noreferrer">release view</a></p>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-10-28-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-28-hydra"/>
        <updated>2022-10-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the hydra team completed several user experience improvements to the
<code>hydra-tui</code> and <code>hydra-node</code>, and delivered a first version of persisted head
states by publishing release version
<a href="https://github.com/input-output-hk/hydra-poc/releases/tag/0.8.0" target="_blank" rel="noopener noreferrer"><code>0.8.0</code></a>.
Besides this, they met with researchers on topic of the HeadV1 specification and
kicked-off work on the RFP for an external audit of the Hydra Head protocol and implementation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Completed the UX improvements on the <code>hydra-tui</code></li><li>Released version <a href="https://github.com/input-output-hk/hydra-poc/releases/tag/0.8.0" target="_blank" rel="noopener noreferrer"><code>0.8.0</code></a>, which delivers a first version of persisted head states</li><li>Met with researchers on the HeadV1 specification</li><li>Started work on the RFP for our external audit</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Complete ADR18 implementation and get it merged</li><li>Start work on event-sourced persistence <a href="https://github.com/input-output-hk/hydra-poc/issues/580" target="_blank" rel="noopener noreferrer">#580</a></li><li>Have a first plutus script gap closed <a href="https://github.com/input-output-hk/hydra-poc/issues/452" target="_blank" rel="noopener noreferrer">#452</a></li><li>Revamp CI to use flakes and build macos artifacts (stretch goal: migrate to cicero for nix builds)</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2022-10-28-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-28-network"/>
        <updated>2022-10-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The team has focused on debuging &amp; fixing bugs for the <strong>P2P single relay release</strong>, which included</p><ul><li>diagnosing, fixing and writing tests for a bug in <code>peer-state-actions</code> which
fortunately hasn't been released;</li><li>diagnosing &amp; preventing misconfiguration of DNS</li></ul><p>We also focused on developing <strong>peer sharing</strong>.  We also held a session with
the scientists on eclipse evasion.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-description">Detailed description<a class="hash-link" href="#detailed-description" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="p2p-network-stack">P2P Network Stack<a class="hash-link" href="#p2p-network-stack" title="Direct link to heading">​</a></h3><p>During the past two weeks the team focused on p2p single relay release and peer
sharing.  We found and fixed an important bug recently introduced in one of the
components of p2p networking stack (fortunately never released).  Together with
a fix, we designed a unit test diffusion simulation as well as quickcheck
property test (both could reproduce it). We also changed the code in a way that
if such a bug is reintroduced in the future, it will be obvious to diagnose.
For more see:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4067" target="_blank" rel="noopener noreferrer">ouroboros-network#4067</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4086" target="_blank" rel="noopener noreferrer">ouroboros-network#4086</a></li></ul><p>Initial benchmarking run of the P2P code was executed.  The results where
unlike what we see on the mainnet.  We found a possible misconfiguration of the
cluster (caused by 0 TTL on domain names), which could be the direct cause of
it.  We wrote a PR which rules out such misconfiguration.  We are awaiting on
the next benchmarking results.  See more at:</p><p><a href="https://github.com/input-output-hk/ouroboros-network/pull/4106" target="_blank" rel="noopener noreferrer">ouroboros-network#4106</a></p><p>We also started working on P2P single relay release.  The PR
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4120" target="_blank" rel="noopener noreferrer">ouroboros-network#4120</a>
includes <em>108</em> patches cherry-picked from the <code>master</code> branch.  We started
working toward integration these changes against the release branch of
<code>cardano-node</code>.  Early next week we ought to be able to have an early version
of <code>cardano-node</code> with <em>non experimental P2P support</em>!</p><p>For more detailed release plan please see <a href="https://github.com/input-output-hk/ouroboros-network/issues/3888" target="_blank" rel="noopener noreferrer">P2P - Single
Relay</a>
issue.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="consensus">Consensus<a class="hash-link" href="#consensus" title="Direct link to heading">​</a></h3><p>We identified and fixed missing error reporting in consensus
initialisation phase.  See more at
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4015" target="_blank" rel="noopener noreferrer">ouroboros-network#4015</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">Cardano Node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><p>We also made changes in <code>cardano-node</code> in order to give better experience for
node operators.  This includes updating severities of some of the traces as
well as implementing new format of the p2p topology file.  For more see:</p><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4563" target="_blank" rel="noopener noreferrer">cardano-node#4563</a>.</li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4561" target="_blank" rel="noopener noreferrer">cardano-node#4561</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="peer-sharing">Peer Sharing<a class="hash-link" href="#peer-sharing" title="Direct link to heading">​</a></h3><p>We continued working on implementation of peer sharing.  We have an early
implementation which will be reviewed and analysed in next weeks.  We started
working on <code>cardano-node</code> integration.  We need
<a href="https://github.com/input-output-hk/cardano-node/pull/4392" target="_blank" rel="noopener noreferrer">PR #4392</a> to be merged
before such integration will be able to land in <code>cardano-node</code>, although this
is <em>not blocking</em> us currently.  See more at:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/pull/4019" target="_blank" rel="noopener noreferrer">ouroboros-network#4019</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="eclipse-evasion">Eclipse Evasion<a class="hash-link" href="#eclipse-evasion" title="Direct link to heading">​</a></h3><p>We held a session which included Alexander Russel, Sandro Coretti-Drayton and
Nick Frisby from the consensus team.  We discussed high lever design of the
eclipse evasion scheme, which is important for the design and implementation of
<code>ouroboros-genesis</code>.  We got a positive feedback from the researchers.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="io-sim">IO-Sim<a class="hash-link" href="#io-sim" title="Direct link to heading">​</a></h3><p>In this period we made little progress towards releasing <code>IO-Sim</code> on Hackage.
A single <a href="https://github.com/input-output-hk/io-sim/pull/32" target="_blank" rel="noopener noreferrer">PR</a> which added
a few missing instances of the <code>STM</code> monad.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-source">Open Source<a class="hash-link" href="#open-source" title="Direct link to heading">​</a></h3><p>We made sure the CI runs for PRs which comes from forks (which is important to
accept contributions from 3rd parties).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mithril-cardano-integration">Mithril Cardano Integration<a class="hash-link" href="#mithril-cardano-integration" title="Direct link to heading">​</a></h3><p>We held initial discussions with Arnaud Bailly about possible path to integrate
mithril to <code>cardano-node</code> and take advantage of the <code>ouroboros-network</code>
diffusion layer.</p>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Performance & Tracing Team Update]]></title>
        <id>2022-10-28-performance-and-tracing</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-28-performance-and-tracing"/>
        <updated>2022-10-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>On the performance side, the team ran benchmarks for the the P2P feature and the 1.35.4 release.  We finished a prototype for performance data publishing.  We almost finished the local deployment backend for the workbench using the new SRE deployment infra.  We worked on fixing and improving our data analysis pipeline.</p><p>On the tracing side, the team worked on isolating a critical issue causing message loss in the remote tracing backend.  The issue was resolved and we now have proper end-to-end coverage for the scenario.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">​</a></h2><ul><li>The new tracing system public release is getting closer, as we're resolving remaining rough edges that are discovered in full-scale deployments.  The local benchmarks we ran were already showing improvement relative to legacy tracing, so we expect similar results at full scale.</li><li>The first (local deployment) iteration of benchmarking adopting the new SRE deployment infra is nearly done.  We thank Michael Fellinger and Robin Stumm for their assistance.  Two further phases remain:  CI integration and cloud deployment.</li><li>The benchmarking data publishing prototype is ready.  This serves as a springboard for both opening our performance assessment workflow (to support the wider Cardano developer community), and for data provision to the business community.  Our next steps are to secure a permanent deployment for this mechanism and to integrate it into the benchmarking infrastructure.  This requires collaboration with SRE.</li></ul>]]></content>
        <author>
            <name>Serge Kosyrev</name>
            <uri>https://github.com/deepfire</uri>
        </author>
        <category label="performance-tracing" term="performance-tracing"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[SRE Team Update]]></title>
        <id>2022-08-12-sre</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-08-12-sre"/>
        <updated>2022-10-28T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The SRE team is heavily working on the Equinix Metal migration, replacing Hydra
with Cicero, and a new version of Spongix.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openziti">OpenZiti<a class="hash-link" href="#openziti" title="Direct link to heading">​</a></h3><ul><li>Work is ongoing on our OpenZiti integration into Bitte in [<a href="https://github.com/input-output-hk/bitte/compare/zt" target="_blank" rel="noopener noreferrer">bitte-zt</a>].</li><li>CI-World deployment of Darwin CI Ziti service in [<a href="https://github.com/input-output-hk/ci-world/commit/d40f4d19187a2128b6f0d63bde7e3f9a33071994" target="_blank" rel="noopener noreferrer">ci-world-commit-d40f4d</a>].</li><li>Multiple issues filed, and a lot of discussion with the OpenZiti developers,
we're making pretty rapid progress thanks to them.</li><li>Work on getting Equinix baremetal machines integrated into AWS World Bitte
clusters utilizing a Ziti ZTNA network overlay to bridge the networking of
the two environments and get IAM extension to Equinix machine for Nomad
client onboarding.</li><li>A Nix Flake for most of our OpenZiti dependencies including the Console,
Controller, Edge Tunnel, and Router is now at [<a href="https://github.com/johnalotoski/openziti-bins" target="_blank" rel="noopener noreferrer">openziti-bins</a>].</li><li>The Flake also includes a WiP NixOS modules for these components.</li><li>Tested Ziti Desktop Edge official app for Darwin x86_64 w/ GUI -- works with
no issues seen so far</li><li>Moved the console to traefik routing service (<code>zac.$DOMAIN</code>) and
controller/edge router stay at <code>zt.$DOMAIN</code>, but have registered consul
services</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cicero--tullia-integrations">Cicero &amp; Tullia Integrations<a class="hash-link" href="#cicero--tullia-integrations" title="Direct link to heading">​</a></h3><ul><li>Added webhook for [<a href="https://github.com/input-output-hk/haskell.nix" target="_blank" rel="noopener noreferrer">haskell.nix</a>].</li><li>Finished Cicero CI action for [<a href="https://github.com/input-output-hk/cardano-addresses/pull/205" target="_blank" rel="noopener noreferrer">cardano-addresses-pull-205</a>].</li><li>Fixed cardano-prelude cicero action in [<a href="https://github.com/input-output-hk/cardano-prelude/pull/176#issuecomment-1280947946" target="_blank" rel="noopener noreferrer">cardano-prelude-pull-176</a>].</li><li>Fixed the <code>abcird-stdlib/publish</code> action [<a href="https://github.com/input-output-hk/abcirdc/pull/104" target="_blank" rel="noopener noreferrer">abcirdc-pull-104</a>]</li><li>fix error on vm-bigdisk flake configs [<a href="https://github.com/input-output-hk/cicero/pull/66" target="_blank" rel="noopener noreferrer">cicero-pull-66</a>].</li><li>Helped with Cicero actions and answered questions for [<a href="https://github.com/input-output-hk/plutus" target="_blank" rel="noopener noreferrer">plutus</a>]
[<a href="https://github.com/input-output-hk/cardano-prelude" target="_blank" rel="noopener noreferrer">cardano-prelude</a>], and [<a href="https://github.com/input-output-hk/abcirdc" target="_blank" rel="noopener noreferrer">abcirdc</a>].</li><li>Merged [<a href="https://github.com/input-output-hk/cardano-base/pull/323" target="_blank" rel="noopener noreferrer">cardano-base-pull-323</a>] for Tullia on cardano-base.</li><li>Merged Cicero action in [<a href="https://github.com/input-output-hk/cardano-ogmios/pull/5" target="_blank" rel="noopener noreferrer">cardano-ogmios-pull-5</a>].</li><li>Opened [<a href="https://github.com/input-output-hk/cardano-explorer-app/pull/427" target="_blank" rel="noopener noreferrer">cardano-explorer-app-pull-427</a>] to add Tullia and Cicero.</li><li>Opened [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3097" target="_blank" rel="noopener noreferrer">cardano-ledger-pull-3097</a>] to add Cicero CI action.</li><li>Opened [<a href="https://github.com/input-output-hk/cardano-node/pull/4489" target="_blank" rel="noopener noreferrer">cardano-node-pull-4489</a>] to add Tullia and Cicero, including
OS-agnostic jobs.</li><li>Opened [<a href="https://github.com/input-output-hk/ouroboros-network/pull/4108" target="_blank" rel="noopener noreferrer">ouroboros-network-pull-4108</a>] to add Cicero action.</li><li>Reviewed [<a href="https://github.com/input-output-hk/plutus/pull/4918" target="_blank" rel="noopener noreferrer">plutus-pull-4918</a>] and helped test it.</li><li>Update Tullia in [<a href="https://github.com/input-output-hk/abcirdc/pull/97" target="_blank" rel="noopener noreferrer">abcirdc-pull-97</a>] to build if a tag is given.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cicero--tullia-features">Cicero &amp; Tullia Features<a class="hash-link" href="#cicero--tullia-features" title="Direct link to heading">​</a></h3><ul><li>Improvements to Tullia task aggregation to make [<a href="https://github.com/input-output-hk/cardano-addresses" target="_blank" rel="noopener noreferrer">cardano-addresses</a>] build
correctly.</li><li>Better tullia CUE lib default for tags [<a href="https://github.com/input-output-hk/tullia/commit/4df3c5d956f1b062b950643da12768ae71acf245" target="_blank" rel="noopener noreferrer">tullia-commit-4df3c5d</a>].</li><li>Put <code>cache.nixos.org</code> back in <code>cache.iog.io</code>'s upstreams. This is now
considered a public cache again, and without it some Cicero evaluations had
to build huge packages.</li><li>Started working on a flake-parts module for Tullia.</li><li>Started working on cutting down Tullia task build time by putting facts in
JSON files.</li><li>Fixed running into kernel arg limit by reading tullia's DAG from a file</li><li>Merged [<a href="https://github.com/input-output-hk/tullia/pull/9" target="_blank" rel="noopener noreferrer">tullia-pull-9</a>] that fixes several issues related to error reporting.
and escaping.</li><li>Added Mac builders in Cicero on CI-World.</li><li>Started work on Tullia invocation caching.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spongix">Spongix<a class="hash-link" href="#spongix" title="Direct link to heading">​</a></h3><ul><li>A lot of progress on an SQlite backed version of Spongix, it already supports
the full HTTP binary cache protocol but still lacks comprehensive testing and
some tuning, as well as recursive lookups.</li><li>First steps in the implementation of the <code>nix-daemon</code> <code>ssh-ng</code> protocol so
Spongix can be used via SSH and we can get rid of basic auth.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="bugs">Bugs<a class="hash-link" href="#bugs" title="Direct link to heading">​</a></h3><ul><li>Discovered Cicero bug where Nomad reschedules cause the Github commit status
to get stuck in <code>pending</code></li><li>Discovered Cicero race condition bug around concurrent transactions for
codependent actions.</li><li>Fixed tullia task order bug in [<a href="https://github.com/input-output-hk/cardano-addresses" target="_blank" rel="noopener noreferrer">cardano-addresses</a>]</li><li>Diagnose Cicero action not triggered in [<a href="https://github.com/input-output-hk/abcirdc" target="_blank" rel="noopener noreferrer">abcirdc</a>]</li><li>Fixed meta/description of the Tullia package in [<a href="https://github.com/input-output-hk/tullia/pull/7" target="_blank" rel="noopener noreferrer">tullia-pull-7</a>]</li><li>Add Vault token loop alerts in [<a href="https://github.com/input-output-hk/bitte-cells/pull/40" target="_blank" rel="noopener noreferrer">bitte-cells-pull-40</a>]</li><li>Ongoing investigation on recurring Patroni and nomad-follower issues related
to token rotation.</li></ul>]]></content>
        <author>
            <name>Michael Fellinger</name>
            <uri>https://github.com/manveru</uri>
        </author>
        <category label="sre" term="sre"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Crypto Team Update]]></title>
        <id>2022-10-27-crypto</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-27-crypto"/>
        <updated>2022-10-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-overview">High level overview<a class="hash-link" href="#high-level-overview" title="Direct link to heading">​</a></h2><p>The crypto team is primarily focusing in enabling SECP primitives, and preparing the KES agent. We are close to
meeting the <a href="https://github.com/input-output-hk/cardano-base/issues/315" target="_blank" rel="noopener noreferrer">acceptance criteria</a> in cardano-base,
which lacks some editorial comments on the style of dQuandrant's PR, the inclusion of one additional test, and
we are good to mark it as done. For the KES agent, we are still iterating over the best design of the solution,
but also progressing on the implementation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="low-level-overview">Low level overview<a class="hash-link" href="#low-level-overview" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secp-built-ins">SECP built-ins<a class="hash-link" href="#secp-built-ins" title="Direct link to heading">​</a></h3><ul><li>(missed last two weeks update) Audit was succesfully completed by bCryptic, and some minor changes where addressed in <a href="https://github.com/input-output-hk/cardano-base/pull/313" target="_blank" rel="noopener noreferrer">PR 313</a></li><li>CIP-0049 was addressed in the editors meeting, and <a href="https://github.com/cardano-foundation/CIPs/pull/250" target="_blank" rel="noopener noreferrer">PR 250</a> was merged</li><li>The unit-tests <a href="https://github.com/input-output-hk/cardano-base/pull/320" target="_blank" rel="noopener noreferrer">PR 320</a> is opened. Some editorial concerns still need to be addressed, and an additional (negative) test has been requested for addition.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kes-agent">KES agent<a class="hash-link" href="#kes-agent" title="Direct link to heading">​</a></h3><ul><li>We were working in investigating how to send OpCerts to KES agents, but turns out to be not necessary. OpCerts can be stored on-disk, so the agent does not need to be aware of them.</li><li>We are redesigning the architecture. Instead of connecting the control server to the agent, and then the latter to the node, we are directly connecting the control server to the node, and the latter to the agent(s).</li></ul>]]></content>
        <author>
            <name>Iñigo Querejeta Azurmendi</name>
            <uri>https://github.com/iquerejeta</uri>
        </author>
        <category label="crypto" term="crypto"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-10-21-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-21-hydra"/>
        <updated>2022-10-21T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the hydra team reviewed and addressed several open comments on the
new HeadV1 specification, completing a list the of identified gaps between
specification and implementation while doing so. In the wake of the recent
demonstration of SundaeSwap running their DEX in a Hydra Head, they met with
them to capture feature ideas &amp; incorporate their feedback on the roadmap, as
well as potential research avenues.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h3><ul><li>Had the monthly review meeting, a bit earlier than expected: <a href="https://input-output.atlassian.net/wiki/spaces/HYDRA/pages/3650813953/Monthly+report+-+October+2022" target="_blank" rel="noopener noreferrer">https://input-output.atlassian.net/wiki/spaces/HYDRA/pages/3650813953/Monthly+report+-+October+2022</a></li><li>Reviewed and addressed several open comments on HeadV1 specification.</li><li>Completed the list of identified gaps between specification and implementation <a href="https://github.com/input-output-hk/hydra-poc/issues/452" target="_blank" rel="noopener noreferrer">#452</a></li><li>Had two meetings with SundaeSwap to incorporate their feedback (on research and on the roadmap).</li><li>Some small fixes on TUI and our docker images. <a href="https://github.com/input-output-hk/hydra-poc/issues/538" target="_blank" rel="noopener noreferrer">#538</a> <a href="https://github.com/input-output-hk/hydra-poc/pull/562" target="_blank" rel="noopener noreferrer">#562</a></li><li>Met with the internal audit team and clarified scope.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h3><ul><li>Complete the last two items required for a version <code>0.8.0</code>.</li><li>Cut the next release, version <code>0.8.0</code></li><li>Get backup/recovery <a href="https://github.com/input-output-hk/hydra-poc/issues/187" target="_blank" rel="noopener noreferrer">#187</a> done with proper event sourcing (ADR18)</li><li>Have the CI build macos artifacts</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2022-10-19-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-19-node-cli-api"/>
        <updated>2022-10-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h1>2022-10-19 - 2022-11-01</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This sprint saw the addition of the long awaited tx-mempool command that allows user to query the local node's mempool for the following information:</p><ul><li>Ask the node about the current mempool's capacity and sizes</li><li>Request the next transaction from the mempool's current list</li><li>Query if a particular transaction exists in the mempool</li></ul><p>Outside of this feature the team has been focused on responding to user requests (e.g exposing functions, types and implementing instances they need) and refactoring cardano-cli/cardano-api. The metric <code>tx_submit_fail_count</code> has been added to the submit api so users can track how many transactions have failed. Other improvements have been made:</p><ul><li>Documentation improvments</li><li>Release 1.35.4 was merged &amp; released</li><li>Exported various types from cardano-api that were requested by community members</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h2><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4508" target="_blank" rel="noopener noreferrer">Release 1.35.4</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4276" target="_blank" rel="noopener noreferrer">Add tx-mempool command to CLI</a></li><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4538" target="_blank" rel="noopener noreferrer">Fix query era mismatch bug in transaction build command</a></li><li>[Serenity]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4516" target="_blank" rel="noopener noreferrer">Condense Read and Validation modules in cardano-cli</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4482" target="_blank" rel="noopener noreferrer">Return Lovelace for calculateMinimumUTxO</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4554" target="_blank" rel="noopener noreferrer">Export IsPlutusScriptLanguage from cardano-api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4546" target="_blank" rel="noopener noreferrer">Reduce exposed modules in cardano-api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4568" target="_blank" rel="noopener noreferrer">Add ToJSON and FromJSON instances for Address</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4565" target="_blank" rel="noopener noreferrer">Export TxIns type alias from Cardano.Api</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4534" target="_blank" rel="noopener noreferrer">Export more generators from cardano-api</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-submit-api">cardano-submit-api<a class="hash-link" href="#cardano-submit-api" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4566" target="_blank" rel="noopener noreferrer">Add tx_submit_fail_count metric</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4549" target="_blank" rel="noopener noreferrer">Upgrade to cabal-3.8.1.0</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4613" target="_blank" rel="noopener noreferrer">Update building-the-node-using-nix.md</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-testnet">cardano-testnet<a class="hash-link" href="#cardano-testnet" title="Direct link to heading">​</a></h3><ul><li>None</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h3><ul><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4279" target="_blank" rel="noopener noreferrer">Multiple pools support in query stake snapshot</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4250" target="_blank" rel="noopener noreferrer">Optimise query leadership schedule command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4179" target="_blank" rel="noopener noreferrer">Optimise query stake snapshot command</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/3819" target="_blank" rel="noopener noreferrer">Debug output for transaction submit</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-10-18-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-18-consensus"/>
        <updated>2022-10-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High-level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High-level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks, the consensus team worked on adding property test for
different aspects of the UTxO HD prototype: era transitions, mempool, and
backing store. Thanks to these tests we were able to uncover a bug in the
prototype. On the Genesis front, we benchmarked a different version of the
ChainSync jumping prototype to try to improve its performance, but this did not
result in any noticeable speedup.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-status-report">High-level status report<a class="hash-link" href="#high-level-status-report" title="Direct link to heading">​</a></h2><ul><li>Finish the UTxO HD prototype: on track.<ul><li>We focused on increasing test coverage for the UTxO-HD prototype:<ul><li>We started implementing Cadano-eras transition property-tests.</li><li>We started implementing state-machine property-tests for the mempool.</li><li>We merged the mempool rewrite.</li><li>We started working on state-machine tests for the backing store. This
uncovered a bug in the range-read implementation of the LMDB backing
store.</li></ul></li></ul></li><li>Genesis: on track.<ul><li>We benchmarked a version of the Genesis ChainSync Jumping prototype that
spreads out the ChainSync updates over a longer period of time. This did not
result in any noticeable speedup.</li><li>We investigated the overhead introduced by non-ChainSync components, but no
conclusions could be drawn from the benchmarks we ran.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="finish-the-utxo-hd-prototype">Finish the UTxO HD prototype<a class="hash-link" href="#finish-the-utxo-hd-prototype" title="Direct link to heading">​</a></h3><p>We focused on increasing test coverage for the UTxO HD prototype. We also merged
the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4049" target="_blank" rel="noopener noreferrer">mempool
rewrite</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="era-transition-property-tests">Era transition property tests<a class="hash-link" href="#era-transition-property-tests" title="Direct link to heading">​</a></h4><p>We started implementing <a href="https://github.com/input-output-hk/ouroboros-network/issues/4043" target="_blank" rel="noopener noreferrer">Cardano era transition property
tests</a>,
which are needed for making sure that the ledger tables get updated in the
right way when we move from one era to the next. There are at the moment two
important transitions.</p><ul><li>Byron to Shelley: where all the UTxO is transferred from in-memory Byron
state (which has no tables) to the ledger tables of the Shelley state.</li><li>Shelley to Allegra: where the AVVM addresses must be deleted.</li></ul><p>We have tests for the Byron to Shelley transitions. We are working on adding
the remaining ones.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mempool-state-machine-tests">Mempool state-machine tests<a class="hash-link" href="#mempool-state-machine-tests" title="Direct link to heading">​</a></h4><p>We started implementing <a href="https://github.com/input-output-hk/ouroboros-network/issues/4044" target="_blank" rel="noopener noreferrer">state-machine property tests for the
mempool</a>.
The mempool is currently tested via pure property tests, and use a ledger
state without tables. With the introduction of UTxO HD, testing the concurrent
behavior of the mempool became of crucial importance (eg now we have to
acquire locks to flush the backing store). In addition, we need to test a
ledger state with tables. These needs led to the creation of a new set of
property tests. In particular we aim to run parallel state-machine tests that
exercise the mempool in a way similar to how the node would make use of it.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="backing-store-property-tests">Backing store property tests<a class="hash-link" href="#backing-store-property-tests" title="Direct link to heading">​</a></h4><p>We started working on <a href="https://github.com/input-output-hk/ouroboros-network/pull/4081" target="_blank" rel="noopener noreferrer">state-machine tests for the backing
store</a> that UTxO
HD uses. The property tests uncovered errors in the range-reads implementation
of the LMDB backing store. To facilitate fixing this bug, we made
<a href="https://github.com/input-output-hk/lmdb-simple/pull/1" target="_blank" rel="noopener noreferrer">changes</a> to the Haskell
LMDB bindings.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="benchmarking-the-csj-prototype">Benchmarking the CSJ prototype<a class="hash-link" href="#benchmarking-the-csj-prototype" title="Direct link to heading">​</a></h3><p>Prompted by previous benchmarks showing significant improvements in sync time by
using more capabilities, we implemented a way to spread out the ChainSync
updates over a larger period instead of firing them all at the same time. This
didn't result in a noticeable speedup.</p><p>We also benchmarked the prototype with CSJ disabled (such that just the dynamo
peer is running ChainSync, but e.g. BlockFetch still sees all peers) to rule
out/confirm overhead by non-ChainSync (mainly BlockFetch) related components.
This results in era-specific behavior (speed is like the prototype in Byron, but
like the baseline in Shelley). This deserves a closer look in the future.</p><p>This diagram shows the respective syncing progress, starting at Genesis and
continuing a good part into Shelley (with the dashed line indicating the
Byron-to-Shelley transition).</p><ul><li>Red: baseline</li><li>Green: CSJ prototype, 10 peers, jumps every 3000/f slots, jumps in clumps.</li><li>Blue: like Green, jumps are spread out.</li><li>Orange: variant with no jumping, to measure unrelated overhead.</li></ul><p><img loading="lazy" src="/cardano-updates/assets/images/happy-path-csj-prototype-bench-2-e23d2986ddef0a187df9ce336b2db116.svg" width="654" height="459" class="img_ev3q"></p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hydra Team Update]]></title>
        <id>2022-10-14-hydra</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-14-hydra"/>
        <updated>2022-10-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>This week, the hydra team worked on implementing ADR18 to get backup &amp; restore functionality of the <code>hydra-node</code> over the line. Although not fully there yet, an early version of that feature was already needed and succesfully tested by SundaeSwap in their recent demonstration of their DEX running on Hydra. The team also worked on the updated specificaton, met with the researchers and discussed a solution for how to secure rollbacks "past the opening of a Head". We also reponded to recent requests for static executables and prioritized that feature higher, implemented it and merged it.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-did-the-team-achieve-this-week">What did the team achieve this week<a class="hash-link" href="#what-did-the-team-achieve-this-week" title="Direct link to heading">​</a></h2><ul><li>Last week we thought we were done with <a href="https://hydra.family/head-protocol/adr/18/" target="_blank" rel="noopener noreferrer">ADR18</a>, but were not ...</li><li>... instead, SundaeSwap has been preparing their Rare bloom Hydra demo &amp; needed assistence.</li><li>Implemented a first version for persistence <a href="https://github.com/input-output-hk/hydra-poc/issues/187" target="_blank" rel="noopener noreferrer">#187</a> in response.</li><li>Enhanced CI to publish test results <a href="https://hydra.family/head-protocol/benchmarks/tests/hydra-node/hspec-results" target="_blank" rel="noopener noreferrer">on our website</a></li><li>Engineering meeting -&gt; discussed rollbacks and discovered a solution for the rollback past open problem!</li><li>Pulled static executable feature <a href="https://github.com/input-output-hk/hydra-poc/issues/200" target="_blank" rel="noopener noreferrer">#200</a> into scope, implemented it and merged it!</li><li>Received and read through a project proposal by a vendor (building a Hydra platform).</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-the-goals-of-next-week">What are the goals of next week<a class="hash-link" href="#what-are-the-goals-of-next-week" title="Direct link to heading">​</a></h2><ul><li>Get backup/recovery <a href="https://github.com/input-output-hk/hydra-poc/issues/187" target="_blank" rel="noopener noreferrer">#187</a> done with proper event sourcing (ADR18)</li><li>Cut the next release, version <code>0.8.0</code></li><li>Address open comments on specification document &amp; complete the list of identified gaps between specification and implementation <a href="https://github.com/input-output-hk/hydra-poc/issues/452" target="_blank" rel="noopener noreferrer">#452</a></li><li>Have the CI build macos artifacts</li></ul>]]></content>
        <author>
            <name>Sebastian Nagel</name>
            <uri>https://github.com/ch1bo</uri>
        </author>
        <category label="hydra" term="hydra"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-10-14-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-14-ledger"/>
        <updated>2022-10-14T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>The ledger team is still primarily focused on addressing
<a href="https://github.com/input-output-hk/cardano-ledger/issues?q=is%3Aissue+is%3Aopen+label%3A%22%3Acredit_card%3A+technical-debt%22" target="_blank" rel="noopener noreferrer">technical</a>
<a href="https://github.com/input-output-hk/cardano-ledger/projects/3" target="_blank" rel="noopener noreferrer">debt</a>.
We now have the infrastructure for versioning our serialization schemes,
which we continue to put into action.
We have made first steps towards getting proper support for the
<a href="https://github.com/input-output-hk/formal-ledger-specifications" target="_blank" rel="noopener noreferrer">formal ledger repository</a>
(in particular, we've added nix builds and
continuous integration support).
We are wrapping up an investigation of the performance of a critical
function used by the consensus layer for leader checks.
Finally, we are improving the packaging and versioning of our code.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lower-level-summary">Lower level summary<a class="hash-link" href="#lower-level-summary" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="completed-technical-debt">Completed Technical Debt<a class="hash-link" href="#completed-technical-debt" title="Direct link to heading">​</a></h3><ul><li>Because the Shelley ledger era was a complete re-write of the Byron ledger era, a lot of
our code lives in the <code>cardano-ledger-shelley</code> package, though with hindsight we can say that
much of it should live in <code>cardano-ledger-core</code>.
We continue to move things to <code>cardano-ledger-core</code>, and have much more to come. [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3059" target="_blank" rel="noopener noreferrer">pull-3059</a>]</li><li>We now have the infrastructure to support <strong>versioned</strong> serialization schemes.
The inability to do this has caused us a lot difficulties,
such as [<a href="https://github.com/input-output-hk/cardano-ledger/issues/3003" target="_blank" rel="noopener noreferrer">issue-3003</a>], [<a href="https://github.com/input-output-hk/cardano-ledger/issues/2965" target="_blank" rel="noopener noreferrer">issue-2965</a>] and [<a href="https://github.com/input-output-hk/cardano-ledger/issues/2444" target="_blank" rel="noopener noreferrer">issue-2444</a>].
We are still in the process of switching to the versioned serialization scheme
(such as [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3078" target="_blank" rel="noopener noreferrer">pull-3078</a>]),
but the infrastructure was completed in [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3063" target="_blank" rel="noopener noreferrer">pull-3063</a>].</li><li>We now have proper nix and CI support for the formal ledger project. [<a href="https://github.com/input-output-hk/formal-ledger-specifications/pull/19" target="_blank" rel="noopener noreferrer">pull-19</a>]</li><li>A separate team is helping bring support for
<a href="https://github.com/input-output-hk/cardano-haskell-packages" target="_blank" rel="noopener noreferrer">CHaP</a>
to all the cardano-node repositories.
We have been helping out with this effort.</li></ul><ul><li>A separate team continues working on upgrading all the
cardano-node repositories to work with ghc 9.2.4.
We have been helping out with this effort.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress-technical-debt">In-progress Technical Debt<a class="hash-link" href="#in-progress-technical-debt" title="Direct link to heading">​</a></h3><p>We also have several fairly large pull-requests in review
that we are working on.</p><ul><li>In an on-going attempt to build out a more user-friendly API,
we continue to remove <code>HasField</code> instances in place of using micro-lenses.
The protocol parameters, in particular, are being worked on. [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3045" target="_blank" rel="noopener noreferrer">pull-3045</a>]</li><li>We are also renaming record fields to be consistent across the repository. [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3062" target="_blank" rel="noopener noreferrer">pull-3062</a>]</li><li>We are now cleaning up all the work we did to understand the performance
of the TICKF transition. We have some improvements to the computatation
as well. [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3068" target="_blank" rel="noopener noreferrer">pull-3068</a>]</li><li>We are adding more documentation, in particular to our <code>Twiddler</code> functionality. [<a href="https://github.com/input-output-hk/cardano-ledger/pull/3073" target="_blank" rel="noopener noreferrer">pull-3073</a>]</li><li>The formal ledger is adding support for finite set theory. [<a href="https://github.com/input-output-hk/formal-ledger-specifications/pull/20" target="_blank" rel="noopener noreferrer">pull-20</a>]</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-10-05-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-05-consensus"/>
        <updated>2022-10-05T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[High level summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-summary">High level summary<a class="hash-link" href="#high-level-summary" title="Direct link to heading">​</a></h2><p>During the past two weeks, the consensus team worked on improving the
performance of the ChainSync jumping logic, which is needed for Genesis. We also
rewrote the implementation of the mempool in the UTxO HD prototype which solved
the issues that prevented us from running system level benchmarks. Also on the
UTxO HD front, we have an improved implementation of the sequence-of-differences
(a crucial piece of UTxO HD), and we also elaborated a test sign-off list for
the UTxO HD feature.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">​</a></h2><ul><li>With the latest implementation of ChainSync jumping we are closer to the
baseline performance. In particular, the prototype seems to benefit from the
extra concurrency provided by additional capabilities.</li><li>We rewrote the implementation of the mempool in the UTxO HD prototype. This
rewrite was required due to performance problems we observed when running the
<a href="https://github.com/input-output-hk/cardano-node/blob/master/Makefile#L51" target="_blank" rel="noopener noreferrer">workbench</a>.
These performance problems prevented us from running system level benchmarks.
The rewrite solved these issues. After the <a href="https://github.com/input-output-hk/ouroboros-network/pull/4049" target="_blank" rel="noopener noreferrer">UTxO-HD: mempool
rewrite</a> PR is
merged, we will contact the Benchmarking team so that they run the system
level benchmarks.</li><li>The implementation of sequences of differences based on anti-diffs was
integrated into the UTxO HD prototype. It is pending
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4036" target="_blank" rel="noopener noreferrer">review</a> and
we also need to run replay and syncing benchmarks to confirm that this will
deliver a performance improvement, as observed in our micro-benchmarks.</li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/3944" target="_blank" rel="noopener noreferrer">The UTxO HD prototype
inspection</a>
resulted in a <a href="https://github.com/input-output-hk/ouroboros-network/issues/4045" target="_blank" rel="noopener noreferrer">list of
tests</a>
needed for consensus to consider the UTxO HD prototype as fully tested.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-information">Additional information<a class="hash-link" href="#additional-information" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><p>Benchmarking setup: 50MBit/s, 50ms latency</p><ul><li>Red: baseline</li><li>Green: Current CSJ prototype, 10 peers, jumps every 3000/f slots.</li></ul><p>As ChainSync Jumping involves many concurrent network operations at every jump,
we tried to run the node with 6 instead of the default 2 capabilties.</p><ul><li>Orange: baseline with 6 capabilities</li><li>Blue: CSJ prototype with 6 capabilities</li></ul><p>This diagram shows the respective syncing progress, starting at Genesis and
continuing a good part into Shelley (with the dashed line indicating the
Byron-to-Shelley transition).</p><p><img loading="lazy" src="/cardano-updates/assets/images/happy-path-csj-prototype-bench-1-2c33ba45f44a086415e703fe8f0f7ad1.svg" width="654" height="459" class="img_ev3q"></p><p>Further work includes whether we can tune the prototype to better handle few
capabilities, or to adapt the default number of capabilities (potentially just
while syncing).</p>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB Sync Team Update]]></title>
        <id>2022-10-04-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-04-db-sync"/>
        <updated>2022-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[DBSync Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dbsync-update">DBSync Update<a class="hash-link" href="#dbsync-update" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fast-restarts">Fast restarts<a class="hash-link" href="#fast-restarts" title="Direct link to heading">​</a></h3><p> We fixed a long overdue issue in db-sync which caused long delays on restarts
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1266" target="_blank" rel="noopener noreferrer">1266</a>. This has been
one of db-sync main objectives for this period. Restarts are now very fast,
because db-sync deletes almost nothing from the db, it just replays the ledger rules until it
reaches the tip of the db. The fix also improves reconnection speed, in cases where the node
restarts or the connection is temporarily lost. It also speeds up even more in cases where due to a
deployment mess up a very old snapshot or no snapshot at all is used.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="property-based-testing">Property based testing<a class="hash-link" href="#property-based-testing" title="Direct link to heading">​</a></h3><p>We added stateful property based testing, using <code>quickcheck-state-machine</code>
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1269" target="_blank" rel="noopener noreferrer">1269</a>. These tests use empty or
almost empty blocks to test the new behaviour of restarts and rollbacks.</p><p> These tests generate arbitrarily a list of symbolic commands from these:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">RollForward Int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RollBack BlockNo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StopDBSync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StartDBSync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartNode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AssertBlockNo BlockNo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The commands are translated into real commands. For example <code>RollForward Int</code> will forge a new block
that fits on the current chain. These real commands are executed against db-sync using the mock
chain-sync server. The symbolic commands are executed against a vesy simplistic Model of db-sync
which looks like this:</p><div class="language-haskell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-haskell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  Model</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    { serverTip :: BlockNo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    , dbSyncTip :: BlockNo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    , dbSynsIsOn :: Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    , dbSynsHasSynced :: Bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally a number of postconditions are checked, related to the eventual block number of db-sync.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tech-debt">Tech Debt<a class="hash-link" href="#tech-debt" title="Direct link to heading">​</a></h3><p>We handled a number of tech debt in
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1275" target="_blank" rel="noopener noreferrer">1275</a>
This improves the code format of db-sync, deletes many queries that were never used and groups the
others. This tech debt resolution not only improves the experience of working in db-sync, but can
facilitate some of our other objectives, as it makes it very explicit which queries are used
during syncing and which indexes are necessary.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="smash">Smash<a class="hash-link" href="#smash" title="Direct link to heading">​</a></h3><p>We worked on fixing an issue related to fetching pool metadata
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1276" target="_blank" rel="noopener noreferrer">1276</a>.
The issue which is described in
<a href="https://github.com/input-output-hk/cardano-db-sync/issues/1270" target="_blank" rel="noopener noreferrer">1270</a></p>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Node API & CLI Team Update]]></title>
        <id>2022-10-04-node-cli-api</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-10-04-node-cli-api"/>
        <updated>2022-10-04T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Node-Api-Cli Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-api-cli-update">Node-Api-Cli Update<a class="hash-link" href="#node-api-cli-update" title="Direct link to heading">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2022-10-04---2022-10-18">2022-10-04 - 2022-10-18<a class="hash-link" href="#2022-10-04---2022-10-18" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive Summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">​</a></h3><p>The majority of the team's time was spent between getting <code>1.34.4</code> ready, addressing various feature requests/issues/bugs that have arisen and refactoring components in the api and cli. The current refactoring is aimed at the long term goal of empowering users to be able to easily build applications similar to <code>cardano-cli</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="completed">Completed<a class="hash-link" href="#completed" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4504" target="_blank" rel="noopener noreferrer">GHC 9.2.4 preparations</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli">cardano-cli<a class="hash-link" href="#cardano-cli" title="Direct link to heading">​</a></h4><ul><li>[Serenity]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4491" target="_blank" rel="noopener noreferrer">Separate IO from txBuild and txBuildRaw functions</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api">cardano-api<a class="hash-link" href="#cardano-api" title="Direct link to heading">​</a></h4><ul><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4501" target="_blank" rel="noopener noreferrer">TxWitness text envelope format does not roundtrip in Shelley era</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">cardano-node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h4><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4526" target="_blank" rel="noopener noreferrer">Fix MacOS GHA CI</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="in-progress">In Progress<a class="hash-link" href="#in-progress" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4508" target="_blank" rel="noopener noreferrer">Release 1.34.4</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-cli-1">cardano-cli<a class="hash-link" href="#cardano-cli-1" title="Direct link to heading">​</a></h4><ul><li>[BUGFIX]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4538" target="_blank" rel="noopener noreferrer">Fix query era mismatch bug in transaction build command</a></li><li>[Serenity]<!-- --> - <a href="https://github.com/input-output-hk/cardano-node/pull/4516" target="_blank" rel="noopener noreferrer">Condense Read and Validation modules in cardano-cli</a></li><li>[BUGFIX]<!-- -->- <a href="https://github.com/input-output-hk/cardano-node/pull/4537" target="_blank" rel="noopener noreferrer">Stop the cli from changing the bytes in user-supplied data</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4431" target="_blank" rel="noopener noreferrer">Infer protocol params in transaction build</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4408" target="_blank" rel="noopener noreferrer">Allow assembling transactions with no witnesses</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4276" target="_blank" rel="noopener noreferrer">Add tx-mempool command to CLI</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-api-1">cardano-api<a class="hash-link" href="#cardano-api-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4482" target="_blank" rel="noopener noreferrer">Return Lovelace for calculateMinimumUTxO</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4458" target="_blank" rel="noopener noreferrer">Make TxBodyContent an instance of Monoid</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4450" target="_blank" rel="noopener noreferrer">Auto-balance multiasset transactions</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node-1">cardano-node<a class="hash-link" href="#cardano-node-1" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/input-output-hk/cardano-node/pull/4263" target="_blank" rel="noopener noreferrer">Stop running CI when the only changes are to docs</a></li><li><a href="https://github.com/input-output-hk/cardano-node/pull/4341" target="_blank" rel="noopener noreferrer">Rename TestEnableDevelopmentHardForkEras</a></li></ul>]]></content>
        <author>
            <name>Jordan Millar</name>
            <uri>https://github.com/Jimbo4350</uri>
        </author>
        <category label="cli-api" term="cli-api"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-09-30-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-09-30-ledger"/>
        <updated>2022-09-30T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Ledger Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ledger-update">Ledger Update<a class="hash-link" href="#ledger-update" title="Direct link to heading">​</a></h2><p>We have continued focusing nearly entirely on addressing technical debt.
A lot of design work has begun for the next ledger era,
but we do not yet have anything concrete to share.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt-issues-completed">Technical debt issues completed<a class="hash-link" href="#technical-debt-issues-completed" title="Direct link to heading">​</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/1676" target="_blank" rel="noopener noreferrer">issue-1676</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/2992" target="_blank" rel="noopener noreferrer">pull-2992</a>] We have finally removed the ledger dependency on the
<code>cardano-prelude</code> package. It was barely used in the ledger repository, and it added a dependency
that we did not want to maintain. It was a bit difficult to remove, and we had
to coordinate removing it from cardano-base.
A lot ended up going into <a href="https://github.com/input-output-hk/cardano-ledger/pull/2992" target="_blank" rel="noopener noreferrer">pull-2992</a>, due to the coordination effort, and we ended
up updating Plutus as well.
This means that we've now also made a lot of progress on the problematic cost model serialization
issues described in <a href="https://github.com/input-output-hk/cardano-ledger/issues/2902" target="_blank" rel="noopener noreferrer">issue-2902</a>.
In particular, after we resolve <a href="https://github.com/input-output-hk/cardano-ledger/issues/3014" target="_blank" rel="noopener noreferrer">issue-3014</a>, we will not have to wait an epoch before
releasing a cost model for a new version of Plutus, as we had to do for the Vasil HF.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3046" target="_blank" rel="noopener noreferrer">issue-3046</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3055" target="_blank" rel="noopener noreferrer">pull-3055</a>] We moved a module that is now only used in Byron to a Byron package.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3047" target="_blank" rel="noopener noreferrer">issue-3047</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3054" target="_blank" rel="noopener noreferrer">pull-3054</a>] We improved the interface to the <code>Value</code> (multi-asset) type.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3044" target="_blank" rel="noopener noreferrer">pull-3044</a>] We debugged and fixed a tricky compilation issue. Certain kinds of field updates
were adding approximately 20 minutes to our compile time!</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/2932" target="_blank" rel="noopener noreferrer">issue-2932</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3036" target="_blank" rel="noopener noreferrer">pull-3036</a>] As a part of our ongoing re-organization of the codebase, we
have added a <code>Cardano.Ledger.[Era].Core</code> module to each ledger era that has a TxBody class.
Most classes defined in the era should go in this new module.
We also re-export the <code>Cardno.Ledger.Core</code> module and the previous <code>Cardano.Ledger.[Era].Core</code>
modules from each era.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt-in-progress">Technical debt in progress<a class="hash-link" href="#technical-debt-in-progress" title="Direct link to heading">​</a></h3><ul><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3034" target="_blank" rel="noopener noreferrer">issue-3034</a>][<a href="https://github.com/input-output-hk/cardano-ledger/issues/3035" target="_blank" rel="noopener noreferrer">issue-3035</a>][<a href="https://github.com/input-output-hk/cardano-node/issues/4421" target="_blank" rel="noopener noreferrer">node-issue-4421</a>] We are continuing to write benchmarks to understand exactly where
all the time is being spent on executing the <code>TICKF</code> transition.
The consolidation of the per-stake-credential stake distribution to the per-stake-pool
distribution does seem to account for a large amount of time (near a second as written, which we
have down to about half a second with some optimizations),
but this does not account for everything.
Applying the reward update may also be a big contributing factor.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/pull/3033" target="_blank" rel="noopener noreferrer">pull-3033</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3038" target="_blank" rel="noopener noreferrer">pull-3038</a>][<a href="https://github.com/input-output-hk/cardano-ledger/pull/3041" target="_blank" rel="noopener noreferrer">pull-3041</a>] A separate team is working on upgrading all the
cardano-node repositories to work with ghc 9.2.4. We have been helping out with this effort.</li><li>The nix scripts used to build our new
<a href="https://github.com/input-output-hk/formal-ledger-specifications" target="_blank" rel="noopener noreferrer">formal ledger model</a>
do not work consistently for everyone, and we have been working on fixing these issues.</li><li>[<a href="https://github.com/input-output-hk/cardano-ledger/issues/3014" target="_blank" rel="noopener noreferrer">issue-3014</a>] We are still working on adding a versioning scheme to all of the ledger
serializers.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2022-09-27-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-09-27-network"/>
        <updated>2022-09-27T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Network Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="network-update">Network Update<a class="hash-link" href="#network-update" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ouroboros-network">Ouroboros Network<a class="hash-link" href="#ouroboros-network" title="Direct link to heading">​</a></h3><ul><li>We finished high and low level <em>peer sharing</em> design. See
<a href="https://github.com/input-output-hk/ouroboros-network/wiki/Peer-Sharing-Implementation-Plan" target="_blank" rel="noopener noreferrer">Peer Sharing Implementation Plan</a></li><li>We started working on low-level design of <em>eclipse evasion</em> (work in
progress).</li><li>We decided to use <strong>peer sharing</strong> instead of overloaded and ambiguous <em>gossip</em> term.
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3980" target="_blank" rel="noopener noreferrer">PR input-output-hk/ouroboros-network#3980</a></li><li>We fixed technical dept
<a href="https://github.com/input-output-hk/ouroboros-network/issues/3905" target="_blank" rel="noopener noreferrer">issue input-output-hk/cardano-node#3905</a> in
the simulation testing of diffusion
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4004" target="_blank" rel="noopener noreferrer">PR input-output-hk/cardano-node#4004</a></li><li>We deployed all our nodes using our new nix based deployment architecture.
When deploying we found an issue in the
<a href="https://github.com/input-output-hk/cardano-node/issues/3752" target="_blank" rel="noopener noreferrer"><code>RTView</code></a>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ouroboros-consensus">Ouroboros Consensus<a class="hash-link" href="#ouroboros-consensus" title="Direct link to heading">​</a></h3><ul><li>Recently we found out that the consensus does not log exceptions thrown during
intiialisation.  This was fixed in
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4015" target="_blank" rel="noopener noreferrer">PR input-output-hk/ouroboros-network#4015</a>
As part of this pull request we also changed that all exceptions rethrown by
the connection handler thread are wrapped in <code>ExceptionInHandler</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="some-older-items-which-were-not-announced">Some older items, which were not announced<a class="hash-link" href="#some-older-items-which-were-not-announced" title="Direct link to heading">​</a></h4><ul><li>We identified and fixed an issue related to socket activation (socket options
where not set for sockets passed through socket activation).
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3979" target="_blank" rel="noopener noreferrer">PR input-output-hk/cardano-node#3979</a>
This fix will be released in the next <code>cardano-node</code> release.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-node">Cardano Node<a class="hash-link" href="#cardano-node" title="Direct link to heading">​</a></h3><ul><li>We extended the NixOs service module so that one can modify <code>socketPath</code>,
<code>runtimeDir</code>, <code>databasePath</code>, <code>traceSocketPathAccept</code>,
<code>traceSocketPathConnect</code> and <code>stateDir</code> options.
<a href="https://github.com/input-output-hk/cardano-node/pull/4196" target="_blank" rel="noopener noreferrer">PR input-output-hk/cardano-node#4196</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="io-sim">IO-Sim<a class="hash-link" href="#io-sim" title="Direct link to heading">​</a></h3><p>We resolved a number of issues before release of <code>io-sim</code> on hackage:</p><ul><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2797" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2797</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2650" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2650</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/3436" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#3436</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2588" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2588</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2587" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2587</a></li><li><a href="https://github.com/input-output-hk/ouroboros-network/issues/2586" target="_blank" rel="noopener noreferrer">issue input-output-hk/ouroboros-network#2586</a></li></ul><p>See <a href="https://github.com/input-output-hk/io-sim/pull/24" target="_blank" rel="noopener noreferrer">PR #24</a>.</p><p>We also improved experience for contributors of <code>io-sim</code> and <code>typed-protocols</code> by adding issue templates:</p><ul><li><a href="https://github.com/input-output-hk/io-sim/pull/25" target="_blank" rel="noopener noreferrer">PR input-output-hk/io-sim#25</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="typed-protocols">Typed Protocols<a class="hash-link" href="#typed-protocols" title="Direct link to heading">​</a></h3><ul><li>We pushed a branch which identifies a GHC quirk:
<a href="https://github.com/input-output-hk/typed-protocols/tree/coot/typed-protocols-rewrite-StateToken-problem" target="_blank" rel="noopener noreferrer">coot/typed-protocols-rewrite-StateToken-problem</a>.
That's too be resolved in order to push forward review of the redesign in
<a href="https://github.com/input-output-hk/typed-protocols/pull/3" target="_blank" rel="noopener noreferrer">PR input-output-hk/typed-protocols#3</a>.</li><li>As for <code>io-sim</code>, we wrote issue templates:
<a href="https://github.com/input-output-hk/typed-protocols/pull/11" target="_blank" rel="noopener noreferrer">PR input-output-hk/typed-protocols#11</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="input-endorsers-simulation">Input Endorsers Simulation<a class="hash-link" href="#input-endorsers-simulation" title="Direct link to heading">​</a></h3><p>New features include:</p><ul><li><p>Histograms of block arrival frequency, for both network (inbound) and CPU
(block validation). This is interesting to check that we're not overloading
the CPU block validation capacity, or network link capacity. Or alternatively
to observe the behaviour in an overload situation if we set the block
generation rate high enough.</p></li><li><p>Pie chart of utilisation of TCP links. This shows how small a fraction of
links are being used at any one time, and shows that once the system "warms
up" and is operating stably, most block delivery is ballistic.</p></li><li><p>Showing off the new screen layout combinators, that let us put multiple
charts, titles etc on screen at once and scale them to whatever screen or
video resolution we like without having to tweak numbers (this example is
scaled to fit 1080HD video resolution).</p></li></ul><div style="width:640px;height:360px"></div>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-09-20-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-09-20-consensus"/>
        <updated>2022-09-20T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[- We proposed a fix for the performance degradation observed when running]]></summary>
        <content type="html"><![CDATA[<ul><li>We proposed a fix for the performance degradation observed when running
distributed multi-node benchmarks in the UTxO HD feature branch. While this
fixed the problems observed when running local benchmarks, it broke the
<code>ThreadNet</code> tests due to concurrency issues. Therefore, we think it is wise to
start redesigning the UTxO HD mempool integration.</li><li>We did several rounds of code review on the alternative implementation of
diff-sequences required by the UTxO HD feature based on the idea of
anti-diffs. This alternative implementation is close to being merged, and the
next step is to integrate this to the UTxO HD branch, so that we can run
ad-hoc replaying and syncing from scratch benchmarks and compare these with
the baseline. The micro-benchmarks we elaborated for the alternative
implementation show speedups of up to 4x, so we are optimistic about the
performance of replaying and syncing from scratch benchmarks, however it is
important to notice that <em>due to the nature of UTxO HD</em> we will still be
slower than the baseline.</li><li>The final draft of the Genesis implementation specification is ready for
review.</li><li>We implemented a prototype for the happy path of Genesis' ChainSync Jumping
(CSJ). The prototype is slower than the baseline, however it is not the latest
version of the prototype and the jump interval is very small.</li><li>Work on integrating Conway has <a href="https://github.com/input-output-hk/ouroboros-network/pull/3971#issuecomment-1252524031" target="_blank" rel="noopener noreferrer">stopped</a> since
priorities have changed.</li><li>We started work on benchmarking epoch-boundaries and epoch overhead
<a href="https://github.com/input-output-hk/ouroboros-network/pull/4014" target="_blank" rel="noopener noreferrer">pr-4014</a>. To this end, we made use of a modified version of our
<code>db-analyser</code> tool. We ran the new benchmarking setup using the Cardano
mainnet chain, and we can see that block tick and application take
substantially longer at epoch boundaries, although there are a couple of slots
during an epoch in which these computations take more than normal. We notified
the ledger team about these findings. We will use this modified version of
<code>db-analyser</code> to investigate the epoch overhead.</li></ul><h1>Workstreams</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd">UTxO HD<a class="hash-link" href="#utxo-hd" title="Direct link to heading">​</a></h2><ul><li><p>Spent quite some time investigating the root cause of the degradation in
performance observed in the benchmarks. We run the <code>make forge-stress</code>
benchmarks locally in order to debug this behavior.</p><ul><li><p>Transaction batching doesn't make a notable difference in the outcome
(considering we are using the in-memory backend).</p></li><li><p>The mempool batching implementation required asynchronous transaction
validation which is a violation of the <code>LocalTxSubmission</code> protocol
contract and therefore if we continued on that route, the impact would
have been quite big.</p></li><li><p>The STM logic we implemented by using a <code>TMVar</code> for the mempool internal
state was buggy and under certain circumstances it seemed to lock.
Reverting the mempool internal state to be stored in a <code>TVar</code> seems to
solve this problem.</p></li><li><p>The results we get after this change look almost identical to the ones
from the baseline.</p></li></ul></li><li><p><a href="https://github.com/input-output-hk/ouroboros-network/pull/3997" target="_blank" rel="noopener noreferrer">The anti-diff prototype (PR
#3997)</a> has
been reviewed and is close to being merged.</p><ul><li>A follow-up issue (<a href="https://github.com/input-output-hk/ouroboros-network/issues/4010" target="_blank" rel="noopener noreferrer">issue
#4010</a>)
to integrate the anti-diff prototype in the various <code>consensus</code> packages
was created. A first version of the integration exists, and all tests
pass. A next step is to get some indication of the "real" performance gain
by profiling <code>db-analyser</code> (or <code>cardano-node</code>).</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h2><ul><li><p>Final draft of the Genesis implementation specification, now up for review.</p></li><li><p>Local benchmark setup for parameter tuning via the happy path ChainSync
Jumping (CSJ) prototype (<a href="https://github.com/input-output-hk/ouroboros-network/issues/3987" target="_blank" rel="noopener noreferrer">Issue 3987</a>).</p><ul><li><p>Context: Our Genesis design requires us to check in with a large (~20)
number of servers periodically while syncing. These servers are offered
jump requests via the ChainSync protocol (hence the name), which they can
accept or decline. If a peer declines, the Genesis rule allows us to
determine whether a node actually has a better chain.</p></li><li><p>The "happy path" is when no peer declines a jump. We want this to have
close to no overhead compared to status quo, i.e. syncing without Genesis.</p></li><li><p>We implemented a prototype for this happy path, and are now starting to
test in various configurations (number of peers, latency, bandwidth) to
tune the performance of ChainSync jumping, i.e. how complicated our logic
of choosing when to jump needs to be.</p><p><strong>Example:</strong></p></li><li><p>Simulated connection: 50 MBit/s, 50ms latency</p></li><li><p>Jump interval: 3000 slots (on the low end, could be increased to up to
<code>3k/f</code>)</p></li><li><p>Red: baseline (1.35.3), one peer in topology file</p></li><li><p>Blue: Preliminary version of our prototype, with 10 peers.</p><p><img loading="lazy" src="/cardano-updates/assets/images/happy-path-csj-prototype-prelim-5bbe2e2a20a2740e6238a7c73e618168.svg" width="654" height="459" class="img_ev3q"></p><p>It is slower by about ~30%, but it is not the latest version of the
prototype, and the jump interval is very small, making CSJ more of a
bottleneck.</p></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h2><ul><li>Fix flakiness in ChainDB QSM tests (<a href="https://github.com/input-output-hk/ouroboros-network/pull/3990" target="_blank" rel="noopener noreferrer">PR 3990</a>).</li></ul>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[DB Sync Team Update]]></title>
        <id>2022-09-19-db-sync</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-09-19-db-sync"/>
        <updated>2022-09-19T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[DBSync Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dbsync-update">DBSync Update<a class="hash-link" href="#dbsync-update" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-tag">New Tag<a class="hash-link" href="#new-tag" title="Direct link to heading">​</a></h3><p>We created a new db-sync tag 13.0.5 which addresses shortcomings of the last
release 13.0.4. It is currently under testing.
The Changelog is
<a href="https://github.com/input-output-hk/cardano-db-sync/blob/8ad98d48e0068f3768d48e18fdcbe254037cba3b/cardano-db-sync/CHANGELOG.md#1305" target="_blank" rel="noopener noreferrer">here</a> and in more details:</p><ul><li><p>We fixed fees for tx with phase 2 failure that didn't include a total collateral field.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1248" target="_blank" rel="noopener noreferrer">1248</a></p></li><li><p>We fixed an issue that could cause db-sync to crash if a specific rollback occured.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1247" target="_blank" rel="noopener noreferrer">1247</a></p></li><li><p>DBSync will now avoid reserialising data, especially Datums, which not only slows down db-sync but
could result in the wrong CBOR encoding being inserted.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1217" target="_blank" rel="noopener noreferrer">1217</a></p></li><li><p>All the fixes above come with unit tests which validates the fix.</p></li><li><p>Added support for preprod and preview from docker. DBSync no longer needs to include the configs
for different networks, these are directly fetched from the cardano world.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1254" target="_blank" rel="noopener noreferrer">1254</a></p></li><li><p>We added better support from docker for the new disable options and the overall documentation.
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1260" target="_blank" rel="noopener noreferrer">1260</a></p></li></ul><p>All the above were also backported to the master branch</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="open-source">Open source<a class="hash-link" href="#open-source" title="Direct link to heading">​</a></h3><p>We made the db-sync <a href="https://github.com/orgs/input-output-hk/projects/52/views/1" target="_blank" rel="noopener noreferrer">board public</a>, so
everyone can have access on the issues we prioritise.
We also added new tasks to the board, some of them could be approachable to newcomers or people who
want to contribute.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="progress-on-tech-debt-and-new-features">Progress on tech debt and new features<a class="hash-link" href="#progress-on-tech-debt-and-new-features" title="Direct link to heading">​</a></h3><ul><li><p><a href="https://github.com/input-output-hk/cardano-db-sync/pull/1223" target="_blank" rel="noopener noreferrer">1223</a> was merged, which removes the
foreign keys from the db schema. This opens the road to a number of optimizations.</p></li><li><p>An additional fix on top of the previous work was added
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1250" target="_blank" rel="noopener noreferrer">1250</a></p></li><li><p>An initial version where DBSync does not rollback on restart is done here
<a href="https://github.com/input-output-hk/cardano-db-sync/pull/1266" target="_blank" rel="noopener noreferrer">1266</a>.
This allows db-sync to restart much faster, without the need to delete data and reinsert them. In
the future it can also facilitate migrations in cases where the ledger snapshots have a breaking
change, without the need to resync everything from genesis.</p></li></ul>]]></content>
        <author>
            <name>Kostas Dermentzis</name>
            <uri>https://github.com/kderme</uri>
        </author>
        <category label="db-sync" term="db-sync"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-09-16-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-09-16-ledger"/>
        <updated>2022-09-16T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Ledger Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ledger-update">Ledger Update<a class="hash-link" href="#ledger-update" title="Direct link to heading">​</a></h2><p>We have been focused nearly entirely on addressing technical debt.</p><ul><li>We introduced more consistent naming across eras, this time for the auxiliary data.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3032" target="_blank" rel="noopener noreferrer">3032</a>.</li><li>We made clear how the <code>consumed</code> functions differs between eras (which was a previous source of
confusion), and added some related support to the fledgling ledger API.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3016" target="_blank" rel="noopener noreferrer">3016</a>.</li><li>We added clarity and organizational consistency to the main ledger era type synonyms.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3017" target="_blank" rel="noopener noreferrer">3017</a>.</li><li>We removed code duplication related to the input data hashes.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3018" target="_blank" rel="noopener noreferrer">3018</a>.</li><li>We split up a large module into smaller components. The large module was actually causing our
CI to time out.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3020" target="_blank" rel="noopener noreferrer">3020</a>.</li><li>We cleaned up stale information in our cabal files, and upgraded cabal 3.8.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3023" target="_blank" rel="noopener noreferrer">3023</a>,
<a href="https://github.com/input-output-hk/cardano-ledger/pull/3031" target="_blank" rel="noopener noreferrer">3031</a>,
and <a href="https://github.com/input-output-hk/cardano-ledger/pull/3028" target="_blank" rel="noopener noreferrer">3028</a>.</li><li>We made consistent, standalone <code>TxOut</code> (transaction output) modules for every era.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3024" target="_blank" rel="noopener noreferrer">3024</a>.</li><li>We brought consistency to a maddening inconsistent use of type variables indicating the specific
choice of cryptographic primitives. In particular, all uses of <code>crypto</code> have been renamed to <code>c</code>.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3027" target="_blank" rel="noopener noreferrer">3027</a>.</li><li>We did a clean up of the types in the Alonzo era. In particular, we switched to more parametric
types that will compose better in the future and which simplifies the constraints.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3029" target="_blank" rel="noopener noreferrer">3029</a>.</li><li>We consolidated some existing fragmented logic regarding how we gather the scripts needed for a
given transaction. This is a much needed cleanup to prevent future mistakes.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3019" target="_blank" rel="noopener noreferrer">3019</a>.</li><li>We fixed a problem with our generators that was causing a fair number of our property tests to
fail in CI.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3039" target="_blank" rel="noopener noreferrer">3039</a>.</li><li>We have started the work to update Plutus. This will bring support for SECP in the next major
protocol version, and also address a
<a href="https://github.com/input-output-hk/cardano-ledger/issues/2902" target="_blank" rel="noopener noreferrer">problem</a>
that we current have evolving the cost models.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3030" target="_blank" rel="noopener noreferrer">3030</a>.</li><li>We addressed a small issue that came up when integrating the conway era downstream, namely
the lack of some serialization instances.
See <a href="https://github.com/input-output-hk/cardano-ledger/pull/3022" target="_blank" rel="noopener noreferrer">3022</a>.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Ledger Team Update]]></title>
        <id>2022-09-01-ledger</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-09-01-ledger"/>
        <updated>2022-09-01T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Ledger Update]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ledger-update">Ledger Update<a class="hash-link" href="#ledger-update" title="Direct link to heading">​</a></h2><p>Since finishing up support for the Vasil Hardfork, the ledger team has been
focused on two main things: a new ledger era and technical debt.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-minimal-ledger-era">New minimal ledger era<a class="hash-link" href="#new-minimal-ledger-era" title="Direct link to heading">​</a></h3><p>We have implemented a new ledger era named <code>conway</code> which is nearly identical
to the <code>babbage</code> era. This has been the first time that we have been able to see
what a minimal ledger era looks like. We have finished this task, modulo any
integration issues that might come up. The only thing that the <code>conway</code> era
does differently from the <code>babbage</code> era is provide support for rotating
the master keys using the hardfork combinator's state translation.
We may end up adding features to the <code>conway</code> era, but it is a nice exercise
seeing what it looks like to get a minimal ledger era supported in all the
downstream components.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="addressing-technical-debt">Addressing technical debt<a class="hash-link" href="#addressing-technical-debt" title="Direct link to heading">​</a></h3><p>We have been addressing technical debt, mostly in an effort to make the
repository a more friendly code base to work in.</p><ul><li>We have begun work on a ledger API, called <code>cardano-ledger-api</code>.</li><li>We have done a big re-design of the major type classes used in the ledger.
With hindsight on our side, we now have something much more organized and
easier to use.</li><li>We have done a lot of re-naming. The names across eras are now much more
uniform, avoid certain confusions that plagued us, and are clearer in where
they are from.</li><li>We have reduced a lot of code duplication that could lead to bugs if you
do not have the whole code base in your head.</li><li>We have added a handful of performance improvements.</li><li>We added type safety in a number of locations. In particular, the type of
values that can be minted in a transaction no longer allow for Lovelace
in the type, and some functions which used to handle both timelock scripts
and plutus script now correctly enoforce at the type level that only one of
them can be used.</li><li>We made our generators so that they now produce a much richer set of
valid serializations. There is room within CBOR to serialize the same
data structure in multiple ways, and it is helpful to have the generators
use a wide variety.</li><li>We have begun re-organizing our test suites.</li></ul>]]></content>
        <author>
            <name>Jared Corduan</name>
            <uri>https://github.com/JaredCorduan</uri>
        </author>
        <category label="ledger" term="ledger"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Consensus Team Update]]></title>
        <id>2022-08-31-consensus</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-08-31-consensus"/>
        <updated>2022-08-31T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Executive summary]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive summary<a class="hash-link" href="#executive-summary" title="Direct link to heading">​</a></h2><ul><li>We did most of the heavy lifting required to integrate the Conway era.</li><li>We have property tests for the UTxO HD backing store API implementations. A
possible bug was identified. Work is ongoing to make sure the property-tests
cover all the relevant cases.</li><li>We implemented and benchmarked the "anti-diff" prototype to speed up the UTxO
HD functionality. Results show a rough speedup of <code>4x</code> to <code>5.5x</code> across
several scenarios. Note that: <a href="https://hackage.haskell.org/package/tasty-bench-0.3.2/docs/Test-Tasty-Bench.html" target="_blank" rel="noopener noreferrer">"Data reported by <code>tasty-bench</code> is only of
indicative and comparative significance."</a>.
We are investigating additional performance improvements. The "anti-diff"
prototype and benchmarks are still pending code review.</li><li>We elaborated a draft specification for the Genesis implementation and
<code>ChainSync</code> jumping optimization.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workstreams">Workstreams<a class="hash-link" href="#workstreams" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conway">Conway<a class="hash-link" href="#conway" title="Direct link to heading">​</a></h3><ul><li>Integration PR of the minimal Conway era (<a href="https://github.com/input-output-hk/ouroboros-network/issues/3962" target="_blank" rel="noopener noreferrer">Issue #3963</a>, <a href="https://github.com/input-output-hk/ouroboros-network/pull/3971" target="_blank" rel="noopener noreferrer">PR
#3971</a>).</li><li>Discussions with Ledger revealed possible sources of confusion about which
data should be changed in the Conway era. As a result, a new technical debt
issue was raised, which does not block the integration of the Conway era
(<a href="https://github.com/input-output-hk/ouroboros-network/issues/3976" target="_blank" rel="noopener noreferrer">Issue #3976</a>).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="utxo-hd">UTxO HD<a class="hash-link" href="#utxo-hd" title="Direct link to heading">​</a></h3><ul><li><p><a href="https://github.com/input-output-hk/ouroboros-network/issues/3954" target="_blank" rel="noopener noreferrer">Issue #3954</a>, <a href="https://github.com/input-output-hk/ouroboros-network/tree/jdral/3954-backingstore-property-tests" target="_blank" rel="noopener noreferrer">branch</a>: The functionality of a
backing store, which is the interface to the on-disk part of ledger state in
UTxO-HD, is tested at a high level through the <code>OnDisk</code> tests. However, some
functionalities remain untested, e.g., reads of ranges of keys. As such, we
have implemented <code>quickcheck-state-machine</code> tests that exercise backing stores
directly. The tests are reusable for different backing store implementations
because the tests are implementation-agnostic: Any backing store that conforms
to the backing store interface can be plugged into the tests. Work is still
ongoing to label/monitor the tests, such that we can verify that interesting
cases are being tested. Furthermore, a possible bug has been identified in the
LMDB backing store with respect to range reads, though the bug has not been
resolved yet.</p></li><li><p><a href="https://github.com/input-output-hk/ouroboros-network/issues/3946" target="_blank" rel="noopener noreferrer">Issue #3946</a>, <a href="https://github.com/input-output-hk/ouroboros-network/tree/jdral/CAD-4199-prototype-anti-diffs" target="_blank" rel="noopener noreferrer">branch</a>, <a href="https://github.com/input-output-hk/ouroboros-network/pull/3882" target="_blank" rel="noopener noreferrer">PR #3882</a>: The
"anti-diff" prototype proposes an alternative approach to keeping track of
sequences (more specifically, <code>FingerTree</code>s) of diffs. These diff sequences
are a component of the in-memory parts of the ledger state in UTxO-HD. Since
the consensus code often requires the cumulative diff of a sequence of diffs,
the current implementation "caches" cumulative diffs of each subtree in the
diff sequence. This caching allows relatively fast reconstruction of the total
cumulative diff, but this caching proved to incur a non-negligible cost: when
we manipulate diff sequences through splits and appends, we force re-computing
a logarithmic number of caches. This is problematic, since we often split and
append in consensus: we split when we flush diffs to a backing store or when
we roll back blocks, and we append when pushing blocks. The new approach
should reduce the overhead of this caching.</p><p>We implemented micro-benchmarks for the "anti-diff" prototype: we
first generate a sequence of commands (<code>Forward</code>, <code>Push</code>, <code>Flush</code>, or
<code>Rollback</code>) through a simulation, after which we measure the performance of
applying the commands to a diff sequence. In this context, <code>Forward</code> means
forwarding of values through a diff, whereas <code>Rollback</code> means switching to
a different fork by rolling back diffs/blocks and pushing new ones.
Moreover, we compare the performance for the two implementations: the
"legacy" approach, and the anti-diff approach.</p><p>Some preliminary results were positive, but we needed to revisit the
benchmark's configuration to obtain more definitive results. After a
discussion with @dcoutts and the consensus team about this configuration
(e.g., number of commands generated, choice of the security parameter <code>k</code>),
the benchmarks should now be closer to the realistic setting. The following
configuration specifies the default configuration that is used in the
benchmarking code:</p><ul><li>Number of commands generated: <code>10_000</code></li><li>Security parameter <code>k</code>: <code>2160</code></li><li>Number of initial backing values: <code>100</code></li><li>Number of key-value pairs deleted by a push: <code>50</code></li><li>Number of key-value pairs inserted by a push: <code>50</code></li><li>Number of key-value pairs forwarded by a forward: <code>50</code></li><li>Probability of a large (in the range <code>[1000, 2000]</code>) rollback: <code>0.05</code></li><li>Probability of a small (in the range <code>[1, 10]</code>) rollback: <code>0.95</code></li><li>Order of commands:<ul><li>An equal number of forward and pushes.</li><li><code>1</code> flush every <code>10</code> pushes.</li><li><code>1</code> rollback every <code>100</code> pushes</li></ul></li></ul><p>Moreover, we run four benchmark scenarios:</p><ul><li>Default configuration</li><li>Without rollbacks</li><li>With only small rollbacks</li><li>Without rollbacks, larger flushes (<code>1</code> flush every <code>100</code> pushes)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-read-results">How to read results<a class="hash-link" href="#how-to-read-results" title="Direct link to heading">​</a></h3><p>Note: this section uses documentation from the
<a href="https://hackage.haskell.org/package/tasty-bench" target="_blank" rel="noopener noreferrer">tasty-bench</a> package to
explain how to read the results of running our benchmarks.</p><p>Running a benchmark scenario gives us the following (curated) output:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AntiDiff:                               OK (18.27s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2.527 s ±  47 ms, 2.1 GB allocated, 544 MB copied, 2.2 GB peak memory, 0.23x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LegacyDiff:                             OK (32.73s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10.829 s ± 148 ms, 6.8 GB allocated, 2.3 GB copied, 2.2 GB peak memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The output says that the first benchmark, which exercises the anti-diff
prototype, was repeatedly executed for <code>18.27</code> seconds (wall-clock time),
its predicted mean CPU time was <code>2.527</code> seconds and means of individual
samples do not often diverge from it further than <code>± 47</code> milliseconds
(double standard deviation). We also configure the RTS to collect GC
statistics, which enables <code>tasty-bench</code> to estimate and report memory usage.
This data is reported as per <code>RTSStats</code> fields: <code>allocated_bytes</code>,
<code>copied_bytes</code> and <code>max_mem_in_use_bytes</code>. So, the output of the first
benchmark says that a total of <code>2.1 GB</code> of memory was allocated, that a
total of <code>544 MB</code> of memory were copied, and that the peak memory in usage
was <code>2.2 GB</code>. We read the output for the second benchmark in the same way.</p><p>Furthermore, the benchmark compares the mean CPU times for
both the anti-diff and legacy approaches: In this case, the mean CPU time
for the anti-diff approach is <code>~0.23x</code> the mean CPU time for the legacy
approach. Conversely, the mean CPU time for the legacy approach is
<code>1 / 0.23 ~= 4.35x</code> the mean CPU time for the anti-diff approach. We will
call <code>0.23x</code> the <em>improvement factor</em>. We will call <code>4.35x</code> the <em>speedup</em>.</p><p>Note that these improvement factors (and reported results) are subject to
noise, randomness, the specific configuration parameters, and the whims
of statistics. Data reported by <code>tasty-bench</code> is only of indicative and
comparative significance.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="results">Results<a class="hash-link" href="#results" title="Direct link to heading">​</a></h3><p>For each of the 4 scenarios, we list the results of running the anti-diff and
legacy approaches 5 times. We run the benchmarks 5 times to get an indication
of whether the results are similar across multiple runs. Furthermore, we
calculate the accompanying <em>ranges</em> (if applicable) of improvement factors and
speedups.</p><p>Note also the decrease in total bytes allocated and total bytes copied for
the anti-diff approach compared to the legacy approach.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="default-configuration">Default configuration<a class="hash-link" href="#default-configuration" title="Direct link to heading">​</a></h4><table><thead><tr><th>Name</th><th>Mean CPU time</th><th>2*Stdev (CPU time)</th><th>Total bytes allocated</th><th>Total bytes copied</th><th>Peak memory</th></tr></thead><tbody><tr><td>Run 1: AntiDiff</td><td>2.533 s (0.23x)</td><td>4.7 ms</td><td>2.1 GB</td><td>557 MB</td><td>2.4 GB</td></tr><tr><td>Run 1: LegacyDiff</td><td>10.792 s</td><td>162 ms</td><td>6.8 GB</td><td>2.3 GB</td><td>2.4 GB</td></tr><tr><td>Run 2: AntiDiff</td><td>2.508 s (0.23x)</td><td>245 ms</td><td>2.1 GB</td><td>515 MB</td><td>2.2 GB</td></tr><tr><td>Run 2: LegacyDiff</td><td>10.850 s</td><td>30 ms</td><td>6.9 GB</td><td>2.3 GB</td><td>2.2 GB</td></tr><tr><td>Run 3: AntiDiff</td><td>2.562 s (0.23x)</td><td>5.0 ms</td><td>2.1 GB</td><td>552 MB</td><td>2.2 GB</td></tr><tr><td>Run 3: LegacyDiff</td><td>10.993 s</td><td>149 ms</td><td>6.9 GB</td><td>2.3 GB</td><td>2.2 GB</td></tr><tr><td>Run 4: AntiDiff</td><td>2.168 s (0.22x)</td><td>5.3 ms</td><td>1.8 GB</td><td>434 MB</td><td>2.0 GB</td></tr><tr><td>Run 4: LegacyDiff</td><td>9.976 s</td><td>39 ms</td><td>6.3 GB</td><td>2.0 GB</td><td>2.0 GB</td></tr><tr><td>Run 5: AntiDiff</td><td>2.527 s (0.23x)</td><td>47 ms</td><td>2.1 GB</td><td>544 MB</td><td>2.2 GB</td></tr><tr><td>Run 5: LegacyDiff</td><td>10.829 s</td><td>148 ms</td><td>6.8 GB</td><td>2.3 GB</td><td>2.2 GB</td></tr></tbody></table><ul><li>Improvement factor: <code>[0.22, 0.23]</code></li><li>Speedup : <code>[1 / 0.23 ~= 4.35, 1 / 0.22 ~= 4.55]</code></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="no-rollbacks">No rollbacks<a class="hash-link" href="#no-rollbacks" title="Direct link to heading">​</a></h4><table><thead><tr><th>Name</th><th>Mean CPU time</th><th>2*Stdev (CPU time)</th><th>Total bytes allocated</th><th>Total bytes copied</th><th>Peak memory</th></tr></thead><tbody><tr><td>Run 1: AntiDiff</td><td>1.638 s (0.19x)</td><td>36 ms</td><td>1.4 GB</td><td>181 MB</td><td>2.4 GB</td></tr><tr><td>Run 1: LegacyDiff</td><td>8.656 s</td><td>207 ms</td><td>5.7 GB</td><td>1.5 GB</td><td>2.4 GB</td></tr><tr><td>Run 2: AntiDiff</td><td>1.638 s (0.19x)</td><td>75 ms</td><td>1.4 GB</td><td>181 MB</td><td>2.2 GB</td></tr><tr><td>Run 2: LegacyDiff</td><td>8.654 s</td><td>322 ms</td><td>5.7 GB</td><td>1.5 GB</td><td>2.2 GB</td></tr><tr><td>Run 3: AntiDiff</td><td>1.663 s (0.19x)</td><td>74 ms</td><td>1.4 GB</td><td>181 MB</td><td>2.2 GB</td></tr><tr><td>Run 3: LegacyDiff</td><td>8.799 s</td><td>216 ms</td><td>5.7 GB</td><td>1.5 GB</td><td>2.2 GB</td></tr><tr><td>Run 4: AntiDiff</td><td>1.645 s (0.19x)</td><td>51 ms</td><td>1.4 GB</td><td>181 MB</td><td>2.0 GB</td></tr><tr><td>Run 4: LegacyDiff</td><td>8.732 s</td><td>261 ms</td><td>5.7 GB</td><td>1.5 GB</td><td>2.0 GB</td></tr><tr><td>Run 5: AntiDiff</td><td>1.639 s (0.19x)</td><td>19 ms</td><td>1.4 GB</td><td>181 MB</td><td>2.2 GB</td></tr><tr><td>Run 5: LegacyDiff</td><td>8.653 s</td><td>234 ms</td><td>5.7 GB</td><td>1.5 GB</td><td>2.2 GB</td></tr></tbody></table><ul><li>Improvement factor: <code>0.19</code></li><li>Speedup : <code>1 / 0.19 ~= 5.25</code></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="only-small-rollbacks">Only small rollbacks<a class="hash-link" href="#only-small-rollbacks" title="Direct link to heading">​</a></h4><table><thead><tr><th>Name</th><th>Mean CPU time</th><th>2*Stdev (CPU time)</th><th>Total bytes allocated</th><th>Total bytes copied</th><th>Peak memory</th></tr></thead><tbody><tr><td>Run 1: AntiDiff</td><td>1.833 s (0.18x)</td><td>36 ms</td><td>1.5 GB</td><td>185 MB</td><td>2.4 GB</td></tr><tr><td>Run 1: LegacyDiff</td><td>10.362 s</td><td>867 ms</td><td>5.8 GB</td><td>1.6 GB</td><td>2.4 GB</td></tr><tr><td>Run 2: AntiDiff</td><td>1.696 s (0.19x)</td><td>30 ms</td><td>1.5 GB</td><td>185 MB</td><td>2.2 GB</td></tr><tr><td>Run 2: LegacyDiff</td><td>8.822 s</td><td>106 ms</td><td>5.8 GB</td><td>1.5 GB</td><td>2.2 GB</td></tr><tr><td>Run 3: AntiDiff</td><td>1.702 s (0.19x)</td><td>44 ms</td><td>1.5 GB</td><td>186 MB</td><td>2.2 GB</td></tr><tr><td>Run 3: LegacyDiff</td><td>8.906 s</td><td>147 ms</td><td>5.8 GB</td><td>1.5 GB</td><td>2.2 GB</td></tr><tr><td>Run 4: AntiDiff</td><td>1.701 s (0.19x)</td><td>47 ms</td><td>1.5 GB</td><td>185 MB</td><td>2.0 GB</td></tr><tr><td>Run 4: LegacyDiff</td><td>8.949 s</td><td>197 ms</td><td>5.8 GB</td><td>1.5 GB</td><td>2.0 GB</td></tr><tr><td>Run 5: AntiDiff</td><td>1.677 s (0.19x)</td><td>55 ms</td><td>1.5 GB</td><td>186 MB</td><td>2.2 GB</td></tr><tr><td>Run 5: LegacyDiff</td><td>8.856 s</td><td>177 ms</td><td>5.8 GB</td><td>1.5 GB</td><td>2.2 GB</td></tr></tbody></table><ul><li><p>Improvement factor: <code>[0.18, 0.19]</code></p></li><li><p>Speedup : <code>[1 / 0.19 ~= 5.25, 1 / 0.18 ~= 5.55]</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="no-rollbacks-larger-flushes-every-100-pushes">No rollbacks, larger flushes (every 100 pushes)<a class="hash-link" href="#no-rollbacks-larger-flushes-every-100-pushes" title="Direct link to heading">​</a></h4><table><thead><tr><th>Name</th><th>Mean CPU time</th><th>2*Stdev (CPU time)</th><th>Total bytes allocated</th><th>Total bytes copied</th><th>Peak memory</th></tr></thead><tbody><tr><td>Run 1: AntiDiff</td><td>1.643 s (0.25x)</td><td>21 ms</td><td>1.5 GB</td><td>196 MB</td><td>2.4 GB</td></tr><tr><td>Run 1: LegacyDiff</td><td>6.591 s</td><td>351 ms</td><td>4.0 GB</td><td>1.4 GB</td><td>2.4 GB</td></tr><tr><td>Run 2: AntiDiff</td><td>1.616 s (0.25x)</td><td>47 ms</td><td>1.5 GB</td><td>196 MB</td><td>2.2 GB</td></tr><tr><td>Run 2: LegacyDiff</td><td>6.520 s</td><td>232 ms</td><td>4.0 GB</td><td>1.4 GB</td><td>2.2 GB</td></tr><tr><td>Run 3: AntiDiff</td><td>1.640 s (0.25x)</td><td>34 ms</td><td>1.5 GB</td><td>196 MB</td><td>2.2 GB</td></tr><tr><td>Run 3: LegacyDiff</td><td>6.540 s</td><td>150 ms</td><td>4.0 GB</td><td>1.4 GB</td><td>2.2 GB</td></tr><tr><td>Run 4: AntiDiff</td><td>1.635 s (0.25x)</td><td>76 ms</td><td>1.5 GB</td><td>196 MB</td><td>2.0 GB</td></tr><tr><td>Run 4: LegacyDiff</td><td>6.589 s</td><td>131 ms</td><td>4.0 GB</td><td>1.4 GB</td><td>2.0 GB</td></tr><tr><td>Run 5: AntiDiff</td><td>1.628 s (0.25x)</td><td>19 ms</td><td>1.5 GB</td><td>196 MB</td><td>2.2 GB</td></tr><tr><td>Run 5: LegacyDiff</td><td>6.490 s</td><td>5.9 ms</td><td>4.0 GB</td><td>1.4 GB</td><td>2.2 GB</td></tr></tbody></table></li><li><p>Improvement factor: <code>0.25</code></p></li><li><p>Speedup : <code>1 / 0.25 ~= 4</code></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="genesis">Genesis<a class="hash-link" href="#genesis" title="Direct link to heading">​</a></h3><ul><li>We elaborated a draft of the specification of the Genesis implementation and
the ChainSync Jumping optimization. In particular, this includes a proof
sketch that the latter preserves liveness and safety in all cases (<a href="https://github.com/input-output-hk/ouroboros-network/issues/3964" target="_blank" rel="noopener noreferrer">Issue
3964</a>).<ul><li>@nfrisby's main realization during this sprint was that he had been
focusing so far on the case where the selected chain is an extension of
the intersection of our peers' ChainSync candidates.</li><li>This is the main case, ie an "absorbing" state, but it's not the only
case.</li><li>The new proof sketch begins by case splitting on that predicate, and
that made the sketch quite a bit easier to follow.</li></ul></li><li>We continued working on the "happy path" <code>ChainSync</code> Jumping prototype (<a href="https://github.com/input-output-hk/ouroboros-network/issues/3960" target="_blank" rel="noopener noreferrer">Issue
3960</a>).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="technical-debt">Technical debt<a class="hash-link" href="#technical-debt" title="Direct link to heading">​</a></h3><ul><li>We started working on the issues required to re-enable nightly CI runs..
Nightly CI runs have far more lax time constraints, which gives the option to
run significantly more property tests than in our regular CI. To this end, we
merged a PR to easily adapt the number of tests globally (<a href="https://github.com/input-output-hk/ouroboros-network/pull/3947" target="_blank" rel="noopener noreferrer">PR
#3947</a>).</li></ul>]]></content>
        <author>
            <name>Damian Nadales</name>
            <uri>https://github.com/dnadales</uri>
        </author>
        <category label="consensus" term="consensus"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[Network Team Update]]></title>
        <id>2022-08-12-network</id>
        <link href="https://input-output-hk.github.io/cardano-updates/2022-08-12-network"/>
        <updated>2022-08-12T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[The networking team took an active part in the project iteration (PI) planning]]></summary>
        <content type="html"><![CDATA[<p>The networking team took an active part in the project iteration (PI) planning
session, see cardano-node <a href="https://github.com/orgs/input-output-hk/projects/39" target="_blank" rel="noopener noreferrer">backlog</a> for detailed
outcomes.</p><ul><li><p>We started working on a detailed design / implementation plan for gossip.</p></li><li><p>We merged <a href="https://github.com/input-output-hk/ouroboros-network/pull/3859" target="_blank" rel="noopener noreferrer">input-output-hk/ouroboros-network#3859</a> which
sets the ouroboros-network repository for the single relay release.</p></li><li><p>We identified a bug in the network simulator, which is fixed in the
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3852" target="_blank" rel="noopener noreferrer">input-output-hk/ouroboros-network#3852</a>.
The above PR was reviewed.</p></li><li><p>We set the tracing configuration for nodes which we deploy and fixed and
identified some deployment hiccups.  We identified some bugs in the RT view
which were registered by the maintainers.
<a href="https://github.com/input-output-hk/ouroboros-network-ops/pull/4" target="_blank" rel="noopener noreferrer">input-output-hk/ouroboros-network-ops#4</a></p></li><li><p>We fixed typos in network-mux library:
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3921" target="_blank" rel="noopener noreferrer">input-output-hk/ouroboros-network#3921</a></p></li><li><p>For easy of debugging we renamed a trace point:
<a href="https://github.com/input-output-hk/ouroboros-network/pull/3922" target="_blank" rel="noopener noreferrer">input-output-hk/ouroboros-network#3922</a></p></li><li><p>Duncan iterated on his simulation / visualisation.  He also was able to
identify and fix a bug in the simulator.  The simulation contains 50 nodes.
Dashed lines indicate and established connection, while solid lines indicate
a TCP connection with fully open TCP window.</p></li></ul><div style="width:640px;height:360px"></div>]]></content>
        <author>
            <name>Marcin Szamotulski</name>
            <uri>https://github.com/coot</uri>
        </author>
        <category label="network" term="network"/>
    </entry>
</feed>